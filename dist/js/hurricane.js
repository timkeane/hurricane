!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(n,r,function(e){return t[e]}.bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=307)}([function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={ASSUME_TOUCH:!1,DEFAULT_MAX_ZOOM:42,DEFAULT_MIN_ZOOM:0,DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD:.5,DEFAULT_TILE_SIZE:256,DEFAULT_WMS_VERSION:"1.3.0",ENABLE_CANVAS:!0,ENABLE_PROJ4JS:!0,ENABLE_RASTER_REPROJECTION:!0,ENABLE_WEBGL:!0,DEBUG_WEBGL:!0,INITIAL_ATLAS_SIZE:256,MAX_ATLAS_SIZE:-1,MOUSEWHEELZOOM_MAXDELTA:1,OVERVIEWMAP_MAX_RATIO:.75,OVERVIEWMAP_MIN_RATIO:.1,RASTER_REPROJECTION_MAX_SOURCE_TILES:100,RASTER_REPROJECTION_MAX_SUBDIVISION:10,RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH:.25,SIMPLIFY_TOLERANCE:.5,WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK:1024,VERSION:"v4.6.5"};i.WEBGL_MAX_TEXTURE_SIZE,i.WEBGL_EXTENSIONS,i.inherits=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},i.nullFunction=function(){},i.getUid=function(t){return t.ol_uid||(t.ol_uid=++i.uidCounter_)},i.uidCounter_=0,e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.max,o=Math.min;Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(11)),s=n(i(152)),l=n(i(151)),u={boundingExtent:function(t){for(var e=u.createEmpty(),i=0,n=t.length;i<n;++i)u.extendCoordinate(e,t[i]);return e},boundingExtentXYs_:function(t,e,i){var n=o.apply(null,t),a=o.apply(null,e),s=r.apply(null,t),l=r.apply(null,e);return u.createOrUpdate(n,a,s,l,i)},buffer:function(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]},clone:function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()},closestSquaredDistanceXY:function(t,e,i){var n,r;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*r},containsCoordinate:function(t,e){return u.containsXY(t,e[0],e[1])},containsExtent:function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},containsXY:function(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]},coordinateRelationship:function(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],a=e[0],s=e[1],u=l.default.UNKNOWN;return a<i?u|=l.default.LEFT:a>r&&(u|=l.default.RIGHT),s<n?u|=l.default.BELOW:s>o&&(u|=l.default.ABOVE),u===l.default.UNKNOWN&&(u=l.default.INTERSECTING),u},createEmpty:function(){return[1/0,1/0,-1/0,-1/0]},createOrUpdate:function(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]},createOrUpdateEmpty:function(t){return u.createOrUpdate(1/0,1/0,-1/0,-1/0,t)},createOrUpdateFromCoordinate:function(t,e){var i=t[0],n=t[1];return u.createOrUpdate(i,n,i,n,e)},createOrUpdateFromCoordinates:function(t,e){var i=u.createOrUpdateEmpty(e);return u.extendCoordinates(i,t)},createOrUpdateFromFlatCoordinates:function(t,e,i,n,r){var o=u.createOrUpdateEmpty(r);return u.extendFlatCoordinates(o,t,e,i,n)},createOrUpdateFromRings:function(t,e){var i=u.createOrUpdateEmpty(e);return u.extendRings(i,t)},equals:function(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]},extend:function(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t},extendCoordinate:function(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])},extendCoordinates:function(t,e){var i,n;for(i=0,n=e.length;i<n;++i)u.extendCoordinate(t,e[i]);return t},extendFlatCoordinates:function(t,e,i,n,r){for(;i<n;i+=r)u.extendXY(t,e[i],e[i+1]);return t},extendRings:function(t,e){var i,n;for(i=0,n=e.length;i<n;++i)u.extendCoordinates(t,e[i]);return t},extendXY:function(t,e,i){t[0]=o(t[0],e),t[1]=o(t[1],i),t[2]=r(t[2],e),t[3]=r(t[3],i)},forEachCorner:function(t,e,i){var n;return(n=e.call(i,u.getBottomLeft(t)))||((n=e.call(i,u.getBottomRight(t)))||((n=e.call(i,u.getTopRight(t)))||!!(n=e.call(i,u.getTopLeft(t)))&&n))},getArea:function(t){var e=0;return u.isEmpty(t)||(e=u.getWidth(t)*u.getHeight(t)),e},getBottomLeft:function(t){return[t[0],t[1]]},getBottomRight:function(t){return[t[2],t[1]]},getCenter:function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},getCorner:function(t,e){var i;return e===s.default.BOTTOM_LEFT?i=u.getBottomLeft(t):e===s.default.BOTTOM_RIGHT?i=u.getBottomRight(t):e===s.default.TOP_LEFT?i=u.getTopLeft(t):e===s.default.TOP_RIGHT?i=u.getTopRight(t):a.default.assert(!1,13),i},getEnlargedArea:function(t,e){var i=o(t[0],e[0]),n=o(t[1],e[1]);return(r(t[2],e[2])-i)*(r(t[3],e[3])-n)},getForViewAndSize:function(t,e,i,n,a){var s=e*n[0]/2,l=e*n[1]/2,d=Math.cos(i),f=Math.sin(i),c=s*d,h=s*f,p=l*d,_=l*f,g=t[0],y=t[1],v=g-c+_,m=g-c-_,E=g+c-_,b=g+c+_,C=y-h-p,T=y-h+p,x=y+h+p,S=y+h-p;return u.createOrUpdate(o(v,m,E,b),o(C,T,x,S),r(v,m,E,b),r(C,T,x,S),a)},getHeight:function(t){return t[3]-t[1]},getIntersectionArea:function(t,e){var i=u.getIntersection(t,e);return u.getArea(i)},getIntersection:function(t,e,i){var n=i||u.createEmpty();return u.intersects(t,e)&&(n[0]=t[0]>e[0]?t[0]:e[0],n[1]=t[1]>e[1]?t[1]:e[1],n[2]=t[2]<e[2]?t[2]:e[2],n[3]=t[3]<e[3]?t[3]:e[3]),n},getMargin:function(t){return u.getWidth(t)+u.getHeight(t)},getSize:function(t){return[t[2]-t[0],t[3]-t[1]]},getTopLeft:function(t){return[t[0],t[3]]},getTopRight:function(t){return[t[2],t[3]]},getWidth:function(t){return t[2]-t[0]},intersects:function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]},isEmpty:function(t){return t[2]<t[0]||t[3]<t[1]},returnOrUpdate:function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t},scaleFromCenter:function(t,e){var i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n},intersectsSegment:function(t,e,i){var n=!1,r=u.coordinateRelationship(t,e),o=u.coordinateRelationship(t,i);if(r===l.default.INTERSECTING||o===l.default.INTERSECTING)n=!0;else{var a,s,d=t[0],f=t[1],c=t[2],h=t[3],p=e[0],_=e[1],g=i[0],y=i[1],v=(y-_)/(g-p);!(o&l.default.ABOVE)||r&l.default.ABOVE||(n=(a=g-(y-h)/v)>=d&&a<=c),n||!(o&l.default.RIGHT)||r&l.default.RIGHT||(n=(s=y-(g-c)*v)>=f&&s<=h),n||!(o&l.default.BELOW)||r&l.default.BELOW||(n=(a=g-(y-f)/v)>=d&&a<=c),n||!(o&l.default.LEFT)||r&l.default.LEFT||(n=(s=y-(g-d)*v)>=f&&s<=h)}return n},applyTransform:function(t,e,i){var n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];e(n,n,2);var r=[n[0],n[2],n[4],n[6]],o=[n[1],n[3],n[5],n[7]];return u.boundingExtentXYs_(r,o,i)}};e.default=u},function(t){t.exports=jQuery},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};i.assign="function"==typeof Object.assign?Object.assign:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e,i=Object(t),n=1,r=arguments.length;n<r;++n)if(void 0!==(e=arguments[n])&&null!==e)for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);return i},i.clear=function(t){for(var e in t)delete t[e]},i.getValues=function(t){var e=[];for(var i in t)e.push(t[i]);return e},i.isEmpty=function(t){for(var e in t)return!1;return!e},e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={CHANGE:"change",CLEAR:"clear",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(3)),r={bindListener_:function(t){var e=function(e){var i=t.listener,n=t.bindTo||t.target;return t.callOnce&&r.unlistenByKey(t),i.call(n,e)};return t.boundListener=e,e},findListener_:function(t,e,i,n){for(var r,o=0,a=t.length;o<a;++o)if((r=t[o]).listener===e&&r.bindTo===i)return n&&(r.deleteIndex=o),r},getListeners:function(t,e){var i=t.ol_lm;return i?i[e]:void 0},getListenerMap_:function(t){var e=t.ol_lm;return e||(e=t.ol_lm={}),e},removeListeners_:function(t,e){var i=r.getListeners(t,e);if(i){for(var o=0,a=i.length;o<a;++o)t.removeEventListener(e,i[o].boundListener),n.default.clear(i[o]);i.length=0;var s=t.ol_lm;s&&(delete s[e],0===Object.keys(s).length&&delete t.ol_lm)}},listen:function(t,e,i,n,o){var a=r.getListenerMap_(t),s=a[e];s||(s=a[e]=[]);var l=r.findListener_(s,i,n,!1);return l?!o&&(l.callOnce=!1):(l={bindTo:n,callOnce:!!o,listener:i,target:t,type:e},t.addEventListener(e,r.bindListener_(l)),s.push(l)),l},listenOnce:function(t,e,i,n){return r.listen(t,e,i,n,!0)},unlisten:function(t,e,i,n){var o=r.getListeners(t,e);if(o){var a=r.findListener_(o,i,n,!0);a&&r.unlistenByKey(a)}},unlistenByKey:function(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=r.getListeners(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&r.removeListeners_(t.target,t.type)}n.default.clear(t)}},unlistenAll:function(t){var e=r.getListenerMap_(t);for(var i in e)r.removeListeners_(t,i)}};e.default=r},function(t,e,i){"use strict";var n=Math.PI,r=Math.abs;Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(i(11)),a={clamp:function(t,e,i){return Math.min(Math.max(t,e),i)}};a.cosh="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},a.roundUpToPowerOfTwo=function(t){return o.default.assert(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},a.squaredSegmentDistance=function(t,e,i,n,r,o){var s=r-i,l=o-n;if(0!=s||0!=l){var u=((t-i)*s+(e-n)*l)/(s*s+l*l);1<u?(i=r,n=o):0<u&&(i+=s*u,n+=l*u)}return a.squaredDistance(t,e,i,n)},a.squaredDistance=function(t,e,i,n){var r=i-t,o=n-e;return r*r+o*o},a.solveLinearSystem=function(t){for(var e=t.length,i=0;i<e;i++){for(var n,o=i,a=r(t[i][i]),s=i+1;s<e;s++)(n=r(t[s][i]))>a&&(a=n,o=s);if(0===a)return null;var l=t[o];t[o]=t[i],t[i]=l;for(var u,d=i+1;d<e;d++){u=-t[d][i]/t[i][i];for(var f=i;f<e+1;f++)i==f?t[d][f]=0:t[d][f]+=u*t[i][f]}}for(var c=Array(e),h=e-1;0<=h;h--){c[h]=t[h][e]/t[h][h];for(var p=h-1;0<=p;p--)t[p][e]-=t[p][h]*c[h]}return c},a.toDegrees=function(t){return 180*t/n},a.toRadians=function(t){return t*n/180},a.modulo=function(t,e){var i=t%e;return 0>i*e?i+e:i},a.lerp=function(t,e,i){return t+i*(e-t)},e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={binarySearch:function(t,e,n){for(var r,o,a=n||i.numberSafeCompareFunction,s=0,l=t.length,u=!1;s<l;)0>(o=+a(t[r=s+(l-s>>1)],e))?s=r+1:(l=r,u=!o);return u?s:~s},numberSafeCompareFunction:function(t,e){return t>e?1:t<e?-1:0},includes:function(t,e){return 0<=t.indexOf(e)},linearFindNearest:function(t,e,i){var n,r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;if(0<i){for(n=1;n<r;++n)if(t[n]<e)return n-1}else if(0>i){for(n=1;n<r;++n)if(t[n]<=e)return n}else for(n=1;n<r;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return r-1},reverseSubArray:function(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}},extend:function(t,e){var i,n=Array.isArray(e)?e:[e],r=n.length;for(i=0;i<r;i++)t[t.length]=n[i]},remove:function(t,e){var i=t.indexOf(e),n=-1<i;return n&&t.splice(i,1),n},find:function(t,e){for(var i,n=t.length>>>0,r=0;r<n;r++)if(e(i=t[r],r,t))return i;return null},equals:function(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0},stableSort:function(t,e){var i,n=t.length,r=Array(t.length);for(i=0;i<n;i++)r[i]={index:i,value:t[i]};for(r.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=r[i].value},findIndex:function(t,e){var i;return!t.every(function(n,r){return i=r,!e(n,r,t)})?i:-1},isSorted:function(t,e,n){var r=e||i.numberSafeCompareFunction;return t.every(function(e,i){if(0===i)return!0;var o=r(t[i-1],e);return!(0<o||n&&0===o)})}};e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={createCanvasContext2D:function(t,e){var i=document.createElement("CANVAS");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")},outerWidth:function(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)},outerHeight:function(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)},replaceNode:function(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)},removeNode:function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},removeChildren:function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}};e.default=i},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(2)),o=n(i(305));o.default.defs("EPSG:2263","+proj=lcc +lat_1=41.03333333333333 +lat_2=40.66666666666666 +lat_0=40.16666666666666 +lon_0=-74 +x_0=300000.0000000001 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=ft +to_meter=0.3048006096012192 +no_defs"),o.default.defs("EPSG:6539","+proj=lcc +lat_1=40.66666666666666 +lat_2=41.03333333333333 +lat_0=40.16666666666666 +lon_0=-74 +x_0=300000 +y_0=0 +ellps=GRS80 +units=us-ft +no_defs"),t.proj4=o.default;var a={inherits:function(t,e){a.copyFromParentProperties(t.prototype,e.prototype)},subclass:function(t,e){var i=Object.getPrototypeOf(e);a.copyFromParentProperties(t,i),a.copyFromParentKeys(t,e)},mixin:function(t,e){e.forEach(function(e){r.default.extend(t,e)})},copyFromParentProperties:function(t,e){Object.getOwnPropertyNames(e).forEach(function(i){i in t||(t[i]=e[i])})},copyFromParentKeys:function(t,e){Object.keys(e).forEach(function(i){i in t||(t[i]=e[i])})},capitalize:function(t){var e="";return t.split(" ").forEach(function(t){var i=t.toLowerCase();e+=i.substr(0,1).toUpperCase(),e+=i.substr(1).toLowerCase(),e+=" "}),e.trim()},nextId:function(t){var e=a.uniqueIds[t];return a.uniqueIds[t]="number"==typeof e?e+1:0,t+"-"+a.uniqueIds[t]},html:function(t){if("function"==typeof t.html)return(0,r.default)(t.html());var e=(0,r.default)('<div class="nyc-html"></div>');return t.getProperties?t=t.getProperties():t.properties&&(t=t.properties),Object.keys(t).forEach(function(i){e.append('<div><span class="fld">'+i+'</span><span class="val">'+t[i]+"</span></div>")}),e},loading:function(t){t.hasClass("loading")&&t.append((0,r.default)("#loading").get(0)||a.LOADING_HTML)},ready:function(t){(0,r.default)(t||(0,r.default)("body")).removeClass("loading").attr("aria-hidden",!1),(0,r.default)("#loading").fadeOut()},cacheBust:function(t){var e=6e4*t;return Math.round((new Date).getTime()/e)*e},uniqueIds:{},LOADING_HTML:'<div id="loading"><div><svg xmlns="http://www.w3.org/2000/svg" width="152" height="52"><g transform="translate(1.5,0)"><polygon points="15.5,1.2 3.1,1.2 0,4.3 0,47.7 3.1,50.8 15.5,50.8 18.6,47.7 18.6,35.3 34.1,50.8 46.6,50.8 49.7,47.7 49.7,4.3 46.6,1.2 34.1,1.2 31,4.3 31,16.7 "/><polygon points="83.8,47.7 83.8,38.4 99.3,22.9 99.3,10.5 99.3,4.3 96.2,1.2 83.8,1.2 80.7,4.3 80.7,10.5 74.5,16.7 68.3,10.5 68.3,4.3 65.2,1.2 52.8,1.2 49.7,4.3 49.7,22.9 65.2,38.4 65.2,47.7 68.3,50.8 80.7,50.8 "/><polygon points="145.9,29.1 130.4,29.1 130.4,32.2 118,32.2 118,19.8 130.4,19.8 130.4,22.9 145.9,22.9 149,19.8 149,10.5 139.7,1.2 108.6,1.2 99.3,10.5 99.3,41.5 108.6,50.8 139.7,50.8 149,41.5 149,32.2 "/></g></svg><h1>maps.nyc.gov</h1></div></div>'};(0,r.default)(document).ready(function(){a.loading((0,r.default)("body"))}),e.default=a}).call(this,i(64))},function(t,e,i){"use strict";var n=Math.sin,r=Math.cos;Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(i(11)),a={tmp_:[,,,,,,],create:function(){return[1,0,0,1,0,0]},reset:function(t){return a.set(t,1,0,0,1,0,0)},multiply:function(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=e[0],u=e[1],d=e[2],f=e[3],c=e[4],h=e[5];return t[0]=i*l+r*u,t[1]=n*l+o*u,t[2]=i*d+r*f,t[3]=n*d+o*f,t[4]=i*c+r*h+a,t[5]=n*c+o*h+s,t},set:function(t,e,i,n,r,o,a){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t},setFromArray:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},apply:function(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e},rotate:function(t,e){var i=r(e),o=n(e);return a.multiply(t,a.set(a.tmp_,i,o,-o,i,0,0))},scale:function(t,e,i){return a.multiply(t,a.set(a.tmp_,e,0,0,i,0,0))},translate:function(t,e,i){return a.multiply(t,a.set(a.tmp_,1,0,0,1,e,i))},compose:function(t,e,i,o,a,s,l,u){var d=n(s),f=r(s);return t[0]=o*f,t[1]=a*d,t[2]=-o*d,t[3]=a*f,t[4]=l*o*f-u*o*d+e,t[5]=l*a*d+u*a*f+i,t},invert:function(t){var e=a.determinant(t);o.default.assert(0!==e,32);var i=t[0],n=t[1],r=t[2],s=t[3],l=t[4],u=t[5];return t[0]=s/e,t[1]=-n/e,t[2]=-r/e,t[3]=i/e,t[4]=(r*u-s*l)/e,t[5]=-(i*u-n*l)/e,t},determinant:function(t){return t[0]*t[3]-t[1]*t[2]}};e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(158)),r={assert:function(t,e){if(!t)throw new n.default(e)}};e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={TRUE:function(){return!0},FALSE:function(){return!1}};e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={ONE:1,SRC_ALPHA:770,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,TRIANGLES:4,TRIANGLE_STRIP:5,ONE_MINUS_SRC_ALPHA:771,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,CULL_FACE:2884,BLEND:3042,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126,RGBA:6408,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,LINK_STATUS:35714,LINEAR:9729,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE0:33984,CLAMP_TO_EDGE:33071,COMPILE_STATUS:35713,FRAMEBUFFER:36160,CONTEXT_IDS_:["experimental-webgl","webgl","webkit-3d","moz-webgl"],getContext:function(t,e){var n,r,o=i.CONTEXT_IDS_.length;for(r=0;r<o;++r)try{if(n=t.getContext(i.CONTEXT_IDS_[r],e))return n}catch(e){}return null}};e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(80)),a=n(i(143)),s=n(i(22)),l=n(i(3)),u=function(t){a.default.call(this),r.default.getUid(this),this.values_={},void 0!==t&&this.setProperties(t)};r.default.inherits(u,a.default),u.changeEventTypeCache_={},u.getChangeEventType=function(t){return u.changeEventTypeCache_.hasOwnProperty(t)?u.changeEventTypeCache_[t]:u.changeEventTypeCache_[t]="change:"+t},u.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},u.prototype.getKeys=function(){return Object.keys(this.values_)},u.prototype.getProperties=function(){return l.default.assign({},this.values_)},u.prototype.notify=function(t,e){var i;i=u.getChangeEventType(t),this.dispatchEvent(new u.Event(i,t,e)),i=o.default.PROPERTYCHANGE,this.dispatchEvent(new u.Event(i,t,e))},u.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},u.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},u.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},u.Event=function(t,e,i){s.default.call(this,t),this.key=e,this.oldValue=i},r.default.inherits(u.Event,s.default),e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(150)),a=n(i(1)),s=n(i(6)),l=n(i(291)),u=n(i(148)),d=n(i(83)),f=n(i(31)),c=n(i(149)),h=n(i(290)),p=n(i(289)),_={};_.METERS_PER_UNIT=f.default.METERS_PER_UNIT,_.SPHERE_=new o.default(o.default.DEFAULT_RADIUS),r.default.ENABLE_PROJ4JS&&(_.setProj4=function(t){c.default.set(t)}),_.getPointResolution=function(t,e,i,n){var r,o=(t=_.get(t)).getPointResolutionFunc();if(o)r=o(e,i);else if(t.getUnits()==f.default.DEGREES&&!n||n==f.default.DEGREES)r=e;else{var a=_.getTransformFromProjections(t,_.get("EPSG:4326")),s=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];s=a(s,s,2),r=(_.SPHERE_.haversineDistance(s.slice(0,2),s.slice(2,4))+_.SPHERE_.haversineDistance(s.slice(4,6),s.slice(6,8)))/2;var l=n?f.default.METERS_PER_UNIT[n]:t.getMetersPerUnit();void 0!==l&&(r/=l)}return r},_.addEquivalentProjections=function(t){_.addProjections(t),t.forEach(function(e){t.forEach(function(t){e!==t&&p.default.add(e,t,_.cloneTransform)})})},_.addEquivalentTransforms=function(t,e,i,n){t.forEach(function(t){e.forEach(function(e){p.default.add(t,e,i),p.default.add(e,t,n)})})},_.addProjection=function(t){h.default.add(t.getCode(),t),p.default.add(t,t,_.cloneTransform)},_.addProjections=function(t){t.forEach(_.addProjection)},_.clearAllProjections=function(){h.default.clear(),p.default.clear()},_.createProjection=function(t,e){return t?"string"==typeof t?_.get(t):t:_.get(e)},_.addCoordinateTransforms=function(t,e,i,n){var r=_.get(t),o=_.get(e);p.default.add(r,o,_.createTransformFromCoordinateTransform(i)),p.default.add(o,r,_.createTransformFromCoordinateTransform(n))},_.createTransformFromCoordinateTransform=function(t){return function(e,i,n){var r,o,a,s=e.length,l=void 0===n?2:n,u=void 0===i?Array(s):i;for(o=0;o<s;o+=l)for(r=t([e[o],e[o+1]]),u[o]=r[0],u[o+1]=r[1],a=l-1;2<=a;--a)u[o+a]=e[o+a];return u}},_.fromLonLat=function(t,e){return _.transform(t,"EPSG:4326",void 0===e?"EPSG:3857":e)},_.toLonLat=function(t,e){var i=_.transform(t,void 0===e?"EPSG:3857":e,"EPSG:4326"),n=i[0];return(-180>n||180<n)&&(i[0]=s.default.modulo(n+180,360)-180),i},_.get=function(t){var e=null;if(t instanceof d.default)e=t;else if("string"==typeof t){var i=t;if(e=h.default.get(i),r.default.ENABLE_PROJ4JS&&!e){var n=c.default.get();"function"==typeof n&&void 0!==n.defs(i)&&(e=new d.default({code:i}),_.addProjection(e))}}return e},_.equivalent=function(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?i:_.getTransformFromProjections(t,e)===_.cloneTransform&&i},_.getTransform=function(t,e){var i=_.get(t),n=_.get(e);return _.getTransformFromProjections(i,n)},_.getTransformFromProjections=function(t,e){var i=t.getCode(),n=e.getCode(),o=p.default.get(i,n);if(r.default.ENABLE_PROJ4JS&&!o){var a=c.default.get();if("function"==typeof a){var s=a.defs(i),l=a.defs(n);if(void 0!==s&&void 0!==l){if(s===l)_.addEquivalentProjections([e,t]);else{var u=a(n,i);_.addCoordinateTransforms(e,t,u.forward,u.inverse)}o=p.default.get(i,n)}}}return o||(o=_.identityTransform),o},_.identityTransform=function(t,e){if(void 0!==e&&t!==e){for(var i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t},_.cloneTransform=function(t,e){var i;if(void 0!==e){for(var n=0,r=t.length;n<r;++n)e[n]=t[n];i=e}else i=t.slice();return i},_.transform=function(t,e,i){return _.getTransform(e,i)(t,void 0,t.length)},_.transformExtent=function(t,e,i){var n=_.getTransform(e,i);return a.default.applyTransform(t,n)},_.transformWithProjections=function(t,e,i){return _.getTransformFromProjections(e,i)(t)},_.addCommon=function(){_.addEquivalentProjections(l.default.PROJECTIONS),_.addEquivalentProjections(u.default.PROJECTIONS),_.addEquivalentTransforms(u.default.PROJECTIONS,l.default.PROJECTIONS,l.default.fromEPSG4326,l.default.toEPSG4326)},_.addCommon(),e.default=_},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={ANIMATING:0,INTERACTING:1}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(81)),l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.container=(0,a.default)(t),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"getContainer",value:function(){return this.container}},{key:"find",value:function(t){return this.getContainer().find(t)}},{key:"append",value:function(t){return this.getContainer().append((0,a.default)(t))}}]),e}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(14)),a={},s="undefined"==typeof navigator?"":navigator.userAgent.toLowerCase();a.FIREFOX=-1!==s.indexOf("firefox"),a.SAFARI=-1!==s.indexOf("safari")&&-1==s.indexOf("chrom"),a.WEBKIT=-1!==s.indexOf("webkit")&&-1==s.indexOf("edge"),a.MAC=-1!==s.indexOf("macintosh"),a.DEVICE_PIXEL_RATIO=window.devicePixelRatio||1,a.CANVAS_LINE_DASH=!1,a.CANVAS=r.default.ENABLE_CANVAS&&function(){if(!("HTMLCanvasElement"in window))return!1;try{var t=document.createElement("CANVAS").getContext("2d");return!!t&&(void 0!==t.setLineDash&&(a.CANVAS_LINE_DASH=!0),!0)}catch(t){return!1}}(),a.DEVICE_ORIENTATION="DeviceOrientationEvent"in window,a.GEOLOCATION="geolocation"in navigator,a.TOUCH=r.default.ASSUME_TOUCH||"ontouchstart"in window,a.POINTER="PointerEvent"in window,a.MSPOINTER=!!navigator.msPointerEnabled,a.WEBGL,function(){if(r.default.ENABLE_WEBGL){var t,e=!1,i=[];if("WebGLRenderingContext"in window)try{var n=document.createElement("CANVAS"),s=o.default.getContext(n,{failIfMajorPerformanceCaveat:!0});s&&(e=!0,t=s.getParameter(s.MAX_TEXTURE_SIZE),i=s.getSupportedExtensions())}catch(i){}a.WEBGL=e,r.default.WEBGL_EXTENSIONS=i,r.default.WEBGL_MAX_TEXTURE_SIZE=t}}(),e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={CANVAS:"canvas",WEBGL:"webgl"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){this.propagationStopped,this.type=t,this.target=null};i.prototype.preventDefault=i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.stopPropagation=function(t){t.stopPropagation()},i.preventDefault=function(t){t.preventDefault()},e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(13)),a=n(i(1)),s=n(i(79)),l=n(i(29)),u=n(i(30)),d=n(i(3)),f=function(){s.default.call(this),this.layout=l.default.XY,this.stride=2,this.flatCoordinates=null};r.default.inherits(f,s.default),f.getLayoutForStride_=function(t){var e;return 2==t?e=l.default.XY:3==t?e=l.default.XYZ:4==t&&(e=l.default.XYZM),e},f.getStrideForLayout=function(t){var e;return t==l.default.XY?e=2:t==l.default.XYZ||t==l.default.XYM?e=3:t==l.default.XYZM&&(e=4),e},f.prototype.containsXY=o.default.FALSE,f.prototype.computeExtent=function(t){return a.default.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},f.prototype.getCoordinates=function(){},f.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},f.prototype.getFlatCoordinates=function(){return this.flatCoordinates},f.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},f.prototype.getLayout=function(){return this.layout},f.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(d.default.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),0>t||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},f.prototype.getSimplifiedGeometryInternal=function(){return this},f.prototype.getStride=function(){return this.stride},f.prototype.setFlatCoordinatesInternal=function(t,e){this.stride=f.getStrideForLayout(t),this.layout=t,this.flatCoordinates=e},f.prototype.setCoordinates=function(){},f.prototype.setLayout=function(t,e,i){var n;if(t)n=f.getStrideForLayout(t);else{var r;for(r=0;r<i;++r){if(0===e.length)return this.layout=l.default.XY,void(this.stride=2);e=e[0]}n=e.length,t=f.getLayoutForStride_(n)}this.layout=t,this.stride=n},f.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},f.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();u.default.rotate(i,0,i.length,n,t,e,i),this.changed()}},f.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var r=i;r||(r=a.default.getCenter(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();u.default.scale(o,0,o.length,s,t,n,r,o),this.changed()}},f.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();u.default.translate(i,0,i.length,n,t,e,i),this.changed()}},f.transform2D=function(t,e,i){var n=t.getFlatCoordinates();if(!n)return null;var r=t.getStride();return u.default.transform2D(n,0,n.length,r,e,i)},e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(40)),o=n(i(8)),a=n(i(3)),s=n(i(102)),l=n(i(10)),u={defaultFont:"10px sans-serif",defaultFillStyle:[0,0,0,1],defaultLineCap:"round",defaultLineDash:[],defaultLineDashOffset:0,defaultLineJoin:"round",defaultMiterLimit:10,defaultStrokeStyle:[0,0,0,1],defaultTextAlign:"center",defaultTextBaseline:"middle",defaultPadding:[0,0,0,0],defaultLineWidth:1};u.labelCache=new s.default,u.checkedFonts_={},u.measureContext_=null,u.textHeights_={},u.checkFont=function(){function t(t){var e=u.getMeasureContext();e.font=d,n=e.measureText(f).width;var i=!0;"monospace"!=t&&(e.font="32px "+t+",monospace",i=e.measureText(f).width!=n);return i}function e(){var e=!0;for(var n in s)s[n]<o&&(t(n)?(s[n]=o,a.default.clear(u.textHeights_),u.measureContext_=null,l.clear()):(++s[n],e=!1));e&&(window.clearInterval(i),i=void 0)}var i,n,o=60,s=u.checkedFonts_,l=u.labelCache,d="32px monospace",f="wmytzilWMYTZIL@#/&?$%10";return function(n){var a=r.default.getFontFamilies(n);if(a)for(var l,u=0,d=a.length;u<d;++u)(l=a[u])in s||(s[l]=o,!t(l)&&(s[l]=0,void 0===i&&(i=window.setInterval(e,32))))}}(),u.getMeasureContext=function(){var t=u.measureContext_;return t||(t=u.measureContext_=o.default.createCanvasContext2D(1,1)),t},u.measureTextHeight=function(){var t,e=u.textHeights_;return function(i){var n=e[i];return void 0==n&&(!t&&((t=document.createElement("span")).textContent="M",t.style.margin=t.style.padding="0 !important",t.style.position="absolute !important",t.style.left="-99999px !important"),t.style.font=i,document.body.appendChild(t),n=e[i]=t.offsetHeight,document.body.removeChild(t)),n}}(),u.measureTextWidth=function(t,e){var i=u.getMeasureContext();return t!=i.font&&(i.font=t),i.measureText(e).width},u.rotateAtOffset=function(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))},u.resetTransform_=l.default.create(),u.drawImage=function(t,e,i,n,r,o,a,s,l,d,f){var c;1!=i&&(c=t.globalAlpha,t.globalAlpha=c*i),e&&t.setTransform.apply(t,e),t.drawImage(n,r,o,a,s,l,d,a*f,s*f),c&&(t.globalAlpha=c),e&&t.setTransform.apply(t,u.resetTransform_)},e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(15)),a=n(i(27)),s=n(i(244)),l=n(i(6)),u=function(t){o.default.call(this),this.map_=null,this.setActive(!0),this.handleEvent=t.handleEvent};r.default.inherits(u,o.default),u.prototype.getActive=function(){return this.get(s.default.ACTIVE)},u.prototype.getMap=function(){return this.map_},u.prototype.setActive=function(t){this.set(s.default.ACTIVE,t)},u.prototype.setMap=function(t){this.map_=t},u.pan=function(t,e,i){var n=t.getCenter();if(n){var r=t.constrainCenter([n[0]+e[0],n[1]+e[1]]);i?t.animate({duration:i,easing:a.default.linear,center:r}):t.setCenter(r)}},u.rotate=function(t,e,i,n){e=t.constrainRotation(e,0),u.rotateWithoutConstraints(t,e,i,n)},u.rotateWithoutConstraints=function(t,e,i,n){if(void 0!==e){var r=t.getRotation(),o=t.getCenter();void 0!==r&&o&&0<n?t.animate({rotation:e,anchor:i,duration:n,easing:a.default.easeOut}):t.rotate(e,i)}},u.zoom=function(t,e,i,n,r){e=t.constrainResolution(e,0,r),u.zoomWithoutConstraints(t,e,i,n)},u.zoomByDelta=function(t,e,i,n){var r=t.getResolution(),o=t.constrainResolution(r,e,0);if(void 0!==o){var a=t.getResolutions();o=l.default.clamp(o,t.getMinResolution()||a[a.length-1],t.getMaxResolution()||a[0])}if(i&&void 0!==o&&o!==r){var s=t.getCenter(),d=t.calculateCenterZoom(o,i);d=t.constrainCenter(d),i=[(o*s[0]-r*d[0])/(o-r),(o*s[1]-r*d[1])/(o-r)]}u.zoomWithoutConstraints(t,o,i,n)},u.zoomWithoutConstraints=function(t,e,i,n){if(e){var r=t.getResolution(),o=t.getCenter();if(void 0!==r&&o&&e!==r&&n)t.animate({resolution:e,anchor:i,duration:n,easing:a.default.easeOut});else{if(i){var s=t.calculateCenterZoom(e,i);t.setCenter(s)}t.setResolution(e)}}},e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return 1-i.easeIn(1-t)},inAndOut:function(t){return 3*t*t-2*t*t*t},linear:function(t){return t},upAndDown:function(t){return.5>t?i.inAndOut(2*t):1-i.inAndOut(2*(t-.5))}};e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(1)),a=n(i(29)),s=n(i(12)),l=n(i(24)),u=n(i(37)),d=n(i(6)),f=function(t,e){l.default.call(this),this.setCoordinates(t,e)};r.default.inherits(f,l.default),f.prototype.clone=function(){var t=new f(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},f.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=d.default.squaredDistance(t,e,r[0],r[1]);if(o<n){var a,s=this.stride;for(a=0;a<s;++a)i[a]=r[a];return i.length=s,o}return n},f.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},f.prototype.computeExtent=function(t){return o.default.createOrUpdateFromCoordinate(this.flatCoordinates,t)},f.prototype.getType=function(){return s.default.POINT},f.prototype.intersectsExtent=function(t){return o.default.containsXY(t,this.flatCoordinates[0],this.flatCoordinates[1])},f.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,0),!this.flatCoordinates&&(this.flatCoordinates=[]),this.flatCoordinates.length=u.default.coordinate(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(a.default.XY,null)},f.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.default=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={transform2D:function(t,e,i,n,r,o){var a,s=o||[],l=0;for(a=e;a<i;a+=n){var u=t[a],d=t[a+1];s[l++]=r[0]*u+r[2]*d+r[4],s[l++]=r[1]*u+r[3]*d+r[5]}return o&&s.length!=l&&(s.length=l),s},rotate:function(t,e,i,n,r,o,a){for(var s=a||[],l=Math.cos(r),u=Math.sin(r),d=o[0],f=o[1],c=0,h=e;h<i;h+=n){var p=t[h]-d,_=t[h+1]-f;s[c++]=d+p*l-_*u,s[c++]=f+p*u+_*l;for(var g=h+2;g<h+n;++g)s[c++]=t[g]}return a&&s.length!=c&&(s.length=c),s},scale:function(t,e,i,n,r,o,a,s){for(var l=s||[],u=a[0],d=a[1],f=0,c=e;c<i;c+=n){var h=t[c]-u,p=t[c+1]-d;l[f++]=u+r*h,l[f++]=d+o*p;for(var _=c+2;_<c+n;++_)l[f++]=t[_]}return s&&l.length!=f&&(l.length=f),l},translate:function(t,e,i,n,r,o,a){var s,l,u=a||[],d=0;for(s=e;s<i;s+=n)for(u[d++]=t[s]+r,u[d++]=t[s+1]+o,l=s+2;l<s+n;++l)u[d++]=t[l];return a&&u.length!=d&&(u.length=d),u}};e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft",METERS_PER_UNIT:{}};i.METERS_PER_UNIT[i.DEGREES]=2*Math.PI*6370997/360,i.METERS_PER_UNIT[i.FEET]=.3048,i.METERS_PER_UNIT[i.METERS]=1,i.METERS_PER_UNIT[i.USFEET]=1200/3937,e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(11)),o=n(i(6)),a={HEX_COLOR_RE_:/^#(?:[0-9a-f]{3,4}){1,2}$/i,NAMED_COLOR_RE_:/^([a-z]*)$/i,asArray:function(t){return Array.isArray(t)?t:a.fromString(t)},asString:function(t){return"string"==typeof t?t:a.toString(t)},fromNamed:function(t){var e=document.createElement("div");e.style.color=t,document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}};a.fromString=function(){var t={},e=0;return function(i){var n;if(t.hasOwnProperty(i))n=t[i];else{if(e>=1024){var r,o=0;for(r in t)0==(3&o++)&&(delete t[r],--e)}n=a.fromStringInternal_(i),t[i]=n,++e}return n}}(),a.fromStringInternal_=function(t){var e,i,n,o,s,l;if(a.NAMED_COLOR_RE_.exec(t)&&(t=a.fromNamed(t)),a.HEX_COLOR_RE_.exec(t)){var u,d=t.length-1;u=4>=d?1:2;var f=4==d||8==d;e=parseInt(t.substr(1+0*u,u),16),i=parseInt(t.substr(1+1*u,u),16),n=parseInt(t.substr(1+2*u,u),16),o=f?parseInt(t.substr(1+3*u,u),16):255,1==u&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,f&&(o=(o<<4)+o)),s=[e,i,n,o/255]}else 0==t.indexOf("rgba(")?(l=t.slice(5,-1).split(",").map(Number),s=a.normalize(l)):0==t.indexOf("rgb(")?((l=t.slice(4,-1).split(",").map(Number)).push(1),s=a.normalize(l)):r.default.assert(!1,14);return s},a.normalize=function(t,e){var i=e||[];return i[0]=o.default.clamp(0|t[0]+.5,0,255),i[1]=o.default.clamp(0|t[1]+.5,0,255),i[2]=o.default.clamp(0|t[2]+.5,0,255),i[3]=o.default.clamp(t[3],0,1),i},a.toString=function(t){var e=t[0];e!=(0|e)&&(e=0|e+.5);var i=t[1];i!=(0|i)&&(i=0|i+.5);var n=t[2];return n!=(0|n)&&(n=0|n+.5),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"},e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(14)),r=function t(e,i){this.arr_=void 0===e?[]:e,this.usage_=void 0===i?t.Usage_.STATIC_DRAW:i};r.prototype.getArray=function(){return this.arr_},r.prototype.getUsage=function(){return this.usage_},r.Usage_={STATIC_DRAW:n.default.STATIC_DRAW,STREAM_DRAW:n.default.STREAM_DRAW,DYNAMIC_DRAW:n.default.DYNAMIC_DRAW},e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.sqrt,o=Math.PI;Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(0)),s=n(i(7)),l=n(i(1)),u=n(i(29)),d=n(i(12)),f=n(i(277)),c=n(i(28)),h=n(i(24)),p=n(i(76)),_=n(i(59)),g=n(i(58)),y=n(i(37)),v=n(i(36)),m=n(i(136)),E=n(i(77)),b=n(i(75)),C=n(i(47)),T=n(i(6)),x=function(t,e){h.default.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};a.default.inherits(x,h.default),x.prototype.appendLinearRing=function(t){this.flatCoordinates?s.default.extend(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},x.prototype.clone=function(){var t=new x(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},x.prototype.closestPointXY=function(t,e,i,n){return n<l.default.closestSquaredDistanceXY(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=r(_.default.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_.default.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},x.prototype.containsXY=function(t,e){return g.default.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},x.prototype.getArea=function(){return p.default.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},x.prototype.getCoordinates=function(t){var e;return void 0===t?e=this.flatCoordinates:(e=this.getOrientedFlatCoordinates().slice(),b.default.orientLinearRings(e,0,this.ends_,this.stride,t)),v.default.coordinatess(e,0,this.ends_,this.stride)},x.prototype.getEnds=function(){return this.ends_},x.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=l.default.getCenter(this.getExtent());this.flatInteriorPoint_=m.default.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},x.prototype.getInteriorPoint=function(){return new c.default(this.getFlatInteriorPoint(),u.default.XYM)},x.prototype.getLinearRingCount=function(){return this.ends_.length},x.prototype.getLinearRing=function(t){if(0>t||this.ends_.length<=t)return null;var e=new f.default(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},x.prototype.getLinearRings=function(){var t,e,i=this.layout,n=this.flatCoordinates,r=this.ends_,o=[],a=0;for(t=0,e=r.length;t<e;++t){var s=r[t],l=new f.default(null);l.setFlatCoordinates(i,n.slice(a,s)),o.push(l),a=s}return o},x.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;b.default.linearRingsAreOriented(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=b.default.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},x.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=C.default.quantizes(this.flatCoordinates,0,this.ends_,this.stride,r(t),e,0,i);var n=new x(null);return n.setFlatCoordinates(u.default.XY,e,i),n},x.prototype.getType=function(){return d.default.POLYGON},x.prototype.intersectsExtent=function(t){return E.default.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},x.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=y.default.coordinatess(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(u.default.XY,null,this.ends_)},x.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.ends_=i,this.changed()},x.circular=function(t,e,i,n){var r,a=n||32,l=[];for(r=0;r<a;++r)s.default.extend(l,t.offset(e,i,2*o*r/a));l.push(l[0],l[1]);var d=new x(null);return d.setFlatCoordinates(u.default.XY,l,[l.length]),d},x.fromExtent=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=[e,i,e,r,n,r,n,i,e,i],a=new x(null);return a.setFlatCoordinates(u.default.XY,o,[o.length]),a},x.fromCircle=function(t,e,i){for(var n=e||32,r=t.getStride(),o=t.getLayout(),a=new x(null,o),s=r*(n+1),l=Array(s),u=0;u<s;u++)l[u]=0;var d=[l.length];return a.setFlatCoordinates(o,l,d),x.makeRegular(a,t.getCenter(),t.getRadius(),i),a},x.makeRegular=function(t,e,i,n){for(var r,a,s=t.getFlatCoordinates(),l=t.getLayout(),u=t.getStride(),d=t.getEnds(),f=s.length/u-1,c=n||0,h=0;h<=f;++h)a=h*u,r=c+2*T.default.modulo(h,f)*o/f,s[a]=e[0]+i*Math.cos(r),s[a+1]=e[1]+i*Math.sin(r);t.setFlatCoordinates(l,s,d)},e.default=x},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={coordinates:function(t,e,i,n,r){var o,a=void 0===r?[]:r,s=0;for(o=e;o<i;o+=n)a[s++]=t.slice(o,o+n);return a.length=s,a},coordinatess:function(t,e,n,r,o){var a,s,l=void 0===o?[]:o,u=0;for(a=0,s=n.length;a<s;++a){var d=n[a];l[u++]=i.coordinates(t,e,d,r,l[u]),e=d}return l.length=u,l},coordinatesss:function(t,e,n,r,o){var a,s,l=void 0===o?[]:o,u=0;for(a=0,s=n.length;a<s;++a){var d=n[a];l[u++]=i.coordinatess(t,e,d,r,l[u]),e=d[d.length-1]}return l.length=u,l}};e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={coordinate:function(t,e,i){var n,r;for(n=0,r=i.length;n<r;++n)t[e++]=i[n];return e},coordinates:function(t,e,i,n){var r,o;for(r=0,o=i.length;r<o;++r){var a,s=i[r];for(a=0;a<n;++a)t[e++]=s[a]}return e},coordinatess:function(t,e,n,r,o){var a,s,l=o||[],u=0;for(a=0,s=n.length;a<s;++a){var d=i.coordinates(t,e,n[a],r);l[u++]=d,e=d}return l.length=u,l},coordinatesss:function(t,e,n,r,o){var a,s,l=o||[],u=0;for(a=0,s=n.length;a<s;++a){var d=i.coordinatess(t,e,n[a],r,l[u]);l[u++]=d,e=d[d.length-1]}return l.length=u,l}};e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n(i(9)),n(i(81))),s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.geocoder=t.geocoder,i.projection=t.projection||"EPSG:3857",i.hookupEvents(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"metersPerUnit",value:function(){return proj4.defs[this.projection].to_meter}},{key:"accuracyDistance",value:function(t){return"EPSG:3857"===this.projection?t:t/this.metersPerUnit()}},{key:"search",value:function(t){this.geocoder.search(t)}},{key:"locate",value:function(){throw"Not implemented"}},{key:"track",value:function(){throw"Not implemented"}},{key:"proxyEvent",value:function(t){this.trigger(t.type,t)}},{key:"hookupEvents",value:function(){this.geocoder.on("geocoded",this.proxyEvent,this),this.geocoder.on("ambiguous",this.proxyEvent,this),this.geocoder.on("error",this.proxyEvent,this)}}]),e}();s.Options,s.Accuracy={HIGH:0,MEDIUM:50,LOW:500,ZIP_CODE:1e3},s.Result,s.Ambiguous,e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(84)),a=n(i(5)),s=n(i(22)),l=function(){o.default.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}};r.default.inherits(l,o.default),l.prototype.addEventListener=function(t,e){var i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},l.prototype.dispatchEvent=function(t){var e="string"==typeof t?new s.default(t):t,i=e.type;e.target=this;var n,o=this.listeners_[i];if(o){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var a=0,l=o.length;a<l;++a)if(!1===o[a].call(this,e)||e.propagationStopped){n=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var u=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];u--;)this.removeEventListener(i,r.default.nullFunction);delete this.dispatching_[i]}return n}},l.prototype.disposeInternal=function(){a.default.unlistenAll(this)},l.prototype.getListeners=function(t){return this.listeners_[t]},l.prototype.hasListener=function(t){return t?t in this.listeners_:0<Object.keys(this.listeners_).length},l.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var n=i.indexOf(e);t in this.pendingRemovals_?(i[n]=r.default.nullFunction,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t])}},e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={CLASS_HIDDEN:"ol-hidden",CLASS_SELECTABLE:"ol-selectable",CLASS_UNSELECTABLE:"ol-unselectable",CLASS_UNSUPPORTED:"ol-unsupported",CLASS_CONTROL:"ol-control"};i.getFontFamilies=function(){var t,e={};return function(i){if(t||(t=document.createElement("div").style),!(i in e)){t.font=i;var n=t.fontFamily;if(t.font="",!n)return null;e[i]=n.split(/,\s?/)}return e[i]}}(),e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(14)),a=n(i(113)),s=function(t){a.default.call(this,t)};r.default.inherits(s,a.default),s.prototype.getType=function(){return o.default.VERTEX_SHADER},e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(14)),a=n(i(113)),s=function(t){a.default.call(this,t)};r.default.inherits(s,a.default),s.prototype.getType=function(){return o.default.FRAGMENT_SHADER},e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(53)),r={};r.ORDER=[n.default.POLYGON,n.default.CIRCLE,n.default.LINE_STRING,n.default.IMAGE,n.default.TEXT,n.default.DEFAULT],r.TEXT_ALIGN={},r.TEXT_ALIGN.left=0,r.TEXT_ALIGN.end=0,r.TEXT_ALIGN.center=.5,r.TEXT_ALIGN.right=1,r.TEXT_ALIGN.start=1,r.TEXT_ALIGN.top=0,r.TEXT_ALIGN.middle=.5,r.TEXT_ALIGN.hanging=.2,r.TEXT_ALIGN.alphabetic=.8,r.TEXT_ALIGN.ideographic=.8,r.TEXT_ALIGN.bottom=1,e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(56)),o=n(i(11)),a=n(i(13)),s=n(i(19)),l={altKeyOnly:function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly:function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey}};l.always=a.default.TRUE,l.click=function(t){return t.type==r.default.CLICK},l.mouseActionButton=function(t){var e=t.originalEvent;return 0==e.button&&!(s.default.WEBKIT&&s.default.MAC&&e.ctrlKey)},l.never=a.default.FALSE,l.pointerMove=function(t){return"pointermove"==t.type},l.singleClick=function(t){return t.type==r.default.SINGLECLICK},l.doubleClick=function(t){return t.type==r.default.DBLCLICK},l.noModifierKeys=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},l.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(s.default.MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey},l.shiftKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},l.targetNotEditable=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},l.mouseOnly=function(t){return o.default.assert(t.pointerEvent,56),"mouse"==t.pointerEvent.pointerType},l.primaryAction=function(t){var e=t.pointerEvent;return e.isPrimary&&0===e.button},e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(5)),o=n(i(4)),a=n(i(0)),s=n(i(15)),l=n(i(133)),u=n(i(132)),d=n(i(3)),f=n(i(45)),c=n(i(34)),h=function(t){var e=d.default.assign({},t);delete e.source,l.default.call(this,e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,t.map&&this.setMap(t.map),r.default.listen(this,s.default.getChangeEventType(u.default.SOURCE),this.handleSourcePropertyChange_,this);var i=t.source?t.source:null;this.setSource(i)};a.default.inherits(h,l.default),h.visibleAtResolution=function(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution},h.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},h.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},h.prototype.getSource=function(){return this.get(u.default.SOURCE)||null},h.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():c.default.UNDEFINED},h.prototype.handleSourceChange_=function(){this.changed()},h.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(r.default.unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=r.default.listen(t,o.default.CHANGE,this.handleSourceChange_,this)),this.changed()},h.prototype.setMap=function(t){this.mapPrecomposeKey_&&(r.default.unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(r.default.unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=r.default.listen(t,f.default.PRECOMPOSE,function(t){var e=this.getLayerState();e.managed=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[a.default.getUid(this)]=e},this),this.mapRenderKey_=r.default.listen(this,o.default.CHANGE,t.render,t),this.changed())},h.prototype.setSource=function(t){this.set(u.default.SOURCE,t)},e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(6)),r={lineString:function(t,e,i,n,o,a,s){var l=void 0===s?[]:s;return a||(i=r.radialDistance(t,e,i,n,o,l,0),t=l,e=0,n=2),l.length=r.douglasPeucker(t,e,i,n,o,l,0),l},douglasPeucker:function(t,e,i,r,o,a,s){var l=(i-e)/r;if(3>l){for(;e<i;e+=r)a[s++]=t[e],a[s++]=t[e+1];return s}var u=Array(l);u[0]=1,u[l-1]=1;for(var d,f=[e,i-r],c=0;0<f.length;){var h=f.pop(),p=f.pop(),_=0,g=t[p],y=t[p+1],v=t[h],m=t[h+1];for(d=p+r;d<h;d+=r){var E=t[d],b=t[d+1],C=n.default.squaredSegmentDistance(E,b,g,y,v,m);C>_&&(c=d,_=C)}_>o&&(u[(c-e)/r]=1,p+r<c&&f.push(p,c),c+r<h&&f.push(c,h))}for(d=0;d<l;++d)u[d]&&(a[s++]=t[e+d*r],a[s++]=t[e+d*r+1]);return s},douglasPeuckers:function(t,e,i,n,o,a,s,l){var u,d;for(u=0,d=i.length;u<d;++u){var f=i[u];s=r.douglasPeucker(t,e,f,n,o,a,s),l.push(s),e=f}return s},douglasPeuckerss:function(t,e,i,n,o,a,s,l){var u,d;for(u=0,d=i.length;u<d;++u){var f=i[u],c=[];s=r.douglasPeuckers(t,e,f,n,o,a,s,c),l.push(c),e=f[f.length-1]}return s},radialDistance:function(t,e,i,r,o,a,s){if(i<=e+r){for(;e<i;e+=r)a[s++]=t[e],a[s++]=t[e+1];return s}var l=t[e],u=t[e+1];a[s++]=l,a[s++]=u;var d=l,f=u;for(e+=r;e<i;e+=r)d=t[e],f=t[e+1],n.default.squaredDistance(l,u,d,f)>o&&(a[s++]=d,a[s++]=f,l=d,u=f);return(d!=l||f!=u)&&(a[s++]=d,a[s++]=f),s},snap:function(t,e){return e*Math.round(t/e)},quantize:function(t,e,i,n,o,a,s){if(e==i)return s;var l,u,d=r.snap(t[e],o),f=r.snap(t[e+1],o);e+=n,a[s++]=d,a[s++]=f;do{if(l=r.snap(t[e],o),u=r.snap(t[e+1],o),(e+=n)==i)return a[s++]=l,a[s++]=u,s}while(l==d&&u==f);for(;e<i;){var c,h;if(c=r.snap(t[e],o),h=r.snap(t[e+1],o),e+=n,c!=l||h!=u){var p=l-d,_=u-f,g=c-d,y=h-f;if(p*y==_*g&&(0>p&&g<p||p==g||0<p&&g>p)&&(0>_&&y<_||_==y||0<_&&y>_)){l=c,u=h;continue}a[s++]=l,a[s++]=u,d=l,f=u,l=c,u=h}}return a[s++]=l,a[s++]=u,s},quantizes:function(t,e,i,n,o,a,s,l){var u,d;for(u=0,d=i.length;u<d;++u){var f=i[u];s=r.quantize(t,e,f,n,o,a,s),l.push(s),e=f}return s},quantizess:function(t,e,i,n,o,a,s,l){var u,d;for(u=0,d=i.length;u<d;++u){var f=i[u],c=[];s=r.quantizes(t,e,f,n,o,a,s,c),l.push(c),e=f[f.length-1]}return s}};e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(11)),o=n(i(5)),a=n(i(4)),s=n(i(0)),l=n(i(15)),u=n(i(79)),d=n(i(85)),f=function(t){l.default.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,o.default.listen(this,l.default.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),void 0!==t&&(t instanceof u.default||!t?this.setGeometry(t):this.setProperties(t))};s.default.inherits(f,l.default),f.prototype.clone=function(){var t=new f(this.getProperties());t.setGeometryName(this.getGeometryName());var e=this.getGeometry();e&&t.setGeometry(e.clone());var i=this.getStyle();return i&&t.setStyle(i),t},f.prototype.getGeometry=function(){return this.get(this.geometryName_)},f.prototype.getId=function(){return this.id_},f.prototype.getGeometryName=function(){return this.geometryName_},f.prototype.getStyle=function(){return this.style_},f.prototype.getStyleFunction=function(){return this.styleFunction_},f.prototype.handleGeometryChange_=function(){this.changed()},f.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(o.default.unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=o.default.listen(t,a.default.CHANGE,this.handleGeometryChange_,this)),this.changed()},f.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},f.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?f.createStyleFunction(t):void 0,this.changed()},f.prototype.setId=function(t){this.id_=t,this.changed()},f.prototype.setGeometryName=function(t){o.default.unlisten(this,l.default.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,o.default.listen(this,l.default.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},f.createStyleFunction=function(t){var e,i;"function"==typeof t?e=2==t.length?function(e){return t(this,e)}:t:(Array.isArray(t)?i=t:(r.default.assert(t instanceof d.default,41),i=[t]),e=function(){return i});return e},e.default=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={createOrUpdate:function(t,e,i,n){return void 0===n?[t,e,i]:(n[0]=t,n[1]=e,n[2]=i,n)},getKeyZXY:function(t,e,i){return t+"/"+e+"/"+i},getKey:function(t){return i.getKeyZXY(t[0],t[1],t[2])},fromKey:function(t){return t.split("/").map(Number)},hash:function(t){return(t[1]<<t[0])+t[2]},quadKey:function(t){var e,i,n=t[0],r=Array(n),o=1<<n-1;for(e=0;e<n;++e)i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),r[e]=String.fromCharCode(i),o>>=1;return r.join("")},withinExtentAndZ:function(t,e){var i=t[0],n=t[1],r=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var o,a=e.getExtent();return!(o=a?e.getTileRangeForExtentAndZ(a,i):e.getFullTileRange(i))||o.containsXY(n,r)}};e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.round;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(7)),s=n(i(63)),l=n(i(1)),u=n(i(151)),d=n(i(12)),f=n(i(36)),c=n(i(139)),h=n(i(227)),p=n(i(30)),_=n(i(19)),g=n(i(3)),y=n(i(68)),v=n(i(25)),m=n(i(51)),E=n(i(43)),b=n(i(10)),C=function(t,e,i,n,r,o){y.default.call(this),this.declutterTree=o,this.tmpExtent_=l.default.createEmpty(),this.tolerance=t,this.maxExtent=e,this.overlaps=r,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.fillOrigin_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=b.default.create(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0,this.tmpLocalTransform_=b.default.create(),this.resetTransform_=b.default.create()};o.default.inherits(C,y.default),C.prototype.replayTextBackground_=function(t,e,i,n,r,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.fillOrigin_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},C.prototype.replayImage_=function(t,e,i,n,o,a,s,u,d,f,c,h,p,_,g,y,m,E){var C=m||E,T=this.tmpLocalTransform_;e-=o*=p,i-=a*=p,_&&(e=r(e),i=r(i));var x,S,R,O,P=g+f>n.width?n.width-f:g,I=u+c>n.height?n.height-c:u,w=this.tmpExtent_,L=y[3]+P*p+y[1],A=y[0]+I*p+y[2],M=e-y[3],F=i-y[0];(C||0!==h)&&(x=[M,F],S=[M+L,F],R=[M+L,F+A],O=[M,F+A]);var D=null;if(0!==h){var N=e+o,k=i+a;D=b.default.compose(T,N,k,1,1,h,-N,-k),l.default.createOrUpdateEmpty(w),l.default.extendCoordinate(w,b.default.apply(T,x)),l.default.extendCoordinate(w,b.default.apply(T,S)),l.default.extendCoordinate(w,b.default.apply(T,R)),l.default.extendCoordinate(w,b.default.apply(T,O))}else l.default.createOrUpdate(M,F,M+L,F+A,w);var G=t.canvas,j=w[0]<=G.width&&0<=w[2]&&w[1]<=G.height&&0<=w[3];if(s){if(!j&&1==s[4])return;l.default.extend(s,w);var U=j?[t,D?D.slice(0):null,d,n,f,c,P,I,e,i,p]:null;U&&C&&U.push(m,E,x,S,R,O),s.push(U)}else j&&(C&&this.replayTextBackground_(t,x,S,R,O,m,E),v.default.drawImage(t,D,d,n,f,c,P,I,e,i,p))},C.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},C.prototype.appendFlatCoordinates=function(t,e,i,n,r,o){var a=this.coordinates.length,s=this.getBufferedMaxExtent();o&&(e+=n);var d,f,c,h=[t[e],t[e+1]],p=[NaN,NaN],_=!0;for(d=e+n;d<i;d+=n)p[0]=t[d],p[1]=t[d+1],(c=l.default.coordinateRelationship(s,p))===f?c===u.default.INTERSECTING?(this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],_=!1):_=!0:(_&&(this.coordinates[a++]=h[0],this.coordinates[a++]=h[1]),this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],_=!1),h[0]=p[0],h[1]=p[1],f=c;return(r&&_||d===e+n)&&(this.coordinates[a++]=h[0],this.coordinates[a++]=h[1]),a},C.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o],l=this.appendFlatCoordinates(t,e,s,n,!1,!1);r.push(l),e=s}return e},C.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,r,o,a,s,l=t.getType(),u=t.getStride(),c=this.coordinates.length;if(l==d.default.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),a=[];var h=t.getEndss();s=0;for(var p,_=0,g=h.length;_<g;++_)p=[],s=this.drawCustomCoordinates_(n,s,h[_],u,p),a.push(p);this.instructions.push([m.default.CUSTOM,c,a,t,i,f.default.coordinatesss])}else l==d.default.POLYGON||l==d.default.MULTI_LINE_STRING?(o=[],n=l==d.default.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(n,0,t.getEnds(),u,o),this.instructions.push([m.default.CUSTOM,c,o,t,i,f.default.coordinatess])):l==d.default.LINE_STRING||l==d.default.MULTI_POINT?(n=t.getFlatCoordinates(),r=this.appendFlatCoordinates(n,0,n.length,u,!1,!1),this.instructions.push([m.default.CUSTOM,c,r,t,i,f.default.coordinates])):l==d.default.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),r=this.coordinates.length,this.instructions.push([m.default.CUSTOM,c,r,t,i]));this.endGeometry(t,e)},C.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[m.default.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[m.default.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},C.prototype.fill_=function(t){if(this.fillOrigin_){var e=b.default.apply(this.renderedTransform_,this.fillOrigin_.slice());t.translate(e[0],e[1]),t.rotate(this.viewRotation_)}t.fill(),this.fillOrigin_&&t.setTransform.apply(t,v.default.resetTransform_)},C.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],_.default.CANVAS_LINE_DASH&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},C.prototype.renderDeclutter_=function(t,e){if(t&&5<t.length){var i=t[4];if(1==i||i==t.length-5){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(n)){this.declutterTree.insert(n);for(var r,o=v.default.drawImage,a=5,s=t.length;a<s;++a)(r=t[a])&&(11<r.length&&this.replayTextBackground_(r[0],r[13],r[14],r[15],r[16],r[11],r[12]),o.apply(void 0,r))}t.length=5,l.default.createOrUpdateEmpty(t)}}},C.prototype.replay_=function(t,e,i,n,r,s){var u;this.pixelCoordinates_&&a.default.equals(e,this.renderedTransform_)?u=this.pixelCoordinates_:(!this.pixelCoordinates_&&(this.pixelCoordinates_=[]),u=p.default.transform2D(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),b.default.setFromArray(this.renderedTransform_,e));for(var d,f,_,y,C,T,x,S,R,O=!g.default.isEmpty(i),P=0,I=n.length,w=0,L=0,A=0,M=null,F=null,D=this.coordinateCache_,N=this.viewRotation_,k={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},G=this.instructions!=n||this.overlaps?0:200;P<I;){var j,U,B,W=n[P];switch(W[0]){case m.default.BEGIN_GEOMETRY:j=W[1],O&&i[o.default.getUid(j).toString()]||!j.getGeometry()?P=W[2]:void 0===s||l.default.intersects(s,j.getGeometry().getExtent())?++P:P=W[2]+1;break;case m.default.BEGIN_PATH:L>G&&(this.fill_(t),L=0),A>G&&(t.stroke(),A=0),L||A||(t.beginPath(),y=C=NaN),++P;break;case m.default.CIRCLE:var z=u[w=W[1]],X=u[w+1],Y=u[w+2]-z,H=u[w+3]-X,V=Math.sqrt(Y*Y+H*H);t.moveTo(z+V,X),t.arc(z,X,V,0,2*Math.PI,!0),++P;break;case m.default.CLOSE_PATH:t.closePath(),++P;break;case m.default.CUSTOM:w=W[1],d=W[2];var K=W[3],Z=W[4],q=6==W.length?W[5]:void 0;k.geometry=K,k.feature=j,P in D||(D[P]=[]);var J=D[P];q?q(u,w,d,2,J):(J[0]=u[w],J[1]=u[w+1],J.length=2),Z(J,k),++P;break;case m.default.DRAW_IMAGE:w=W[1],d=W[2],R=W[3],f=W[4],_=W[5],S=r?null:W[6];var Q,$,tt,et=W[7],it=W[8],nt=W[9],rt=W[10],ot=W[11],at=W[12],st=W[13],lt=W[14],ut=W[15];for(16<W.length?(Q=W[16],$=W[17],tt=W[18]):(Q=v.default.defaultPadding,$=tt=!1),ot&&(at+=N);w<d;w+=2)this.replayImage_(t,u[w],u[w+1],R,f,_,S,et,it,nt,rt,at,st,lt,ut,Q,$?M:null,tt?F:null);this.renderDeclutter_(S,j),++P;break;case m.default.DRAW_CHARS:var dt=W[1],ft=W[2],ct=W[3];S=r?null:W[4];var ht=W[5],pt=W[6],_t=W[7],gt=W[8],yt=W[9],vt=W[10],mt=W[11],Et=W[12],bt=W[13],Ct=W[14],Tt=c.default.lineString(u,dt,ft,2),xt=gt(Et);if(ht||xt<=Tt){var St=this.textStates[bt].textAlign,Rt=(Tt-xt)*E.default.TEXT_ALIGN[St],Ot=h.default.lineString(u,dt,ft,2,Et,gt,Rt,_t);if(Ot){var Pt,It,wt,Lt,At;if(vt)for(Pt=0,It=Ot.length;Pt<It;++Pt)wt=(At=Ot[Pt])[4],Lt=this.getImage(wt,bt,"",vt),f=At[2]+mt,_=ct*Lt.height+2*(.5-ct)*mt-yt,this.replayImage_(t,At[0],At[1],Lt,f,_,S,Lt.height,1,0,0,At[3],Ct,!1,Lt.width,v.default.defaultPadding,null,null);if(pt)for(Pt=0,It=Ot.length;Pt<It;++Pt)wt=(At=Ot[Pt])[4],Lt=this.getImage(wt,bt,pt,""),f=At[2],_=ct*Lt.height-yt,this.replayImage_(t,At[0],At[1],Lt,f,_,S,Lt.height,1,0,0,At[3],Ct,!1,Lt.width,v.default.defaultPadding,null,null)}}this.renderDeclutter_(S,j),++P;break;case m.default.END_GEOMETRY:if(void 0!==r){var Mt=r(j=W[1]);if(Mt)return Mt}++P;break;case m.default.FILL:G?L++:this.fill_(t),++P;break;case m.default.MOVE_TO_LINE_TO:for(w=W[1],d=W[2],U=u[w],x=0|(B=u[w+1])+.5,((T=0|U+.5)!==y||x!==C)&&(t.moveTo(U,B),y=T,C=x),w+=2;w<d;w+=2)T=0|(U=u[w])+.5,x=0|(B=u[w+1])+.5,(w==d-2||T!==y||x!==C)&&(t.lineTo(U,B),y=T,C=x);++P;break;case m.default.SET_FILL_STYLE:M=W,this.fillOrigin_=W[2],L&&(this.fill_(t),L=0,A&&(t.stroke(),A=0)),t.fillStyle=W[1],++P;break;case m.default.SET_STROKE_STYLE:F=W,A&&(t.stroke(),A=0),this.setStrokeStyle_(t,W),++P;break;case m.default.STROKE:G?A++:t.stroke(),++P;break;default:++P}}return L&&this.fill_(t),void(A&&t.stroke())},C.prototype.replay=function(t,e,i,n){this.viewRotation_=i,this.replay_(t,e,n,this.instructions,void 0,void 0)},C.prototype.replayHitDetection=function(t,e,i,n,r,o){return this.viewRotation_=i,this.replay_(t,e,n,this.hitDetectionInstructions,r,o)},C.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var e,i,n,r=t.length,o=-1;for(e=0;e<r;++e)(n=(i=t[e])[0])==m.default.END_GEOMETRY?o=e:n==m.default.BEGIN_GEOMETRY&&(i[2]=e,a.default.reverseSubArray(this.hitDetectionInstructions,o,e),o=-1)},C.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=s.default.asColorLike(n||v.default.defaultFillStyle)}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=s.default.asColorLike(r||v.default.defaultStrokeStyle);var o=e.getLineCap();i.lineCap=void 0===o?v.default.defaultLineCap:o;var a=e.getLineDash();i.lineDash=a?a.slice():v.default.defaultLineDash;var l=e.getLineDashOffset();i.lineDashOffset=l||v.default.defaultLineDashOffset;var u=e.getLineJoin();i.lineJoin=void 0===u?v.default.defaultLineJoin:u;var d=e.getWidth();i.lineWidth=void 0===d?v.default.defaultLineWidth:d;var f=e.getMiterLimit();i.miterLimit=void 0===f?v.default.defaultMiterLimit:f,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},C.prototype.applyFill=function(t,e){var i=t.fillStyle,n=[m.default.SET_FILL_STYLE,i];if("string"!=typeof i){var r=e.getExtent();n.push([r[0],r[3]])}this.instructions.push(n)},C.prototype.applyStroke=function(t){this.instructions.push([m.default.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio])},C.prototype.updateFillStyle=function(t,e,i){var n=t.fillStyle;("string"!=typeof n||t.currentFillStyle!=n)&&(e.call(this,t,i),t.currentFillStyle=n)},C.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,l=t.lineWidth,u=t.miterLimit;t.currentStrokeStyle==i&&t.currentLineCap==n&&(r==t.currentLineDash||a.default.equals(t.currentLineDash,r))&&t.currentLineDashOffset==o&&t.currentLineJoin==s&&t.currentLineWidth==l&&t.currentMiterLimit==u||(e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=l,t.currentMiterLimit=u)},C.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[m.default.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},C.prototype.finish=o.default.nullFunction,C.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=l.default.clone(this.maxExtent),0<this.maxLineWidth)){var t=this.resolution*(this.maxLineWidth+1)/2;l.default.buffer(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e.default=C},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(13)),a=n(i(56)),s=n(i(128)),l=n(i(26)),u=n(i(3)),d=function t(e){var i=e||{},n=i.handleEvent?i.handleEvent:t.handleEvent;l.default.call(this,{handleEvent:n}),this.handleDownEvent_=i.handleDownEvent?i.handleDownEvent:t.handleDownEvent,this.handleDragEvent_=i.handleDragEvent?i.handleDragEvent:t.handleDragEvent,this.handleMoveEvent_=i.handleMoveEvent?i.handleMoveEvent:t.handleMoveEvent,this.handleUpEvent_=i.handleUpEvent?i.handleUpEvent:t.handleUpEvent,this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]};r.default.inherits(d,l.default),d.centroid=function(t){for(var e=t.length,i=0,n=0,r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return[i/e,n/e]},d.prototype.isPointerDraggingEvent_=function(t){var e=t.type;return e===a.default.POINTERDOWN||e===a.default.POINTERDRAG||e===a.default.POINTERUP},d.prototype.updateTrackedPointers_=function(t){if(this.isPointerDraggingEvent_(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==a.default.POINTERUP?delete this.trackedPointers_[i]:t.type==a.default.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=u.default.getValues(this.trackedPointers_)}},d.handleDragEvent=r.default.nullFunction,d.handleUpEvent=o.default.FALSE,d.handleDownEvent=o.default.FALSE,d.handleMoveEvent=r.default.nullFunction,d.handleEvent=function(t){if(!(t instanceof s.default))return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==a.default.POINTERDRAG)this.handleDragEvent_(t);else if(t.type==a.default.POINTERUP){var i=this.handleUpEvent_(t);this.handlingDownUpSequence=i&&0<this.targetPointers.length}}else if(t.type==a.default.POINTERDOWN){var n=this.handleDownEvent_(t);this.handlingDownUpSequence=n,e=this.shouldStopEvent(n)}else t.type==a.default.POINTERMOVE&&this.handleMoveEvent_(t);return!e},d.prototype.shouldStopEvent=function(t){return t},e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.floor,o=Math.sqrt;Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(6)),s=n(i(253)),l={add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t},closestOnCircle:function(t,e){var i=e.getRadius(),n=e.getCenter(),r=n[0],a=n[1],s=t[0]-r,l=t[1]-a;0==s&&0==l&&(s=1);var u=o(s*s+l*l);return[r+i*s/u,a+i*l/u]},closestOnSegment:function(t,e){var i,n,r=t[0],o=t[1],a=e[0],s=e[1],l=a[0],u=a[1],d=s[0],f=s[1],c=d-l,h=f-u,p=0===c&&0===h?0:(c*(r-l)+h*(o-u))/(c*c+h*h||0);return 0>=p?(i=l,n=u):1<=p?(i=d,n=f):(i=l+p*c,n=u+p*h),[i,n]},createStringXY:function(t){return function(e){return l.toStringXY(e,t)}},degreesToStringHDMS:function(t,e,i){var n=a.default.modulo(e+180,360)-180,o=Math.abs(3600*n),l=i||0,u=Math.pow(10,l),d=r(o/3600),f=r((o-3600*d)/60),c=o-3600*d-60*f;return 60<=(c=Math.ceil(c*u)/u)&&(c=0,f+=1),60<=f&&(f=0,d+=1),d+" "+s.default.padNumber(f,2)+" "+s.default.padNumber(c,2,l)+""+(0==n?"":" "+t.charAt(0>n?1:0))},format:function(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""},equals:function(t,e){for(var i=!0,n=t.length-1;0<=n;--n)if(t[n]!=e[n]){i=!1;break}return i},rotate:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n;return t[0]=r,t[1]=o,t},scale:function(t,e){return t[0]*=e,t[1]*=e,t},sub:function(t,e){return t[0]-=e[0],t[1]-=e[1],t},squaredDistance:function(t,e){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n},distance:function(t,e){return o(l.squaredDistance(t,e))},squaredDistanceToSegment:function(t,e){return l.squaredDistance(t,l.closestOnSegment(t,e))},toStringHDMS:function(t,e){return t?l.degreesToStringHDMS("NS",t[1],e)+" "+l.degreesToStringHDMS("EW",t[0],e):""},toStringXY:function(t,e){return l.format(t,"{x}, {y}",e)}};e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(4)),r={SINGLECLICK:"singleclick",CLICK:n.default.CLICK,DBLCLICK:n.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(158)),a=n(i(73)),s=n(i(15)),l=n(i(22)),u=function(t,e){if(s.default.call(this),this.unique_=!!(e||{}).unique,this.array_=t||[],this.unique_)for(var i=0,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()};r.default.inherits(u,s.default),u.prototype.clear=function(){for(;0<this.getLength();)this.pop()},u.prototype.extend=function(t){var e,i;for(e=0,i=t.length;e<i;++e)this.push(t[e]);return this},u.prototype.forEach=function(t,e){for(var i=e?t.bind(e):t,n=this.array_,r=0,o=n.length;r<o;++r)i(n[r],r,n)},u.prototype.getArray=function(){return this.array_},u.prototype.item=function(t){return this.array_[t]},u.prototype.getLength=function(){return this.get(u.Property_.LENGTH)},u.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new u.Event(a.default.ADD,e))},u.prototype.pop=function(){return this.removeAt(this.getLength()-1)},u.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},u.prototype.remove=function(t){var e,i,n=this.array_;for(e=0,i=n.length;e<i;++e)if(n[e]===t)return this.removeAt(e)},u.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new u.Event(a.default.REMOVE,e)),e},u.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new u.Event(a.default.REMOVE,n)),this.dispatchEvent(new u.Event(a.default.ADD,e))}else{var r;for(r=i;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},u.prototype.updateLength_=function(){this.set(u.Property_.LENGTH,this.array_.length)},u.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new o.default(58)},u.Property_={LENGTH:"length"},u.Event=function(t,e){l.default.call(this,t),this.element=e},r.default.inherits(u.Event,l.default),e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(1)),r={linearRingContainsExtent:function(t,e,i,o,a){return!n.default.forEachCorner(a,function(n){return!r.linearRingContainsXY(t,e,i,o,n[0],n[1])})},linearRingContainsXY:function(t,e,i,n,r,o){for(var a=0,s=t[i-n],l=t[i-n+1];e<i;e+=n){var u=t[e],d=t[e+1];l<=o?d>o&&0<(u-s)*(o-l)-(r-s)*(d-l)&&a++:d<=o&&0>(u-s)*(o-l)-(r-s)*(d-l)&&a--,s=u,l=d}return 0!=a},linearRingsContainsXY:function(t,e,i,n,o,a){if(0===i.length)return!1;if(!r.linearRingContainsXY(t,e,i[0],n,o,a))return!1;var s,l;for(s=1,l=i.length;s<l;++s)if(r.linearRingContainsXY(t,i[s-1],i[s],n,o,a))return!1;return!0},linearRingssContainsXY:function(t,e,i,n,o,a){if(0===i.length)return!1;var s,l;for(s=0,l=i.length;s<l;++s){var u=i[s];if(r.linearRingsContainsXY(t,e,u,n,o,a))return!0;e=u[u.length-1]}return!1}};e.default=r},function(t,e,i){"use strict";var n=Math.sqrt;Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(i(6)),o={point:function(t,e,i,n,o,a,s){var l,u,d=t[e],f=t[e+1],c=t[i]-d,h=t[i+1]-f;if(0==c&&0==h)u=e;else{var p=((o-d)*c+(a-f)*h)/(c*c+h*h);if(1<p)u=i;else{if(0<p){for(l=0;l<n;++l)s[l]=r.default.lerp(t[e+l],t[i+l],p);return void(s.length=n)}u=e}}for(l=0;l<n;++l)s[l]=t[u+l];s.length=n},getMaxSquaredDelta:function(t,e,i,n,o){var a=t[e],s=t[e+1];for(e+=n;e<i;e+=n){var l=t[e],u=t[e+1],d=r.default.squaredDistance(a,s,l,u);d>o&&(o=d),a=l,s=u}return o},getsMaxSquaredDelta:function(t,e,i,n,r){var a,s;for(a=0,s=i.length;a<s;++a){var l=i[a];r=o.getMaxSquaredDelta(t,e,l,n,r),e=l}return r},getssMaxSquaredDelta:function(t,e,i,n,r){var a,s;for(a=0,s=i.length;a<s;++a){var l=i[a];r=o.getsMaxSquaredDelta(t,e,l,n,r),e=l[l.length-1]}return r},getClosestPoint:function(t,e,i,a,s,l,u,d,f,c,h){if(e==i)return c;var p,_;if(0===s){if((_=r.default.squaredDistance(u,d,t[e],t[e+1]))<c){for(p=0;p<a;++p)f[p]=t[e+p];return f.length=a,_}return c}for(var g=h||[NaN,NaN],y=e+a;y<i;)if(o.point(t,y-a,y,a,u,d,g),(_=r.default.squaredDistance(u,d,g[0],g[1]))<c){for(c=_,p=0;p<a;++p)f[p]=g[p];f.length=a,y+=a}else y+=a*Math.max(0|(n(_)-n(c))/s,1);if(l&&(o.point(t,i-a,e,a,u,d,g),(_=r.default.squaredDistance(u,d,g[0],g[1]))<c)){for(c=_,p=0;p<a;++p)f[p]=g[p];f.length=a}return c},getsClosestPoint:function(t,e,i,n,r,a,s,l,u,d,f){var c,h,p=f||[NaN,NaN];for(c=0,h=i.length;c<h;++c){var _=i[c];d=o.getClosestPoint(t,e,_,n,r,a,s,l,u,d,p),e=_}return d},getssClosestPoint:function(t,e,i,n,r,a,s,l,u,d,f){var c,h,p=f||[NaN,NaN];for(c=0,h=i.length;c<h;++c){var _=i[c];d=o.getsClosestPoint(t,e,_,n,r,a,s,l,u,d,p),e=_[_.length-1]}return d}};e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(79)),o=n(i(3)),a=n(i(16)),s=function(){this.defaultDataProjection=null,this.defaultFeatureProjection=null};s.prototype.getReadOptions=function(t,e){var i;return e&&(i={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(i)},s.prototype.adaptOptions=function(t){return o.default.assign({dataProjection:this.defaultDataProjection,featureProjection:this.defaultFeatureProjection},t)},s.prototype.getLastExtent=function(){return null},s.prototype.getType=function(){},s.prototype.readFeature=function(){},s.prototype.readFeatures=function(){},s.prototype.readGeometry=function(){},s.prototype.readProjection=function(){},s.prototype.writeFeature=function(){},s.prototype.writeFeatures=function(){},s.prototype.writeGeometry=function(){},s.transformWithOptions=function(t,e,i){var n,o=i?a.default.get(i.featureProjection):null,s=i?a.default.get(i.dataProjection):null;if(n=o&&s&&!a.default.equivalent(o,s)?t instanceof r.default?(e?t.clone():t).transform(e?o:s,e?s:o):a.default.transformExtent(t,s,o):t,e&&i&&void 0!==i.decimals){var l=Math.pow(10,i.decimals);n===t&&(n=n.clone()),n.applyTransform(function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*l)/l;return t})}return n},e.default=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={buffer:function(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i},hasArea:function(t){return 0<t[0]&&0<t[1]},scale:function(t,e,i){return void 0===i&&(i=[0,0]),i[0]=0|t[0]*e+.5,i[1]=0|t[1]*e+.5,i},toSize:function(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}};e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(61)),a=n(i(1)),s=n(i(152)),l=n(i(3)),u=n(i(16)),d=n(i(31)),f=n(i(288)),c={getForProjection:function(t){var e=t.getDefaultTileGrid();return e||(e=c.createForProjection(t),t.setDefaultTileGrid(e)),e},wrapX:function(t,e,i){var n=e[0],r=t.getTileCoordCenter(e),o=c.extentFromProjection(i);if(!a.default.containsCoordinate(o,r)){var s=a.default.getWidth(o),l=Math.ceil((o[0]-r[0])/s);return r[0]+=s*l,t.getTileCoordForCoordAndZ(r,n)}return e},createForExtent:function(t,e,i,n){var r=void 0===n?s.default.TOP_LEFT:n,o=c.resolutionsFromExtent(t,e,i);return new f.default({extent:t,origin:a.default.getCorner(t,r),resolutions:o,tileSize:i})},createXYZ:function(t){var e={};return l.default.assign(e,void 0===t?{}:t),void 0===e.extent&&(e.extent=u.default.get("EPSG:3857").getExtent()),e.resolutions=c.resolutionsFromExtent(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new f.default(e)},resolutionsFromExtent:function(t,e,i){for(var n=void 0===e?r.default.DEFAULT_MAX_ZOOM:e,s=a.default.getHeight(t),l=a.default.getWidth(t),u=o.default.toSize(void 0===i?r.default.DEFAULT_TILE_SIZE:i),d=Math.max(l/u[0],s/u[1]),f=n+1,c=Array(f),h=0;h<f;++h)c[h]=d/Math.pow(2,h);return c},createForProjection:function(t,e,i,n){var r=c.extentFromProjection(t);return c.createForExtent(r,e,i,n)},extentFromProjection:function(t){var e=(t=u.default.get(t)).getExtent();if(!e){var i=180*u.default.METERS_PER_UNIT[d.default.DEGREES]/t.getMetersPerUnit();e=a.default.createOrUpdate(-i,-i,i,i)}return e}};e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(32)),r={asColorLike:function(t){return r.isColorLike(t)?t:n.default.asString(t)},isColorLike:function(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient}};e.default=r},function(t){"use strict";var e,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":i(window))&&(e=window)}t.exports=e},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(84)),a=n(i(7)),s=n(i(5)),l=n(i(3)),u=n(i(14)),d=n(i(110)),f=function(t,e){this.canvas_=t,this.gl_=e,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=a.default.includes(r.default.WEBGL_EXTENSIONS,"OES_element_index_uint"),this.hasOESElementIndexUint&&e.getExtension("OES_element_index_uint"),s.default.listen(this.canvas_,d.default.LOST,this.handleWebGLContextLost,this),s.default.listen(this.canvas_,d.default.RESTORED,this.handleWebGLContextRestored,this)};r.default.inherits(f,o.default),f.prototype.bindBuffer=function(t,e){var i=this.getGL(),n=e.getArray(),o=r.default.getUid(e)+"";if(o in this.bufferCache_){var a=this.bufferCache_[o];i.bindBuffer(t,a.buffer)}else{var s,l=i.createBuffer();i.bindBuffer(t,l),t==u.default.ARRAY_BUFFER?s=new Float32Array(n):t==u.default.ELEMENT_ARRAY_BUFFER&&(s=this.hasOESElementIndexUint?new Uint32Array(n):new Uint16Array(n)),i.bufferData(t,s,e.getUsage()),this.bufferCache_[o]={buf:e,buffer:l}}},f.prototype.deleteBuffer=function(t){var e=this.getGL(),i=r.default.getUid(t)+"",n=this.bufferCache_[i];e.isContextLost()||e.deleteBuffer(n.buffer),delete this.bufferCache_[i]},f.prototype.disposeInternal=function(){s.default.unlistenAll(this.canvas_);var t=this.getGL();if(!t.isContextLost()){for(var e in this.bufferCache_)t.deleteBuffer(this.bufferCache_[e].buffer);for(e in this.programCache_)t.deleteProgram(this.programCache_[e]);for(e in this.shaderCache_)t.deleteShader(this.shaderCache_[e]);t.deleteFramebuffer(this.hitDetectionFramebuffer_),t.deleteRenderbuffer(this.hitDetectionRenderbuffer_),t.deleteTexture(this.hitDetectionTexture_)}},f.prototype.getCanvas=function(){return this.canvas_},f.prototype.getGL=function(){return this.gl_},f.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},f.prototype.getShader=function(t){var e=r.default.getUid(t)+"";if(e in this.shaderCache_)return this.shaderCache_[e];var i=this.getGL(),n=i.createShader(t.getType());return i.shaderSource(n,t.getSource()),i.compileShader(n),this.shaderCache_[e]=n,n},f.prototype.getProgram=function(t,e){var i=r.default.getUid(t)+"/"+r.default.getUid(e);if(i in this.programCache_)return this.programCache_[i];var n=this.getGL(),o=n.createProgram();return n.attachShader(o,this.getShader(t)),n.attachShader(o,this.getShader(e)),n.linkProgram(o),this.programCache_[i]=o,o},f.prototype.handleWebGLContextLost=function(){l.default.clear(this.bufferCache_),l.default.clear(this.shaderCache_),l.default.clear(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},f.prototype.handleWebGLContextRestored=function(){},f.prototype.initHitDetectionFramebuffer_=function(){var t=this.gl_,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var i=f.createEmptyTexture(t,1,1),n=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,n),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1,1),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,n),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=e,this.hitDetectionTexture_=i,this.hitDetectionRenderbuffer_=n},f.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,!0)},f.createTexture_=function(t,e,i){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(u.default.TEXTURE_2D,u.default.TEXTURE_WRAP_S,e),void 0!==i&&t.texParameteri(u.default.TEXTURE_2D,u.default.TEXTURE_WRAP_T,i),n},f.createEmptyTexture=function(t,e,i,n,r){var o=f.createTexture_(t,n,r);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),o},f.createTexture=function(t,e,i,n){var r=f.createTexture_(t,i,n);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),r},e.default=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={defaultFont:"10px sans-serif",defaultFillStyle:[0,0,0,1],defaultLineCap:"round",defaultLineDash:[],defaultLineDashOffset:0,defaultLineJoin:"round",defaultMiterLimit:10,defaultStrokeStyle:[0,0,0,1],defaultTextAlign:.5,defaultTextBaseline:.5,defaultLineWidth:1,triangleIsCounterClockwise:function(t,e,n,r,o,a){var s=(n-t)*(a-e)-(o-t)*(r-e);return s<=i.EPSILON&&s>=-i.EPSILON?void 0:0<s}};i.EPSILON=Number.EPSILON||2.220446049250313e-16,e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(1)),a=n(i(68)),s=n(i(10)),l=n(i(112)),u=n(i(14)),d=function(t,e){a.default.call(this),this.tolerance=t,this.maxExtent=e,this.origin=o.default.getCenter(e),this.projectionMatrix_=s.default.create(),this.offsetRotateMatrix_=s.default.create(),this.offsetScaleMatrix_=s.default.create(),this.tmpMat4_=l.default.create(),this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0};r.default.inherits(d,a.default),d.prototype.getDeleteResourcesFunction=function(){},d.prototype.finish=function(){},d.prototype.setUpProgram=function(){},d.prototype.shutDownProgram=function(){},d.prototype.drawReplay=function(){},d.prototype.drawHitDetectionReplayOneByOne=function(){},d.prototype.drawHitDetectionReplay=function(t,e,i,n,r,o){return r?this.drawHitDetectionReplayOneByOne(t,e,i,n,o):this.drawHitDetectionReplayAll(t,e,i,n)},d.prototype.drawHitDetectionReplayAll=function(t,e,i,n){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,i,!0);var r=n(null);return r||void 0},d.prototype.replay=function(t,e,i,n,r,o,a,d,f,c,h){var p,_,g,y,v,m,E,b,C=t.getGL();this.lineStringReplay&&(p=C.isEnabled(C.STENCIL_TEST),_=C.getParameter(C.STENCIL_FUNC),g=C.getParameter(C.STENCIL_VALUE_MASK),y=C.getParameter(C.STENCIL_REF),v=C.getParameter(C.STENCIL_WRITEMASK),m=C.getParameter(C.STENCIL_FAIL),E=C.getParameter(C.STENCIL_PASS_DEPTH_PASS),b=C.getParameter(C.STENCIL_PASS_DEPTH_FAIL),C.enable(C.STENCIL_TEST),C.clear(C.STENCIL_BUFFER_BIT),C.stencilMask(255),C.stencilFunc(C.ALWAYS,1,255),C.stencilOp(C.KEEP,C.KEEP,C.REPLACE),this.lineStringReplay.replay(t,e,i,n,r,o,a,d,f,c,h),C.stencilMask(0),C.stencilFunc(C.NOTEQUAL,1,255)),t.bindBuffer(u.default.ARRAY_BUFFER,this.verticesBuffer),t.bindBuffer(u.default.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);var T=this.setUpProgram(C,t,r,o),x=s.default.reset(this.projectionMatrix_);s.default.scale(x,2/(i*r[0]),2/(i*r[1])),s.default.rotate(x,-n),s.default.translate(x,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));var S=s.default.reset(this.offsetScaleMatrix_);s.default.scale(S,2/r[0],2/r[1]);var R,O=s.default.reset(this.offsetRotateMatrix_);return 0!==n&&s.default.rotate(O,-n),C.uniformMatrix4fv(T.u_projectionMatrix,!1,l.default.fromTransform(this.tmpMat4_,x)),C.uniformMatrix4fv(T.u_offsetScaleMatrix,!1,l.default.fromTransform(this.tmpMat4_,S)),C.uniformMatrix4fv(T.u_offsetRotateMatrix,!1,l.default.fromTransform(this.tmpMat4_,O)),C.uniform1f(T.u_opacity,a),void 0===f?this.drawReplay(C,t,d,!1):R=this.drawHitDetectionReplay(C,t,d,f,c,h),this.shutDownProgram(C,T),this.lineStringReplay&&(!p&&C.disable(C.STENCIL_TEST),C.clear(C.STENCIL_BUFFER_BIT),C.stencilFunc(_,y,g),C.stencilMask(v),C.stencilOp(m,b,E)),R},d.prototype.drawElements=function(t,e,i,n){var r=e.hasOESElementIndexUint?u.default.UNSIGNED_INT:u.default.UNSIGNED_SHORT,o=e.hasOESElementIndexUint?4:2;t.drawElements(u.default.TRIANGLES,n-i,r,i*o)},e.default=d},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){};i.prototype.drawCustom=function(){},i.prototype.drawGeometry=function(){},i.prototype.setStyle=function(){},i.prototype.drawCircle=function(){},i.prototype.drawFeature=function(){},i.prototype.drawGeometryCollection=function(){},i.prototype.drawLineString=function(){},i.prototype.drawMultiLineString=function(){},i.prototype.drawMultiPoint=function(){},i.prototype.drawMultiPolygon=function(){},i.prototype.drawPoint=function(){},i.prototype.drawPolygon=function(){},i.prototype.drawText=function(){},i.prototype.setFillStrokeStyle=function(){},i.prototype.setImageStyle=function(){},i.prototype.setTextStyle=function(){},e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(22)),a=function(t,e,i,n,r){o.default.call(this,t),this.vectorContext=e,this.frameState=i,this.context=n,this.glContext=r};r.default.inherits(a,o.default),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(124)),r={mapRendererPlugins_:[],getMapRendererPlugins:function(){return r.mapRendererPlugins_},layerRendererPlugins_:[],getLayerRendererPlugins:function(){return r.layerRendererPlugins_},register:function(t,e){switch(t){case n.default.MAP_RENDERER:r.mapRendererPlugins_.push(e);break;case n.default.LAYER_RENDERER:r.layerRendererPlugins_.push(e);break;default:throw new Error("Unsupported plugin type: "+t)}},registerMultiple:function(t,e){for(var i=0,n=e.length;i<n;++i)r.register(t,e[i])}};e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){this.dispatcher=t,this.mapping_=e};i.prototype.getEvents=function(){return Object.keys(this.mapping_)},i.prototype.getHandlerForEvent=function(t){return this.mapping_[t]},e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(23)),a=n(i(46)),s=n(i(131)),l=n(i(3)),u=n(i(85)),d=function(t){var e=t||{},i=l.default.assign({},e);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,a.default.call(this,i),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0===e.renderBuffer?100:e.renderBuffer,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,this.renderMode_=e.renderMode||s.default.VECTOR,this.type=o.default.VECTOR};r.default.inherits(d,a.default),d.prototype.getDeclutter=function(){return this.declutter_},d.prototype.setDeclutter=function(t){this.declutter_=t},d.prototype.getRenderBuffer=function(){return this.renderBuffer_},d.prototype.getRenderOrder=function(){return this.get(d.Property_.RENDER_ORDER)},d.prototype.getSource,d.prototype.getStyle=function(){return this.style_},d.prototype.getStyleFunction=function(){return this.styleFunction_},d.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},d.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},d.prototype.setRenderOrder=function(t){this.set(d.Property_.RENDER_ORDER,t)},d.prototype.setStyle=function(t){this.style_=void 0===t?u.default.defaultFunction:t,this.styleFunction_=null===t?void 0:u.default.createFunction(this.style_),this.changed()},d.prototype.getRenderMode=function(){return this.renderMode_},d.Property_={RENDER_ORDER:"renderOrder"},e.default=d},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={ADD:"add",REMOVE:"remove"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(57)),a=n(i(73)),s=n(i(80)),l=n(i(7)),u=n(i(11)),d=n(i(5)),f=n(i(22)),c=n(i(4)),h=n(i(1)),p=n(i(274)),_=n(i(13)),g=n(i(272)),y=n(i(3)),v=n(i(135)),m=n(i(34)),E=n(i(270)),b=n(i(134)),C=function(t){var e=t||{};v.default.call(this,{attributions:e.attributions,logo:e.logo,projection:void 0,state:m.default.READY,wrapX:!(void 0!==e.wrapX)||e.wrapX}),this.loader_=r.default.nullFunction,this.format_=e.format,this.overlaps_=!(void 0!=e.overlaps)||e.overlaps,this.url_=e.url,void 0===e.loader?void 0!==this.url_&&(u.default.assert(this.format_,7),this.loader_=p.default.xhr(this.url_,this.format_)):this.loader_=e.loader,this.strategy_=void 0===e.strategy?g.default.all:e.strategy;var i,n,a=!(void 0!==e.useSpatialIndex)||e.useSpatialIndex;this.featuresRtree_=a?new b.default:null,this.loadedExtentsRtree_=new b.default,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,e.features instanceof o.default?n=(i=e.features).getArray():Array.isArray(e.features)&&(n=e.features),a||void 0!==i||(i=new o.default(n)),void 0!==n&&this.addFeaturesInternal(n),void 0!==i&&this.bindFeaturesCollection_(i)};r.default.inherits(C,v.default),C.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},C.prototype.addFeatureInternal=function(t){var e=r.default.getUid(t).toString();if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new C.Event(E.default.ADDFEATURE,t))}},C.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[d.default.listen(e,c.default.CHANGE,this.handleFeatureChange_,this),d.default.listen(e,s.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]},C.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0===n?(u.default.assert(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e):n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e,i},C.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},C.prototype.addFeaturesInternal=function(t){var e,i,n,o,a=[],s=[],l=[];for(i=0,n=t.length;i<n;i++)o=t[i],e=r.default.getUid(o).toString(),this.addToIndex_(e,o)&&s.push(o);for(i=0,n=s.length;i<n;i++){o=s[i],e=r.default.getUid(o).toString(),this.setupChangeEvents_(e,o);var u=o.getGeometry();if(u){var d=u.getExtent();a.push(d),l.push(o)}else this.nullGeometryFeatures_[e]=o}for(this.featuresRtree_&&this.featuresRtree_.load(a,l),i=0,n=s.length;i<n;i++)this.dispatchEvent(new C.Event(E.default.ADDFEATURE,s[i]))},C.prototype.bindFeaturesCollection_=function(t){var e=!1;d.default.listen(this,E.default.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),d.default.listen(this,E.default.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),d.default.listen(t,a.default.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),d.default.listen(t,a.default.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},C.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(d.default.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var n=new C.Event(E.default.CLEAR);this.dispatchEvent(n),this.changed()},C.prototype.forEachFeature=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEach(t,e):this.featuresCollection_?this.featuresCollection_.forEach(t,e):void 0},C.prototype.forEachFeatureAtCoordinateDirect=function(t,e,i){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(n){return n.getGeometry().intersectsCoordinate(t)?e.call(i,n):void 0})},C.prototype.forEachFeatureInExtent=function(t,e,i){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e,i):this.featuresCollection_?this.featuresCollection_.forEach(e,i):void 0},C.prototype.forEachFeatureIntersectingExtent=function(t,e,i){return this.forEachFeatureInExtent(t,function(n){if(n.getGeometry().intersectsExtent(t)){var r=e.call(i,n);if(r)return r}})},C.prototype.getFeaturesCollection=function(){return this.featuresCollection_},C.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),!y.default.isEmpty(this.nullGeometryFeatures_)&&l.default.extend(t,y.default.getValues(this.nullGeometryFeatures_))),t},C.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},C.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},C.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],r=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],l=e||_.default.TRUE;return this.featuresRtree_.forEachInExtent(s,function(t){if(l(t)){var e=t.getGeometry(),u=a;if((a=e.closestPointXY(i,n,o,a))<u){r=t;var d=Math.sqrt(a);s[0]=i-d,s[1]=n-d,s[2]=i+d,s[3]=n+d}}}),r},C.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},C.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0===e?null:e},C.prototype.getFormat=function(){return this.format_},C.prototype.getOverlaps=function(){return this.overlaps_},C.prototype.getResolutions=function(){},C.prototype.getUrl=function(){return this.url_},C.prototype.handleFeatureChange_=function(t){var e=t.target,i=r.default.getUid(e).toString(),n=e.getGeometry();if(n){var o=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var a=e.getId();if(void 0!==a){var s=a.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[s]=e):this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new C.Event(E.default.CHANGEFEATURE,e))},C.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&y.default.isEmpty(this.nullGeometryFeatures_)},C.prototype.loadFeatures=function(t,e,i){var n,r,o=this.loadedExtentsRtree_,a=this.strategy_(t,e);for(n=0,r=a.length;n<r;++n){var s=a[n];o.forEachInExtent(s,function(t){return h.default.containsExtent(t.extent,s)})||(this.loader_.call(this,s,e,i),o.insert(s,{extent:s.slice()}))}},C.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(h.default.equals(i.extent,t))return e=i,!0}),e&&i.remove(e)},C.prototype.removeFeature=function(t){var e=r.default.getUid(t).toString();e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},C.prototype.removeFeatureInternal=function(t){var e=r.default.getUid(t).toString();this.featureChangeKeys_[e].forEach(d.default.unlistenByKey),delete this.featureChangeKeys_[e];var i=t.getId();void 0===i?delete this.undefIdIndex_[e]:delete this.idIndex_[i.toString()],this.dispatchEvent(new C.Event(E.default.REMOVEFEATURE,t))},C.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},C.prototype.setLoader=function(t){this.loader_=t},C.Event=function(t,e){f.default.call(this,t),this.feature=e},r.default.inherits(C.Event,f.default),e.default=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(276)),r={linearRingIsClockwise:function(t,e,i,n){for(var r=0,o=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],l=t[e+1];r+=(s-o)*(l+a),o=s,a=l}return 0<r},linearRingsAreOriented:function(t,e,i,n,o){var a,s,l=void 0!==o&&o;for(a=0,s=i.length;a<s;++a){var u=i[a],d=r.linearRingIsClockwise(t,e,u,n);if(0===a){if(l&&d||!l&&!d)return!1}else if(l&&!d||!l&&d)return!1;e=u}return!0},linearRingssAreOriented:function(t,e,i,n,o){var a,s;for(a=0,s=i.length;a<s;++a)if(!r.linearRingsAreOriented(t,e,i[a],n,o))return!1;return!0},orientLinearRings:function(t,e,i,o,a){var s,l,u=void 0!==a&&a;for(s=0,l=i.length;s<l;++s){var d=i[s],f=r.linearRingIsClockwise(t,e,d,o);(0===s?u&&f||!u&&!f:u&&!f||!u&&f)&&n.default.coordinates(t,e,d,o),e=d}return e},orientLinearRingss:function(t,e,i,n,o){var a,s;for(a=0,s=i.length;a<s;++a)e=r.orientLinearRings(t,e,i[a],n,o);return e}};e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={linearRing:function(t,e,i,n){for(var r=0,o=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],l=t[e+1];r+=a*s-o*l,o=s,a=l}return r/2},linearRings:function(t,e,n,r){var o,a,s=0;for(o=0,a=n.length;o<a;++o){var l=n[o];s+=i.linearRing(t,e,l,r),e=l}return s},linearRingss:function(t,e,n,r){var o,a,s=0;for(o=0,a=n.length;o<a;++o){var l=n[o];s+=i.linearRings(t,e,l,r),e=l[l.length-1]}return s}};e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(1)),o=n(i(58)),a=n(i(140)),s={lineString:function(t,e,i,n,o){var s=r.default.extendFlatCoordinates(r.default.createEmpty(),t,e,i,n);return!!r.default.intersects(o,s)&&(!!r.default.containsExtent(o,s)||!!(s[0]>=o[0]&&s[2]<=o[2])||!!(s[1]>=o[1]&&s[3]<=o[3])||a.default.forEach(t,e,i,n,function(t,e){return r.default.intersectsSegment(o,t,e)}))},lineStrings:function(t,e,i,n,r){var o,a;for(o=0,a=i.length;o<a;++o){if(s.lineString(t,e,i[o],n,r))return!0;e=i[o]}return!1},linearRing:function(t,e,i,n,r){return!!(s.lineString(t,e,i,n,r)||o.default.linearRingContainsXY(t,e,i,n,r[0],r[1])||o.default.linearRingContainsXY(t,e,i,n,r[0],r[3])||o.default.linearRingContainsXY(t,e,i,n,r[2],r[1])||o.default.linearRingContainsXY(t,e,i,n,r[2],r[3]))},linearRings:function(t,e,i,n,r){if(!s.linearRing(t,e,i[0],n,r))return!1;if(1===i.length)return!0;var a,l;for(a=1,l=i.length;a<l;++a)if(o.default.linearRingContainsExtent(t,i[a-1],i[a],n,r))return!1;return!0},linearRingss:function(t,e,i,n,r){var o,a;for(o=0,a=i.length;o<a;++o){var l=i[o];if(s.linearRings(t,e,l,n,r))return!0;e=l[l.length-1]}return!1}};e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(7)),a=n(i(1)),s=n(i(29)),l=n(i(12)),u=n(i(24)),d=n(i(59)),f=n(i(37)),c=n(i(36)),h=n(i(141)),p=n(i(77)),_=n(i(139)),g=n(i(140)),y=n(i(47)),v=function(t,e){u.default.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};r.default.inherits(v,u.default),v.prototype.appendCoordinate=function(t){this.flatCoordinates?o.default.extend(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},v.prototype.clone=function(){var t=new v(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},v.prototype.closestPointXY=function(t,e,i,n){return n<a.default.closestSquaredDistanceXY(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(d.default.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),d.default.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},v.prototype.forEachSegment=function(t,e){return g.default.forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},v.prototype.getCoordinateAtM=function(t,e){return this.layout!=s.default.XYM&&this.layout!=s.default.XYZM?null:h.default.lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,void 0!==e&&e)},v.prototype.getCoordinates=function(){return c.default.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},v.prototype.getCoordinateAt=function(t,e){return h.default.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},v.prototype.getLength=function(){return _.default.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},v.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},v.prototype.getSimplifiedGeometryInternal=function(t){var e=[];e.length=y.default.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);var i=new v(null);return i.setFlatCoordinates(s.default.XY,e),i},v.prototype.getType=function(){return l.default.LINE_STRING},v.prototype.intersectsExtent=function(t){return p.default.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},v.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),!this.flatCoordinates&&(this.flatCoordinates=[]),this.flatCoordinates.length=f.default.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(s.default.XY,null)},v.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.default=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(15)),a=n(i(1)),s=n(i(13)),l=n(i(30)),u=n(i(16)),d=n(i(31)),f=n(i(10)),c=function(){o.default.call(this),this.extent_=a.default.createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.tmpTransform_=f.default.create()};r.default.inherits(c,o.default),c.prototype.clone=function(){},c.prototype.closestPointXY=function(){},c.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},c.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},c.prototype.computeExtent=function(){},c.prototype.containsXY=s.default.FALSE,c.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),a.default.returnOrUpdate(this.extent_,t)},c.prototype.rotate=function(){},c.prototype.scale=function(){},c.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},c.prototype.getSimplifiedGeometry=function(){},c.prototype.getType=function(){},c.prototype.applyTransform=function(){},c.prototype.intersectsExtent=function(){},c.prototype.translate=function(){},c.prototype.transform=function(t,e){var i=this.tmpTransform_,n=(t=u.default.get(t)).getUnits()==d.default.TILE_PIXELS?function(n,r,o){var s=t.getExtent(),d=t.getWorldExtent(),c=a.default.getHeight(d)/a.default.getHeight(s);return f.default.compose(i,d[0],d[3],c,-c,0,0,0),l.default.transform2D(n,0,n.length,o,i,r),u.default.getTransform(t,e)(n,r,o)}:u.default.getTransform(t,e);return this.applyTransform(n),this},e.default=c},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={PROPERTYCHANGE:"propertychange"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(i(2)),o=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.evtHdlrs={}}return n(t,[{key:"on",value:function(t,e,i){this.addHdlr(t,e,i)}},{key:"one",value:function(t,e,i){this.addHdlr(t,e,i,!0)}},{key:"trigger",value:function(t,e){var i=this.evtHdlrs[t],n=[];i&&(i.forEach(function(t){t.scope?t.handler.call(t.scope,e):t.handler(e),t.remove&&n.push(t)}),n.forEach(function(t){i.splice(r.default.inArray(t,i),1)}))}},{key:"off",value:function(t,e,i){var n=this.evtHdlrs[t];n.forEach(function(t,r){if(t.handler===e&&t.scope===i)return n.splice(r,1),!1})}},{key:"addHdlr",value:function(t,e,i,n){this.evtHdlrs[t]=this.evtHdlrs[t]||[],this.evtHdlrs[t].push({handler:e,scope:i,remove:n})}}]),t}();o.Handler,e.default=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n};i.createOrUpdate=function(t,e,n,r,o){return void 0===o?new i(t,e,n,r):(o.minX=t,o.maxX=e,o.minY=n,o.maxY=r,o)},i.prototype.contains=function(t){return this.containsXY(t[1],t[2])},i.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},i.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},i.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},i.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},i.prototype.getHeight=function(){return this.maxY-this.minY+1},i.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},i.prototype.getWidth=function(){return this.maxX-this.minX+1},i.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(31)),a=n(i(149)),s=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0===t.extent?null:t.extent,this.worldExtent_=void 0===t.worldExtent?null:t.worldExtent,this.axisOrientation_=void 0===t.axisOrientation?"enu":t.axisOrientation,this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit;var e=t.code;if(r.default.ENABLE_PROJ4JS){var i=a.default.get();if("function"==typeof i){var n=i.defs(e);void 0!==n&&(void 0!==n.axis&&void 0===t.axisOrientation&&(this.axisOrientation_=n.axis),void 0===t.metersPerUnit&&(this.metersPerUnit_=n.to_meter),void 0===t.units&&(this.units_=n.units))}}};s.prototype.canWrapX=function(){return this.canWrapX_},s.prototype.getCode=function(){return this.code_},s.prototype.getExtent=function(){return this.extent_},s.prototype.getUnits=function(){return this.units_},s.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||o.default.METERS_PER_UNIT[this.units_]},s.prototype.getWorldExtent=function(){return this.worldExtent_},s.prototype.getAxisOrientation=function(){return this.axisOrientation_},s.prototype.isGlobal=function(){return this.global_},s.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},s.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},s.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},s.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},s.prototype.setWorldExtent=function(t){this.worldExtent_=t},s.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},s.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(){};r.prototype.disposed_=!1,r.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},r.prototype.disposeInternal=n.default.nullFunction,e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(11)),o=n(i(12)),a=n(i(157)),s=n(i(155)),l=n(i(101)),u=function t(e){var i=e||{};this.geometry_=null,this.geometryFunction_=t.defaultGeometryFunction,void 0!==i.geometry&&this.setGeometry(i.geometry),this.fill_=void 0===i.fill?null:i.fill,this.image_=void 0===i.image?null:i.image,this.renderer_=void 0===i.renderer?null:i.renderer,this.stroke_=void 0===i.stroke?null:i.stroke,this.text_=void 0===i.text?null:i.text,this.zIndex_=i.zIndex};u.prototype.clone=function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new u({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},u.prototype.getRenderer=function(){return this.renderer_},u.prototype.setRenderer=function(t){this.renderer_=t},u.prototype.getGeometry=function(){return this.geometry_},u.prototype.getGeometryFunction=function(){return this.geometryFunction_},u.prototype.getFill=function(){return this.fill_},u.prototype.setFill=function(t){this.fill_=t},u.prototype.getImage=function(){return this.image_},u.prototype.setImage=function(t){this.image_=t},u.prototype.getStroke=function(){return this.stroke_},u.prototype.setStroke=function(t){this.stroke_=t},u.prototype.getText=function(){return this.text_},u.prototype.setText=function(t){this.text_=t},u.prototype.getZIndex=function(){return this.zIndex_},u.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=u.defaultGeometryFunction,this.geometry_=t},u.prototype.setZIndex=function(t){this.zIndex_=t},u.createFunction=function(t){var e,i;"function"==typeof t?e=t:(Array.isArray(t)?i=t:(r.default.assert(t instanceof u,41),i=[t]),e=function(){return i});return e},u.default_=null,u.defaultFunction=function(){if(!u.default_){var t=new s.default({color:"rgba(255,255,255,0.4)"}),e=new l.default({color:"#3399CC",width:1.25});u.default_=[new u({image:new a.default({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return u.default_},u.createDefaultEditing=function(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[o.default.POLYGON]=[new u({fill:new s.default({color:[255,255,255,.5]})})],t[o.default.MULTI_POLYGON]=t[o.default.POLYGON],t[o.default.LINE_STRING]=[new u({stroke:new l.default({color:e,width:5})}),new u({stroke:new l.default({color:i,width:3})})],t[o.default.MULTI_LINE_STRING]=t[o.default.LINE_STRING],t[o.default.CIRCLE]=t[o.default.POLYGON].concat(t[o.default.LINE_STRING]),t[o.default.POINT]=[new u({image:new a.default({radius:6,fill:new s.default({color:i}),stroke:new l.default({color:e,width:1.5})}),zIndex:1/0})],t[o.default.MULTI_POINT]=t[o.default.POINT],t[o.default.GEOMETRY_COLLECTION]=t[o.default.POLYGON].concat(t[o.default.LINE_STRING],t[o.default.POINT]),t},u.defaultGeometryFunction=function(t){return t.getGeometry()},e.default=u},function(t,e,i){"use strict";i(301),t.exports=self.fetch.bind(self)},function(t,e,i){"use strict";(function(n,r){var o,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4+314e4831
 */
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4+314e4831
 */
!function(n,r){"object"===s(e)&&void 0!==t?t.exports=r():void 0===(a="function"==typeof(o=r)?o.call(e,i,e,t):o)||(t.exports=a)}(0,function(){function t(t){return"function"==typeof t}function e(){var t=setTimeout;return function(){return t(i,1)}}function i(){for(var t=0;t<E;t+=2){(0,I[t])(I[t+1]),I[t]=void 0,I[t+1]=void 0}E=0}function o(t,e){var i=this,n=new this.constructor(l);void 0===n[L]&&v(n);var r=i._state;if(r){var o=arguments[r-1];T(function(){return y(r,n,o,i._result)})}else _(i,n,t,e);return n}function a(t){if(t&&"object"===(void 0===t?"undefined":s(t))&&t.constructor===this)return t;var e=new this(l);return f(e,t),e}function l(){}function u(t){try{return t.then}catch(t){return D.error=t,D}}function d(e,i,n){i.constructor===e.constructor&&n===o&&i.constructor.resolve===a?function(t,e){e._state===M?h(t,e._result):e._state===F?p(t,e._result):_(e,void 0,function(e){return f(t,e)},function(e){return p(t,e)})}(e,i):n===D?(p(e,D.error),D.error=null):void 0===n?h(e,i):t(n)?function(t,e,i){T(function(t){var n=!1,r=function(t,e,i,n){try{t.call(e,i,n)}catch(e){return e}}(i,e,function(i){n||(n=!0,e===i?h(t,i):f(t,i))},function(e){n||(n=!0,p(t,e))},t._label);!n&&r&&(n=!0,p(t,r))},t)}(e,i,n):h(e,i)}function f(t,e){t===e?p(t,new TypeError("You cannot resolve a promise with itself")):function(t){var e=void 0===t?"undefined":s(t);return null!==t&&("object"===e||"function"===e)}(e)?d(t,e,u(e)):h(t,e)}function c(t){t._onerror&&t._onerror(t._result),g(t)}function h(t,e){t._state!==A||(t._result=e,t._state=M,0!==t._subscribers.length&&T(g,t))}function p(t,e){t._state!==A||(t._state=F,t._result=e,T(c,t))}function _(t,e,i,n){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+M]=i,r[o+F]=n,0===o&&t._state&&T(g,t)}function g(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n=void 0,r=void 0,o=t._result,a=0;a<e.length;a+=3)n=e[a],r=e[a+i],n?y(i,n,r,o):r(o);t._subscribers.length=0}}function y(e,i,n,r){var o,a,s,l,u=t(n);if(u){if((o=function(t,e){try{return t(e)}catch(e){return D.error=e,D}}(n,r))===D?(l=!0,a=o.error,o.error=null):s=!0,i===o)return void p(i,new TypeError("A promises callback cannot return that same promise."))}else o=r,s=!0;i._state!==A||(u&&s?f(i,o):l?p(i,a):e===M?h(i,o):e===F&&p(i,o))}function v(t){t[L]=N++,t._state=void 0,t._result=void 0,t._subscribers=[]}var m=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},E=0,b=void 0,C=void 0,T=function(t,e){I[E]=t,I[E+1]=e,2==(E+=2)&&(C?C(i):w())},x="undefined"==typeof window?void 0:window,S=x||{},R=S.MutationObserver||S.WebKitMutationObserver,O="undefined"==typeof self&&void 0!==n&&"[object process]"==={}.toString.call(n),P="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,I=Array(1e3),w=void 0;w=O?function(){return n.nextTick(i)}:R?function(){var t=0,e=new R(i),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():P?function(){var t=new MessageChannel;return t.port1.onmessage=i,function(){return t.port2.postMessage(0)}}():void 0!==x?e():function(){try{var t=Function("return this")().require("vertx");return void 0===(b=t.runOnLoop||t.runOnContext)?e():function(){b(i)}}catch(t){return e()}}();var L=Math.random().toString(36).substring(2),A=void 0,M=1,F=2,D={error:null},N=0,k=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(l),this.promise[L]||v(this.promise),m(e)?(this.length=e.length,this._remaining=e.length,this._result=Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&h(this.promise,this._result))):p(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===A&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===a){var r=u(t);if(r===o&&t._state!==A)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===G){var s=new i(l);d(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===A&&(this._remaining--,t===F?p(n,i):this._result[e]=i),0===this._remaining&&h(n,this._result)},t.prototype._willSettleAt=function(t,e){var i=this;_(t,void 0,function(t){return i._settledAt(M,e,t)},function(t){return i._settledAt(F,e,t)})},t}(),G=function(){function t(e){this[L]=N++,this._result=this._state=void 0,this._subscribers=[],l!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){f(t,e)},function(e){p(t,e)})}catch(e){p(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this.constructor;return this.then(function(i){return e.resolve(t()).then(function(){return i})},function(i){return e.resolve(t()).then(function(){throw i})})},t}();return G.prototype.then=o,G.all=function(t){return new k(this,t).promise},G.race=function(t){var e=this;return m(t)?new e(function(i,n){for(var r=t.length,o=0;o<r;o++)e.resolve(t[o]).then(i,n)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},G.resolve=a,G.reject=function(t){var e=new this(l);return p(e,t),e},G._setScheduler=function(t){C=t},G._setAsap=function(t){T=t},G._asap=T,G.polyfill=function(){var t;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(e){}if("[object Promise]"===i&&!e.cast)return}t.Promise=G},G.Promise=G,G})}).call(this,i(302),i(64))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(9)).default.cacheBust(5);e.default={CENTER_URL:"data/center.csv?"+n,ORDER_URL:"data/order.csv?"+n,ZONE_URL:"data/zone.json?"+n,CONTENT_URL:"data/content.csv?"+n,GEOCLIENT_URL:"https://maps.nyc.gov/geoclient/v1/search.json?app_key=74DF5DB1D7320A9A2&app_id=nyc-lib-example",DIRECTIONS_URL:"https://maps.googleapis.com/maps/api/js?client=gme-newyorkcitydepartment&channel=pka&sensor=false&libraries=visualization",SURFACE_WATER_ZONE:7,NO_ZONE:"X"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(104)),l=n(i(9)),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=(0,a.default)(t.map.getTargetElement()).find("f-tip").get(0),n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{id:l.default.nextId("FeatureTip"),element:i||(0,a.default)(e.HTML).get(0)}));return n.setMap(t.map),n.map=n.getMap(),n.tip=(0,a.default)(n.getElement()),n.addTips(t.tips),t.map.on("pointermove",a.default.proxy(n.label,n)),(0,a.default)(t.map.getViewport()).mouseout(a.default.proxy(n.hide,n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"hide",value:function(){this.tip.fadeOut()}},{key:"addTips",value:function(t){t.forEach(function(t){t.layer.nycTip=t.label})}},{key:"label",value:function(t){var e=this.map.forEachFeatureAtPixel(t.pixel,function(t,e){return e.getVisible()&&e.nycTip?e.nycTip(t):null});e?(this.tip.html(e.html).addClass(e.css||""),this.setPosition(t.coordinate),this.tip.show(),this.position()):this.hide()}},{key:"position",value:function(){var t=this.map.getSize(),e=this.map.getPixelFromCoordinate(this.getPosition()),i=this.tip.width(),n=this.tip.height(),r=e[1]+n>t[1]?"bottom":"top",o=e[0]+i>t[0]?"right":"left";this.setPositioning(r+"-"+o)}}]),e}();u.TipDef,u.LabelFunction,u.Label,u.Options,u.HTML='<div class="f-tip" role="tooltip"></div>',e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(69)),a=n(i(45)),s=n(i(115)),l=n(i(120)),u=n(i(201)),d=n(i(200)),f=n(i(10)),c=n(i(112)),h=n(i(14)),p=n(i(33)),_=n(i(65)),g=function(t,e){l.default.call(this,e),this.mapRenderer=t,this.arrayBuffer_=new p.default([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=f.default.create(),this.projectionMatrix=f.default.create(),this.tmpMat4_=c.default.create(),this.defaultLocations_=null};r.default.inherits(g,l.default),g.prototype.bindFramebuffer=function(t,e){var i=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=e){var n=function(t,e,i){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(i))}.bind(null,i,this.framebuffer,this.texture);t.postRenderFunctions.push(n);var r=_.default.createEmptyTexture(i,e,e),o=i.createFramebuffer();i.bindFramebuffer(h.default.FRAMEBUFFER,o),i.framebufferTexture2D(h.default.FRAMEBUFFER,h.default.COLOR_ATTACHMENT0,h.default.TEXTURE_2D,r,0),this.texture=r,this.framebuffer=o,this.framebufferDimension=e}else i.bindFramebuffer(h.default.FRAMEBUFFER,this.framebuffer)},g.prototype.composeFrame=function(t,e,i){this.dispatchComposeEvent_(a.default.PRECOMPOSE,i,t),i.bindBuffer(h.default.ARRAY_BUFFER,this.arrayBuffer_);var n,r=i.getGL(),o=u.default.fragment,s=u.default.vertex,l=i.getProgram(o,s);this.defaultLocations_?n=this.defaultLocations_:(n=new d.default(r,l),this.defaultLocations_=n),i.useProgram(l)&&(r.enableVertexAttribArray(n.a_position),r.vertexAttribPointer(n.a_position,2,h.default.FLOAT,!1,16,0),r.enableVertexAttribArray(n.a_texCoord),r.vertexAttribPointer(n.a_texCoord,2,h.default.FLOAT,!1,16,8),r.uniform1i(n.u_texture,0)),r.uniformMatrix4fv(n.u_texCoordMatrix,!1,c.default.fromTransform(this.tmpMat4_,this.getTexCoordMatrix())),r.uniformMatrix4fv(n.u_projectionMatrix,!1,c.default.fromTransform(this.tmpMat4_,this.getProjectionMatrix())),r.uniform1f(n.u_opacity,e.opacity),r.bindTexture(h.default.TEXTURE_2D,this.getTexture()),r.drawArrays(h.default.TRIANGLE_STRIP,0,4),this.dispatchComposeEvent_(a.default.POSTCOMPOSE,i,t)},g.prototype.dispatchComposeEvent_=function(t,e,i){var n=this.getLayer();if(n.hasListener(t)){var r=i.viewState,a=r.resolution,l=i.pixelRatio,u=i.extent,d=r.center,f=r.rotation,c=i.size,h=new s.default(e,d,a,f,c,u,l),p=new o.default(t,h,i,null,e);n.dispatchEvent(p)}},g.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},g.prototype.getTexture=function(){return this.texture},g.prototype.getProjectionMatrix=function(){return this.projectionMatrix},g.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},g.prototype.prepareFrame=function(){},g.prototype.forEachLayerAtPixel=function(){},e.default=g},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(50)),a=n(i(12)),s=n(i(53)),l={defaultOrder:function(t,e){return r.default.getUid(t)-r.default.getUid(e)},getSquaredTolerance:function(t,e){var i=l.getTolerance(t,e);return i*i},getTolerance:function(t,e){return r.default.SIMPLIFY_TOLERANCE*t/e},renderCircleGeometry_:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var a=t.getReplay(i.getZIndex(),s.default.CIRCLE);a.setFillStrokeStyle(r,o),a.drawCircle(e,n)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),s.default.TEXT);u.setTextStyle(l,t.addDeclutter(!1)),u.drawText(e,n)}},renderFeature:function(t,e,i,n,r,a){var s,u,d=!1;return(s=i.getImage())&&((u=s.getImageState())==o.default.LOADED||u==o.default.ERROR?s.unlistenImageChange(r,a):(u==o.default.IDLE&&s.load(),u=s.getImageState(),s.listenImageChange(r,a),d=!0)),l.renderFeature_(t,e,i,n),d},renderFeature_:function(t,e,i,n){var r=i.getGeometryFunction()(e);if(r){var o=r.getSimplifiedGeometry(n);if(i.getRenderer())l.renderGeometry_(t,o,i,e);else(0,l.GEOMETRY_RENDERERS_[o.getType()])(t,o,i,e)}},renderGeometry_:function(t,e,i,n){if(e.getType()!=a.default.GEOMETRY_COLLECTION)t.getReplay(i.getZIndex(),s.default.DEFAULT).drawCustom(e,n,i.getRenderer());else for(var r=e.getGeometries(),o=0,u=r.length;o<u;++o)l.renderGeometry_(t,r[o],i,n)},renderGeometryCollectionGeometry_:function(t,e,i,n){var r,o,a=e.getGeometriesArray();for(r=0,o=a.length;r<o;++r){(0,l.GEOMETRY_RENDERERS_[a[r].getType()])(t,a[r],i,n)}},renderLineStringGeometry_:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getReplay(i.getZIndex(),s.default.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawLineString(e,n)}var a=i.getText();if(a){var l=t.getReplay(i.getZIndex(),s.default.TEXT);l.setTextStyle(a,t.addDeclutter(!1)),l.drawText(e,n)}},renderMultiLineStringGeometry_:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getReplay(i.getZIndex(),s.default.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,n)}var a=i.getText();if(a){var l=t.getReplay(i.getZIndex(),s.default.TEXT);l.setTextStyle(a,t.addDeclutter(!1)),l.drawText(e,n)}},renderMultiPolygonGeometry_:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(o||r){var a=t.getReplay(i.getZIndex(),s.default.POLYGON);a.setFillStrokeStyle(r,o),a.drawMultiPolygon(e,n)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),s.default.TEXT);u.setTextStyle(l,t.addDeclutter(!1)),u.drawText(e,n)}},renderPointGeometry_:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=o.default.LOADED)return;var a=t.getReplay(i.getZIndex(),s.default.IMAGE);a.setImageStyle(r,t.addDeclutter(!1)),a.drawPoint(e,n)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),s.default.TEXT);u.setTextStyle(l,t.addDeclutter(!!r)),u.drawText(e,n)}},renderMultiPointGeometry_:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=o.default.LOADED)return;var a=t.getReplay(i.getZIndex(),s.default.IMAGE);a.setImageStyle(r,t.addDeclutter(!1)),a.drawMultiPoint(e,n)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),s.default.TEXT);u.setTextStyle(l,t.addDeclutter(!!r)),u.drawText(e,n)}},renderPolygonGeometry_:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var a=t.getReplay(i.getZIndex(),s.default.POLYGON);a.setFillStrokeStyle(r,o),a.drawPolygon(e,n)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),s.default.TEXT);u.setTextStyle(l,t.addDeclutter(!1)),u.drawText(e,n)}}};l.GEOMETRY_RENDERERS_={Point:l.renderPointGeometry_,LineString:l.renderLineStringGeometry_,Polygon:l.renderPolygonGeometry_,MultiPoint:l.renderMultiPointGeometry_,MultiLineString:l.renderMultiLineStringGeometry_,MultiPolygon:l.renderMultiPolygonGeometry_,GeometryCollection:l.renderGeometryCollectionGeometry_,Circle:l.renderCircleGeometry_},e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(95)),a=n(i(15)),s=n(i(8)),l=n(i(5)),u=function(t){a.default.call(this),this.element=t.element?t.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=t.render?t.render:r.default.nullFunction,t.target&&this.setTarget(t.target)};r.default.inherits(u,a.default),u.prototype.disposeInternal=function(){s.default.removeNode(this.element),a.default.prototype.disposeInternal.call(this)},u.prototype.getMap=function(){return this.map_},u.prototype.setMap=function(t){this.map_&&s.default.removeNode(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)l.default.unlistenByKey(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==r.default.nullFunction&&this.listenerKeys.push(l.default.listen(t,o.default.POSTRENDER,this.render,this)),t.render())},u.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(6)),r={disable:function(t){return void 0===t?void 0:0},none:function(t,e){return void 0===t?void 0:t+e},createSnapToN:function(t){var e=2*Math.PI/t;return function(t,i){return void 0===t?void 0:t=Math.floor((t+i)/e+.5)*e}},createSnapToZero:function(t){var e=t||n.default.toRadians(5);return function(t,i){return void 0===t?void 0:Math.abs(t+i)<=e?0:t+i}}};e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(11)),o=n(i(3)),a=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};a.DROP=1/0,a.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,o.default.clear(this.queuedElements_)},a.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},a.prototype.enqueue=function(t){r.default.assert(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=a.DROP&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},a.prototype.getCount=function(){return this.elements_.length},a.prototype.getLeftChildIndex_=function(t){return 2*t+1},a.prototype.getRightChildIndex_=function(t){return 2*t+2},a.prototype.getParentIndex_=function(t){return t-1>>1},a.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;0<=t;t--)this.siftUp_(t)},a.prototype.isEmpty=function(){return 0===this.elements_.length},a.prototype.isKeyQueued=function(t){return t in this.queuedElements_},a.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},a.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,r=e[t],o=i[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<n&&i[l]<i[s]?l:s;e[t]=e[u],i[t]=i[u],t=u}e[t]=r,i[t]=o,this.siftDown_(a,t)},a.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,r=i[e],o=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>o))break;i[e]=i[a],n[e]=n[a],e=a}i[e]=r,n[e]=o},a.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,r=this.elements_,o=this.priorities_,s=0,l=r.length;for(e=0;e<l;++e)(i=n(t=r[e]))==a.DROP?delete this.queuedElements_[this.keyFunction_(t)]:(o[s]=i,r[s++]=t);r.length=s,o.length=s,this.heapify_()},e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},function(t,e,i){"use strict";function n(t,e){return this instanceof n?(this._maxEntries=E(4,t||9),this._minEntries=E(2,v(.4*this._maxEntries)),e&&this._initFormat(e),void this.clear()):new n(t,e)}function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<i;a++)o=t.children[a],s(r,t.leaf?n(o):o);return r}function s(t,e){return t.minX=b(t.minX,e.minX),t.minY=b(t.minY,e.minY),t.maxX=E(t.maxX,e.maxX),t.maxY=E(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function d(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function c(t,e){return(E(e.maxX,t.maxX)-b(e.minX,t.minX))*(E(e.maxY,t.maxY)-b(e.minY,t.minY))}function h(t,e){var i=E(t.minX,e.minX),n=E(t.minY,e.minY),r=b(t.maxX,e.maxX),o=b(t.maxY,e.maxY);return E(0,r-i)*E(0,o-n)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function _(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,i,n,r){for(var o,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=n||(o=e+v((i-e)/n/2)*n,C(t,o,e,i,r),a.push(e,o,o,i))}var v=Math.ceil,m=Math.log,E=Math.max,b=Math.min;t.exports=n;var C=i(269);n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!_(t,e))return i;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],_(t,s=e.leaf?n(a):a)&&(e.leaf?i.push(a):p(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!_(t,e))return!1;for(var n,r,o,a,s=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],_(t,a=e.leaf?i(o):o)){if(e.leaf||p(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var i,n,o,a,s=this.data,l=this.toBBox(t),u=[],d=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],i=d.pop(),a=!0),s.leaf&&-1!==(o=r(t,s.children,e)))return s.children.splice(o,1),u.push(s),this._condense(u),this;a||s.leaf||!p(s,l)?n?(i++,s=n.children[i],a=!1):s=null:(u.push(s),d.push(i),i=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,a=i-e+1,s=this._maxEntries;if(a<=s)return o(r=g(t.slice(e,i+1)),this.toBBox),r;n||(n=v(m(a)/m(s)),s=v(a/Math.pow(s,n-1))),(r=g([])).leaf=!1,r.height=n;var l,u,d,f,c=v(a/s),h=c*v(Math.sqrt(s));for(y(t,e,i,h,this.compareMinX),l=e;l<=i;l+=h)for(y(t,l,d=b(l+h-1,i),c,this.compareMinY),u=l;u<=d;u+=c)f=b(u+c-1,d),r.children.push(this._build(t,u,f,n-1));return o(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,a,s,l,u,f,h;n.push(e),!e.leaf&&n.length-1!==i;){for(f=h=1/0,r=0,o=e.children.length;r<o;r++)l=d(a=e.children[r]),(u=c(t,a)-l)<h?(h=u,f=l<f?l:f,s=a):u==h&&l<f&&(f=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),s(a,r);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var a=this._chooseSplitIndex(i,r,n),s=g(i.children.splice(a,i.children.length-a));s.height=i.height,s.leaf=i.leaf,o(i,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,o,s,l,u,f,c;for(u=f=1/0,n=e;n<=i-e;n++)s=h(r=a(t,0,n,this.toBBox),o=a(t,n,i,this.toBBox)),l=d(r)+d(o),s<u?(u=s,c=n,f=l<f?l:f):s===u&&l<f&&(f=l,c=n);return c},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var r,o,l=this.toBBox,u=a(t,0,e,l),d=a(t,i-e,i,l),c=f(u)+f(d);for(r=e;r<i-e;r++)o=t.children[r],s(u,t.leaf?l(o):o),c+=f(u);for(r=i-e-1;r>=e;r--)o=t.children[r],s(d,t.leaf?l(o):o),c+=f(d);return c},_adjustParentBBoxes:function(t,e,i){for(var n=i;0<=n;n--)s(e[n],t)},_condense:function(t){for(var e,i=t.length-1;0<=i;i--)0===t[i].children.length?0<i?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():o(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(7)),a=n(i(1)),s=n(i(29)),l=n(i(12)),u=n(i(28)),d=n(i(24)),f=n(i(37)),c=n(i(36)),h=n(i(6)),p=function(t,e){d.default.call(this),this.setCoordinates(t,e)};r.default.inherits(p,d.default),p.prototype.appendPoint=function(t){this.flatCoordinates?o.default.extend(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},p.prototype.clone=function(){var t=new p(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},p.prototype.closestPointXY=function(t,e,i,n){if(n<a.default.closestSquaredDistanceXY(this.getExtent(),t,e))return n;var r,o,s,l=this.flatCoordinates,u=this.stride;for(r=0,o=l.length;r<o;r+=u){var d=h.default.squaredDistance(t,e,l[r],l[r+1]);if(d<n){for(n=d,s=0;s<u;++s)i[s]=l[r+s];i.length=u}}return n},p.prototype.getCoordinates=function(){return c.default.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},p.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;if(0>t||e<=t)return null;var i=new u.default(null);return i.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride)),i},p.prototype.getPoints=function(){var t,e,i=this.flatCoordinates,n=this.layout,r=this.stride,o=[];for(t=0,e=i.length;t<e;t+=r){var a=new u.default(null);a.setFlatCoordinates(n,i.slice(t,t+r)),o.push(a)}return o},p.prototype.getType=function(){return l.default.MULTI_POINT},p.prototype.intersectsExtent=function(t){var e,i,n,r,o=this.flatCoordinates,s=this.stride;for(e=0,i=o.length;e<i;e+=s)if(n=o[e],r=o[e+1],a.default.containsXY(t,n,r))return!0;return!1},p.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),!this.flatCoordinates&&(this.flatCoordinates=[]),this.flatCoordinates.length=f.default.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(s.default.XY,null)},p.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.default=p},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(11)),a=n(i(48)),s=n(i(60)),l=n(i(142)),u=n(i(278)),d=n(i(78)),f=n(i(138)),c=n(i(97)),h=n(i(137)),p=n(i(28)),_=n(i(35)),g=n(i(3)),y=n(i(16)),v=function(t){var e=t||{};l.default.call(this),this.defaultDataProjection=y.default.get(e.defaultDataProjection?e.defaultDataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=y.default.get(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName};r.default.inherits(v,l.default),v.readGeometry_=function(t,e){if(!t)return null;var i=v.GEOMETRY_READERS_[t.type];return s.default.transformWithOptions(i(t),!1,e)},v.readGeometryCollectionGeometry_=function(t,e){var i=t.geometries.map(function(t){return v.readGeometry_(t,e)});return new u.default(i)},v.readPointGeometry_=function(t){return new p.default(t.coordinates)},v.readLineStringGeometry_=function(t){return new d.default(t.coordinates)},v.readMultiLineStringGeometry_=function(t){return new f.default(t.coordinates)},v.readMultiPointGeometry_=function(t){return new c.default(t.coordinates)},v.readMultiPolygonGeometry_=function(t){return new h.default(t.coordinates)},v.readPolygonGeometry_=function(t){return new _.default(t.coordinates)},v.writeGeometry_=function(t,e){return(0,v.GEOMETRY_WRITERS_[t.getType()])(s.default.transformWithOptions(t,!0,e),e)},v.writeEmptyGeometryCollectionGeometry_=function(){return{type:"GeometryCollection",geometries:[]}},v.writeGeometryCollectionGeometry_=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var i=g.default.assign({},e);return delete i.featureProjection,v.writeGeometry_(t,i)})}},v.writeLineStringGeometry_=function(t){return{type:"LineString",coordinates:t.getCoordinates()}},v.writeMultiLineStringGeometry_=function(t){return{type:"MultiLineString",coordinates:t.getCoordinates()}},v.writeMultiPointGeometry_=function(t){return{type:"MultiPoint",coordinates:t.getCoordinates()}},v.writeMultiPolygonGeometry_=function(t,e){var i;return e&&(i=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(i)}},v.writePointGeometry_=function(t){return{type:"Point",coordinates:t.getCoordinates()}},v.writePolygonGeometry_=function(t,e){var i;return e&&(i=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(i)}},v.GEOMETRY_READERS_={Point:v.readPointGeometry_,LineString:v.readLineStringGeometry_,Polygon:v.readPolygonGeometry_,MultiPoint:v.readMultiPointGeometry_,MultiLineString:v.readMultiLineStringGeometry_,MultiPolygon:v.readMultiPolygonGeometry_,GeometryCollection:v.readGeometryCollectionGeometry_},v.GEOMETRY_WRITERS_={Point:v.writePointGeometry_,LineString:v.writeLineStringGeometry_,Polygon:v.writePolygonGeometry_,MultiPoint:v.writeMultiPointGeometry_,MultiLineString:v.writeMultiLineStringGeometry_,MultiPolygon:v.writeMultiPolygonGeometry_,GeometryCollection:v.writeGeometryCollectionGeometry_,Circle:v.writeEmptyGeometryCollectionGeometry_},v.prototype.readFeature,v.prototype.readFeatures,v.prototype.readFeatureFromObject=function(t,e){var i;i="Feature"===t.type?t:{type:"Feature",geometry:t};var n=v.readGeometry_(i.geometry,e),r=new a.default;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&void 0!==i.geometry_name&&r.setGeometryName(i.geometry_name),r.setGeometry(n),void 0!==i.id&&r.setId(i.id),i.properties&&r.setProperties(i.properties),r},v.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];var n,r,o=t.features;for(n=0,r=o.length;n<r;++n)i.push(this.readFeatureFromObject(o[n],e))}else i=[this.readFeatureFromObject(t,e)];return i},v.prototype.readGeometry,v.prototype.readGeometryFromObject=function(t,e){return v.readGeometry_(t,e)},v.prototype.readProjection,v.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=y.default.get(i.properties.name):o.default.assert(!1,36):e=this.defaultDataProjection,e},v.prototype.writeFeature,v.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature"},n=t.getId();void 0!==n&&(i.id=n);var r=t.getGeometry();i.geometry=r?v.writeGeometry_(r,e):null;var o=t.getProperties();return delete o[t.getGeometryName()],i.properties=g.default.isEmpty(o)?null:o,i},v.prototype.writeFeatures,v.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);var i,n,r=[];for(i=0,n=t.length;i<n;++i)r.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:r}},v.prototype.writeGeometry,v.prototype.writeGeometryObject=function(t,e){return v.writeGeometry_(t,this.adaptOptions(e))},e.default=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(9)),l=n(i(18)),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target));return i.getContainer().append((0,a.default)(e.HTML)).addClass("tabs"),i.btns=i.find(".btns"),i.tabs=i.find(".container"),i.active=null,i.ready=!1,i.render(t.tabs),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default),o(e,[{key:"open",value:function(t){t=this.find(t),this.find(".tab").attr("aria-hidden",!0).removeClass("active"),this.btns.find(".btn").removeClass("active").attr("aria-selected",!1),t.addClass("active").attr("aria-hidden",!1).attr("tabindex",0).focus(),t.data("btn").addClass("active").attr("aria-selected",!0),this.active=t,this.trigger("change",this)}},{key:"render",value:function(t){var i=this,n=!1;t.forEach(function(t,r){var o=s.default.nextId("tab-label"),l=(0,a.default)(t.tab).addClass("tab tab-"+r).attr("role","tabpanel").attr("aria-labelledby",o),u=(0,a.default)(e.BTN_HTML).attr("id",o).click(a.default.proxy(i.btnClick,i)).addClass("btn-tab btn-"+r).data("tab",l).append(t.title);l.data("btn",u),i.btns.append(u),i.tabs.append(l),t.active&&(i.open(l),n=!0)}),n||this.open(t[0].tab),this.ready=!0}},{key:"btnClick",value:function(t){this.open((0,a.default)(t.currentTarget).data("tab"))}}]),e}();u.Options,u.Tab,u.HTML='<div class="btns" role="tablist"></div><div class="container"></div>',u.BTN_HTML='<h3 class="btn" role="tab"><span class="screen-reader-only">show </span></h3>',e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){var e=t||{};this.color_=void 0===e.color?null:e.color,this.lineCap_=e.lineCap,this.lineDash_=void 0===e.lineDash?null:e.lineDash,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};r.prototype.clone=function(){var t=this.getColor();return new r({color:t&&t.slice?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},r.prototype.getColor=function(){return this.color_},r.prototype.getLineCap=function(){return this.lineCap_},r.prototype.getLineDash=function(){return this.lineDash_},r.prototype.getLineDashOffset=function(){return this.lineDashOffset_},r.prototype.getLineJoin=function(){return this.lineJoin_},r.prototype.getMiterLimit=function(){return this.miterLimit_},r.prototype.getWidth=function(){return this.width_},r.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},r.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},r.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},r.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},r.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},r.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},r.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},r.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.checksum_+=this.color_?"string"==typeof this.color_?this.color_:n.default.getUid(this.color_).toString():"-",this.checksum_+=","+(void 0===this.lineCap_?"-":this.lineCap_.toString())+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0===this.lineDashOffset_?"-":this.lineDashOffset_)+","+(void 0===this.lineJoin_?"-":this.lineJoin_)+","+(void 0===this.miterLimit_?"-":this.miterLimit_.toString())+","+(void 0===this.width_?"-":this.width_.toString())),this.checksum_},e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(11)),a=n(i(39)),s=n(i(4)),l=function(t){a.default.call(this),this.highWaterMark=void 0===t?2048:t,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null};r.default.inherits(l,a.default),l.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},l.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(s.default.CLEAR)},l.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},l.prototype.forEach=function(t,e){for(var i=this.oldest_;i;)t.call(e,i.value_,i.key_,this),i=i.newer},l.prototype.get=function(t){var e=this.entries_[t];return o.default.assert(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},l.prototype.remove=function(t){var e=this.entries_[t];return o.default.assert(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},l.prototype.getCount=function(){return this.count_},l.prototype.getKeys=function(){var t,e=Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},l.prototype.getValues=function(){var t,e=Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},l.prototype.peekLast=function(){return this.oldest_.value_},l.prototype.peekLastKey=function(){return this.oldest_.key_},l.prototype.peekFirstKey=function(){return this.newest_.key_},l.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},l.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},l.prototype.set=function(t,e){o.default.assert(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},l.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n(i(2)),n(i(9))),s=(n(i(48)),n(i(60))),l=(n(i(28)),function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.parentFormat=t.parentFormat,i.decorations=t.decorations,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"readFeature",value:function(){throw"Not supported: Use readFeatures"}},{key:"readFeatures",value:function(t,e){var i=this,n=this.parentFormat.readFeatures(t,e);return n.forEach(function(t){i.decorate(t)}),n}},{key:"readProjection",value:function(t){return this.parentFormat.readProjection(t)}},{key:"getLastExtent",value:function(){return null}},{key:"getType",value:function(){return this.parentFormat.getType()}},{key:"decorate",value:function(t){t.get("decorated")||(t.set("decorated",!0),a.default.mixin(t,this.decorations),t.extendFeature&&t.extendFeature())}}]),e}());l.Options,e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.round,o=Math.abs;Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(0)),s=n(i(95)),l=n(i(15)),u=n(i(172)),d=n(i(40)),f=n(i(8)),c=n(i(5)),h=n(i(1)),p=function t(e){l.default.call(this),this.options=e,this.id=e.id,this.insertFirst=!(void 0!==e.insertFirst)||e.insertFirst,this.stopEvent=!(void 0!==e.stopEvent)||e.stopEvent,this.element=document.createElement("DIV"),this.element.className=void 0===e.className?"ol-overlay-container "+d.default.CLASS_SELECTABLE:e.className,this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0===e.autoPanMargin?20:e.autoPanMargin,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,c.default.listen(this,l.default.getChangeEventType(t.Property.ELEMENT),this.handleElementChanged,this),c.default.listen(this,l.default.getChangeEventType(t.Property.MAP),this.handleMapChanged,this),c.default.listen(this,l.default.getChangeEventType(t.Property.OFFSET),this.handleOffsetChanged,this),c.default.listen(this,l.default.getChangeEventType(t.Property.POSITION),this.handlePositionChanged,this),c.default.listen(this,l.default.getChangeEventType(t.Property.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0===e.offset?[0,0]:e.offset),this.setPositioning(void 0===e.positioning?u.default.TOP_LEFT:e.positioning),void 0!==e.position&&this.setPosition(e.position)};a.default.inherits(p,l.default),p.prototype.getElement=function(){return this.get(p.Property.ELEMENT)},p.prototype.getId=function(){return this.id},p.prototype.getMap=function(){return this.get(p.Property.MAP)},p.prototype.getOffset=function(){return this.get(p.Property.OFFSET)},p.prototype.getPosition=function(){return this.get(p.Property.POSITION)},p.prototype.getPositioning=function(){return this.get(p.Property.POSITIONING)},p.prototype.handleElementChanged=function(){f.default.removeChildren(this.element);var t=this.getElement();t&&this.element.appendChild(t)},p.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(f.default.removeNode(this.element),c.default.unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=c.default.listen(t,s.default.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},p.prototype.render=function(){this.updatePixelPosition()},p.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},p.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(p.Property.POSITION)&&this.autoPan&&this.panIntoView()},p.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},p.prototype.setElement=function(t){this.set(p.Property.ELEMENT,t)},p.prototype.setMap=function(t){this.set(p.Property.MAP,t)},p.prototype.setOffset=function(t){this.set(p.Property.OFFSET,t)},p.prototype.setPosition=function(t){this.set(p.Property.POSITION,t)},p.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),n=this.getRect(i,[f.default.outerWidth(i),f.default.outerHeight(i)]),r=this.autoPanMargin;if(!h.default.containsExtent(e,n)){var a=n[0]-e[0],s=e[2]-n[2],l=n[1]-e[1],u=e[3]-n[3],d=[0,0];if(0>a?d[0]=a-r:0>s&&(d[0]=o(s)+r),0>l?d[1]=l-r:0>u&&(d[1]=o(u)+r),0!==d[0]||0!==d[1]){var c=t.getView().getCenter(),p=t.getPixelFromCoordinate(c),_=[p[0]+d[0],p[1]+d[1]];t.getView().animate({center:t.getCoordinateFromPixel(_),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},p.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[n,r,n+e[0],r+e[1]]},p.prototype.setPositioning=function(t){this.set(p.Property.POSITIONING,t)},p.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},p.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},p.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var a=n[0],s=n[1];if(o==u.default.BOTTOM_RIGHT||o==u.default.CENTER_RIGHT||o==u.default.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var l=r(e[0]-t[0]-a)+"px";this.rendered.right_!=l&&(this.rendered.right_=i.right=l)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),(o==u.default.BOTTOM_CENTER||o==u.default.CENTER_CENTER||o==u.default.TOP_CENTER)&&(a-=this.element.offsetWidth/2);var d=r(t[0]+a)+"px";this.rendered.left_!=d&&(this.rendered.left_=i.left=d)}if(o==u.default.BOTTOM_LEFT||o==u.default.BOTTOM_CENTER||o==u.default.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var f=r(e[1]-t[1]-s)+"px";this.rendered.bottom_!=f&&(this.rendered.bottom_=i.bottom=f)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),(o==u.default.CENTER_LEFT||o==u.default.CENTER_CENTER||o==u.default.CENTER_RIGHT)&&(s-=this.element.offsetHeight/2);var c=r(t[1]+s)+"px";this.rendered.top_!=c&&(this.rendered.top_=i.top=c)}},p.prototype.getOptions=function(){return this.options},p.Property={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(18)),l=(n(i(38)),n(i(179))),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,a.default)(e.HTML)));return(0,a.default)(t).append(i.getContainer()),i.isAddrSrch=!0,i.input=null,i.list=null,i.retention=null,i.clear=null,i.autoComplete=null,i.input=i.find(".srch input"),i.list=i.find(".srch ul"),i.retention=i.find("ul.retention"),i.clear=i.find(".srch .btn-x"),i.hookupEvents(i.input),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"zoom",value:function(){throw"Not implemented"}},{key:"featureAsLocation",value:function(){throw"Not implemented"}},{key:"val",value:function(t){return"string"==typeof t&&(this.input.val(t),this.clearBtn()),this.input.val()}},{key:"disambiguate",value:function(t){var e=this,i=t.possible;if(i.length){var n=this.list;this.emptyList(),i.forEach(function(t){n.append(e.listItem({layerName:"addr"},t))}),this.showList(!0)}}},{key:"setFeatures",value:function(t){var e=this;this.autoComplete=this.autoComplete||new l.default,t.nameField=t.nameField||"name",t.displayField=t.displayField||t.nameField,t.placeholder&&this.input.attr("placeholder",t.placeholder),this.sortAlphapetically(t).forEach(function(i){var n=e.featureAsLocation(i,t),r=e.listItem(t,n);e.retention.append(r)}),this.emptyList()}},{key:"removeFeatures",value:function(t){this.find("li."+t).remove()}},{key:"sortAlphapetically",value:function(t){var e=[];return t.features.forEach(function(t){t.get?e.push(a.default.extend({},t)):e.push(a.default.extend({get:function(t){return this.properties[t]}},t))}),e.sort(function(e,i){var n=t.nameField;return e.get(n)<i.get(n)?-1:e.get(n)>i.get(n)?1:0}),e}},{key:"listItem",value:function(t,e){var i=(0,a.default)("<li></li>"),n=t.displayField;return i.addClass(t.layerName),"addr"!==t.layerName&&i.addClass("feature"),i.addClass("notranslate").attr("translate","no").html(e.data[n]||e.name).data("nameField",t.nameField).data("displayField",n).data("location",e).click(a.default.proxy(this.disambiguated,this))}},{key:"emptyList",value:function(){this.retention.append(this.find(".srch li")),this.list.empty()}},{key:"disambiguated",value:function(t){var e=(0,a.default)(t.target);"LI"!==e.get(0).tagName.toUpperCase()&&(e=e.parent());var i=e.data("location");this.val(i.name),i.isFeature=e.hasClass("feature"),this.trigger("disambiguated",i),e.parent().slideUp(),this.emptyList()}},{key:"listClick",value:function(t){if(t=t.originalEvent||t,"block"===this.list.css("display")){var e=(0,a.default)(t.target);a.default.contains(this.list.get(0),e.get(0))?this.autoComplete&&e.trigger("click"):this.list.slideUp()}}},{key:"hookupEvents",value:function(t){t.on("keyup change",a.default.proxy(this.key,this)),t.focus(function(){return t.select()}),this.find(".btn-z-in, .btn-z-out").click(a.default.proxy(this.zoom,this)),this.find(".btn-geo").click(a.default.proxy(this.geolocate,this)),this.clear.click(a.default.proxy(this.clearTxt,this)),(0,a.default)(document).mouseup(a.default.proxy(this.listClick,this))}},{key:"key",value:function(t){13===t.keyCode&&this.isAddrSrch?(this.triggerSearch(),this.list.slideUp()):this.filterList(),this.clearBtn()}},{key:"clearTxt",value:function(){this.val(""),this.clearBtn()}},{key:"clearBtn",value:function(){this.clear[this.val()?"show":"hide"]()}},{key:"filterList",value:function(){var t=this.val().trim();this.autoComplete&&t?this.autoComplete.filter(this.retention,this.list,t):this.emptyList(),this.showList(!1)}},{key:"showList",value:function(t){var e=this;this.list.slideDown(function(){t&&e.list.children().first().attr("tabindex",0).focus()})}},{key:"geolocate",value:function(){this.val(""),this.trigger("geolocate")}},{key:"triggerSearch",value:function(){var t=this.val().trim();t.length&&(this.input.blur(),this.trigger("search",t))}}]),e}();u.FeatureSearchOptions,u.HTML='<div class="z-srch" role="toolbar"><div class="srch" role="search"><input class="rad-all" placeholder="Search for an address..."><button class="btn-rnd btn-x"><span class="screen-reader-only">Clear</span></button><ul class="rad-all"></ul></div><button class="btn-z-in btn-sq rad-all" data-zoom-incr="1" title="Zoom in"><span class="screen-reader-only">Zoom in</span></button><button class="btn-z-out btn-sq rad-all" data-zoom-incr="-1" title="Zoom out"><span class="screen-reader-only">Zoom out</span></button><button class="btn-geo btn-sq rad-all" title="Current location"><span class="screen-reader-only">Current location</span></button><ul class="retention"></ul></div>',e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(9)),l=n(i(18)),u=n(i(147)),d=n(i(182)),f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target));return i.choiceControls=[],i.source=t.source,t.choiceOptions.forEach(function(t){var e=(0,a.default)('<div class="'+s.default.nextId("filter")+'"></div>');t.target=t.target||(0,a.default)('<div class="'+s.default.nextId("filter-chc")+'"></div>'),i.append((0,a.default)(e));var n=new d.default(t);new u.default({target:e,title:t.title,content:n.getContainer()});n.on("change",a.default.proxy(i.filter,i)),i.choiceControls.push(n)}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default),o(e,[{key:"filter",value:function(){var t={},e=[];this.choiceControls.forEach(function(e){e.val().forEach(function(e){var i=t[e.name]||[];t[e.name]=i.concat(e.values)})}),Object.keys(t).forEach(function(i){e.push({property:i,values:t[i]})}),this.source.filter(e),this.trigger("change",this)}}]),e}();f.Options,f.ChoiceOptions,e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(102)),a=n(i(49)),s=function(t){o.default.call(this,t)};r.default.inherits(s,o.default),s.prototype.expireCache=function(t){for(var e,i;this.canExpireCache()&&!((i=(e=this.peekLast()).tileCoord[0].toString())in t&&t[i].contains(e.tileCoord));)this.pop().dispose()},s.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),e=a.default.fromKey(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(a.default.getKey(t.tileCoord)),t.dispose())},this)}},e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(20)),a=n(i(27)),s=n(i(39)),l=n(i(4)),u=function(t,e,i){s.default.call(this);var n=i||{};this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={}};r.default.inherits(u,s.default),u.prototype.changed=function(){this.dispatchEvent(l.default.CHANGE)},u.prototype.getKey=function(){return this.key+"/"+this.tileCoord},u.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==o.default.LOADED)return t;t=t.interimTile}while(t);return this},u.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==o.default.LOADED){t.interimTile=null;break}t.getState()==o.default.LOADING?e=t:t.getState()==o.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},u.prototype.getTileCoord=function(){return this.tileCoord},u.prototype.getState=function(){return this.state},u.prototype.setState=function(t){this.state=t,this.changed()},u.prototype.load=function(){},u.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var n=e-i+1e3/60;return n>=this.transition_?1:a.default.easeIn(n/this.transition_)},u.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},u.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(7)),a=n(i(32)),s=n(i(1)),l=n(i(75)),u=n(i(30)),d=n(i(211)),f=n(i(3)),c=n(i(66)),h=n(i(67)),p=n(i(210)),_=n(i(209)),g=n(i(14)),y=n(i(33)),v=function(t,e){h.default.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}};r.default.inherits(v,h.default),v.prototype.drawCoordinates_=function(t,e,i,n){var r,a,s,u,f,h,p,_,g=this.vertices.length,y=this.indices.length,m="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,E="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,b=d.default.lineStringIsClosed(t,e,i,n),C=y,T=1;for(r=e,a=i;r<a;r+=n){if(f=g/7,h=p,p=_||[t[r],t[r+1]],r===e){if(_=[t[r+n],t[r+n+1]],i-e==2*n&&o.default.equals(p,_))break;if(!b){E&&(g=this.addVertices_([0,0],p,_,T*v.Instruction_.BEGIN_LINE_CAP*E,g),g=this.addVertices_([0,0],p,_,-T*v.Instruction_.BEGIN_LINE_CAP*E,g),this.indices[y++]=f+2,this.indices[y++]=f,this.indices[y++]=f+1,this.indices[y++]=f+1,this.indices[y++]=f+3,this.indices[y++]=f+2),g=this.addVertices_([0,0],p,_,T*v.Instruction_.BEGIN_LINE*(E||1),g),C=(g=this.addVertices_([0,0],p,_,-T*v.Instruction_.BEGIN_LINE*(E||1),g))/7-1;continue}h=[t[i-2*n],t[i-2*n+1]],s=_}else{if(r===i-n){if(b){_=s;break}h=h||[0,0],g=this.addVertices_(h,p,[0,0],T*v.Instruction_.END_LINE*(E||1),g),g=this.addVertices_(h,p,[0,0],-T*v.Instruction_.END_LINE*(E||1),g),this.indices[y++]=f,this.indices[y++]=C-1,this.indices[y++]=C,this.indices[y++]=C,this.indices[y++]=f+1,this.indices[y++]=f,E&&(g=this.addVertices_(h,p,[0,0],T*v.Instruction_.END_LINE_CAP*E,g),g=this.addVertices_(h,p,[0,0],-T*v.Instruction_.END_LINE_CAP*E,g),this.indices[y++]=f+2,this.indices[y++]=f,this.indices[y++]=f+1,this.indices[y++]=f+1,this.indices[y++]=f+3,this.indices[y++]=f+2);break}_=[t[r+n],t[r+n+1]]}u=c.default.triangleIsCounterClockwise(h[0],h[1],p[0],p[1],_[0],_[1])?-1:1,g=this.addVertices_(h,p,_,u*v.Instruction_.BEVEL_FIRST*(m||1),g),g=this.addVertices_(h,p,_,u*v.Instruction_.BEVEL_SECOND*(m||1),g),g=this.addVertices_(h,p,_,-u*v.Instruction_.MITER_BOTTOM*(m||1),g),r>e&&(this.indices[y++]=f,this.indices[y++]=C-1,this.indices[y++]=C,this.indices[y++]=f+2,this.indices[y++]=f,this.indices[y++]=0<T*u?C:C-1),this.indices[y++]=f,this.indices[y++]=f+2,this.indices[y++]=f+1,C=f+2,T=u,m&&(g=this.addVertices_(h,p,_,u*v.Instruction_.MITER_TOP*m,g),this.indices[y++]=f+1,this.indices[y++]=f+3,this.indices[y++]=f)}b&&(f=f||g/7,u=l.default.linearRingIsClockwise([h[0],h[1],p[0],p[1],_[0],_[1]],0,6,2)?1:-1,g=this.addVertices_(h,p,_,u*v.Instruction_.BEVEL_FIRST*(m||1),g),g=this.addVertices_(h,p,_,-u*v.Instruction_.MITER_BOTTOM*(m||1),g),this.indices[y++]=f,this.indices[y++]=C-1,this.indices[y++]=C,this.indices[y++]=f+1,this.indices[y++]=f,this.indices[y++]=0<T*u?C:C-1)},v.prototype.addVertices_=function(t,e,i,n,r){return this.vertices[r++]=t[0],this.vertices[r++]=t[1],this.vertices[r++]=e[0],this.vertices[r++]=e[1],this.vertices[r++]=i[0],this.vertices[r++]=i[1],this.vertices[r++]=n,r},v.prototype.isValid_=function(t,e,i,n){var r=i-e;if(r<2*n)return!1;if(r==2*n){var a=[t[e],t[e+1]],s=[t[e+n],t[e+n+1]];return!o.default.equals(a,s)}return!0},v.prototype.drawLineString=function(t,e){var i=t.getFlatCoordinates(),n=t.getStride();this.isValid_(i,0,i.length,n)&&(i=u.default.translate(i,0,i.length,n,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(i,0,i.length,n))},v.prototype.drawMultiLineString=function(t,e){var i=this.indices.length,n=t.getEnds();n.unshift(0);var r,o,a=t.getFlatCoordinates(),s=t.getStride();if(1<n.length)for(r=1,o=n.length;r<o;++r)if(this.isValid_(a,n[r-1],n[r],s)){var l=u.default.translate(a,n[r-1],n[r],s,-this.origin[0],-this.origin[1]);this.drawCoordinates_(l,0,l.length,s)}this.indices.length>i&&(this.startIndices.push(i),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1))},v.prototype.drawPolygonCoordinates=function(t,e,i){var n,r;if(d.default.lineStringIsClosed(t,0,t.length,i)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,i),e.length)for(n=0,r=e.length;n<r;++n)d.default.lineStringIsClosed(e[n],0,e[n].length,i)||(e[n].push(e[n][0]),e[n].push(e[n][1])),this.drawCoordinates_(e[n],0,e[n].length,i)},v.prototype.setPolygonStyle=function(t,e){var i=void 0===e?this.indices.length:e;this.startIndices.push(i),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1)},v.prototype.getCurrentIndex=function(){return this.indices.length},v.prototype.finish=function(){this.verticesBuffer=new y.default(this.vertices),this.indicesBuffer=new y.default(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&0<this.styles_.length&&(this.styles_=[]),this.vertices=null,this.indices=null},v.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},v.prototype.setUpProgram=function(t,e,i,n){var r,o;r=p.default.fragment,o=p.default.vertex;var a,s=e.getProgram(r,o);return this.defaultLocations_?a=this.defaultLocations_:(a=new _.default(t,s),this.defaultLocations_=a),e.useProgram(s),t.enableVertexAttribArray(a.a_lastPos),t.vertexAttribPointer(a.a_lastPos,2,g.default.FLOAT,!1,28,0),t.enableVertexAttribArray(a.a_position),t.vertexAttribPointer(a.a_position,2,g.default.FLOAT,!1,28,8),t.enableVertexAttribArray(a.a_nextPos),t.vertexAttribPointer(a.a_nextPos,2,g.default.FLOAT,!1,28,16),t.enableVertexAttribArray(a.a_direction),t.vertexAttribPointer(a.a_direction,1,g.default.FLOAT,!1,28,24),t.uniform2fv(a.u_size,i),t.uniform1f(a.u_pixelRatio,n),a},v.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},v.prototype.drawReplay=function(t,e,i,n){var r,o,a,s,l=t.getParameter(t.DEPTH_FUNC),u=t.getParameter(t.DEPTH_WRITEMASK);if(n||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),f.default.isEmpty(i))for(a=this.startIndices[this.startIndices.length-1],r=this.styleIndices_.length-1;0<=r;--r)o=this.styleIndices_[r],s=this.styles_[r],this.setStrokeStyle_(t,s[0],s[1],s[2]),this.drawElements(t,e,o,a),t.clear(t.DEPTH_BUFFER_BIT),a=o;else this.drawReplaySkipping_(t,e,i);n||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(u),t.depthFunc(l))},v.prototype.drawReplaySkipping_=function(t,e,i){var n,o,a,s,l,u,d,f;for(d=this.startIndices.length-2,a=o=this.startIndices[d+1],n=this.styleIndices_.length-1;0<=n;--n){for(s=this.styles_[n],this.setStrokeStyle_(t,s[0],s[1],s[2]),l=this.styleIndices_[n];0<=d&&this.startIndices[d]>=l;)f=this.startIndices[d],u=this.startIndicesFeature[d],i[r.default.getUid(u).toString()]&&(o!==a&&(this.drawElements(t,e,o,a),t.clear(t.DEPTH_BUFFER_BIT)),a=f),d--,o=f;o!==a&&(this.drawElements(t,e,o,a),t.clear(t.DEPTH_BUFFER_BIT)),o=a=l}},v.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,n,o){var a,l,u,d,f,c,h;for(h=this.startIndices.length-2,u=this.startIndices[h+1],a=this.styleIndices_.length-1;0<=a;--a)for(d=this.styles_[a],this.setStrokeStyle_(t,d[0],d[1],d[2]),f=this.styleIndices_[a];0<=h&&this.startIndices[h]>=f;){if(l=this.startIndices[h],c=this.startIndicesFeature[h],void 0===i[r.default.getUid(c).toString()]&&c.getGeometry()&&(void 0===o||s.default.intersects(o,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,l,u);var p=n(c);if(p)return p}h--,u=l}},v.prototype.setStrokeStyle_=function(t,e,i,n){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i),t.uniform1f(this.defaultLocations_.u_miterLimit,n)},v.prototype.setFillStrokeStyle=function(t,e){var i=e.getLineCap();this.state_.lineCap=void 0===i?c.default.defaultLineCap:i;var n=e.getLineDash();this.state_.lineDash=n||c.default.defaultLineDash;var r=e.getLineDashOffset();this.state_.lineDashOffset=r||c.default.defaultLineDashOffset;var s=e.getLineJoin();this.state_.lineJoin=void 0===s?c.default.defaultLineJoin:s;var l=e.getColor();l=l instanceof CanvasGradient||l instanceof CanvasPattern?c.default.defaultStrokeStyle:a.default.asArray(l).map(function(t,e){return 3==e?t:t/255})||c.default.defaultStrokeStyle;var u=e.getWidth();u=void 0===u?c.default.defaultLineWidth:u;var d=e.getMiterLimit();d=void 0===d?c.default.defaultMiterLimit:d,this.state_.strokeColor&&o.default.equals(this.state_.strokeColor,l)&&this.state_.lineWidth===u&&this.state_.miterLimit===d||(this.state_.changed=!0,this.state_.strokeColor=l,this.state_.lineWidth=u,this.state_.miterLimit=d,this.styles_.push([l,u,d]))},v.Instruction_={ROUND:2,BEGIN_LINE:3,END_LINE:5,BEGIN_LINE_CAP:7,END_LINE_CAP:11,BEVEL_FIRST:13,BEVEL_SECOND:17,MITER_BOTTOM:19,MITER_TOP:23},e.default=v},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(1)),a=n(i(3)),s=n(i(213)),l=n(i(212)),u=n(i(67)),d=n(i(14)),f=n(i(65)),c=function(t,e){u.default.call(this,t,e),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0};r.default.inherits(c,u.default),c.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,n=this.getTextures(!0),r=t.getGL();return function(){var o,a;if(!r.isContextLost())for(o=0,a=n.length;o<a;++o)r.deleteTexture(n[o]);t.deleteBuffer(e),t.deleteBuffer(i)}},c.prototype.drawCoordinates=function(t,e,i,n){var r,o,a,s,l,u,d=this.anchorX,f=this.anchorY,c=this.height,h=this.imageHeight,p=this.imageWidth,_=this.opacity,g=this.originX,y=this.originY,v=this.rotateWithView?1:0,m=-this.rotation,E=this.scale,b=this.width,C=Math.cos(m),T=Math.sin(m),x=this.indices.length,S=this.vertices.length;for(r=e;r<i;r+=n)l=t[r]-this.origin[0],u=t[r+1]-this.origin[1],o=S/8,a=-E*d,s=-E*(c-f),this.vertices[S++]=l,this.vertices[S++]=u,this.vertices[S++]=a*C-s*T,this.vertices[S++]=a*T+s*C,this.vertices[S++]=g/p,this.vertices[S++]=(y+c)/h,this.vertices[S++]=_,this.vertices[S++]=v,a=E*(b-d),s=-E*(c-f),this.vertices[S++]=l,this.vertices[S++]=u,this.vertices[S++]=a*C-s*T,this.vertices[S++]=a*T+s*C,this.vertices[S++]=(g+b)/p,this.vertices[S++]=(y+c)/h,this.vertices[S++]=_,this.vertices[S++]=v,a=E*(b-d),s=E*f,this.vertices[S++]=l,this.vertices[S++]=u,this.vertices[S++]=a*C-s*T,this.vertices[S++]=a*T+s*C,this.vertices[S++]=(g+b)/p,this.vertices[S++]=y/h,this.vertices[S++]=_,this.vertices[S++]=v,a=-E*d,s=E*f,this.vertices[S++]=l,this.vertices[S++]=u,this.vertices[S++]=a*C-s*T,this.vertices[S++]=a*T+s*C,this.vertices[S++]=g/p,this.vertices[S++]=y/h,this.vertices[S++]=_,this.vertices[S++]=v,this.indices[x++]=o,this.indices[x++]=o+1,this.indices[x++]=o+2,this.indices[x++]=o,this.indices[x++]=o+2,this.indices[x++]=o+3;return S},c.prototype.createTextures=function(t,e,i,n){var o,a,s,l,u=e.length;for(l=0;l<u;++l)a=e[l],(s=r.default.getUid(a).toString())in i?o=i[s]:(o=f.default.createTexture(n,a,d.default.CLAMP_TO_EDGE,d.default.CLAMP_TO_EDGE),i[s]=o),t[l]=o},c.prototype.setUpProgram=function(t,e){var i,n=s.default.fragment,r=s.default.vertex,o=e.getProgram(n,r);return this.defaultLocations?i=this.defaultLocations:(i=new l.default(t,o),this.defaultLocations=i),e.useProgram(o),t.enableVertexAttribArray(i.a_position),t.vertexAttribPointer(i.a_position,2,d.default.FLOAT,!1,32,0),t.enableVertexAttribArray(i.a_offsets),t.vertexAttribPointer(i.a_offsets,2,d.default.FLOAT,!1,32,8),t.enableVertexAttribArray(i.a_texCoord),t.vertexAttribPointer(i.a_texCoord,2,d.default.FLOAT,!1,32,16),t.enableVertexAttribArray(i.a_opacity),t.vertexAttribPointer(i.a_opacity,1,d.default.FLOAT,!1,32,24),t.enableVertexAttribArray(i.a_rotateWithView),t.vertexAttribPointer(i.a_rotateWithView,1,d.default.FLOAT,!1,32,28),i},c.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},c.prototype.drawReplay=function(t,e,i,n){var r,o,s,l=n?this.getHitDetectionTextures():this.getTextures(),u=n?this.hitDetectionGroupIndices:this.groupIndices;if(a.default.isEmpty(i))for(r=0,o=l.length,s=0;r<o;++r){t.bindTexture(d.default.TEXTURE_2D,l[r]);var f=u[r];this.drawElements(t,e,s,f),s=f}else this.drawReplaySkipping(t,e,i,l,u)},c.prototype.drawReplaySkipping=function(t,e,i,n,o){var a,s,l=0;for(a=0,s=n.length;a<s;++a){t.bindTexture(d.default.TEXTURE_2D,n[a]);for(var u=0<a?o[a-1]:0,f=o[a],c=u,h=u;l<this.startIndices.length&&this.startIndices[l]<=f;){var p=this.startIndicesFeature[l];void 0===i[r.default.getUid(p).toString()]?h=l==this.startIndices.length-1?f:this.startIndices[l+1]:(c!==h&&this.drawElements(t,e,c,h),h=c=l==this.startIndices.length-1?f:this.startIndices[l+1]),l++}c!==h&&this.drawElements(t,e,c,h)}},c.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,n,a){var s,l,u,f,c,h=this.startIndices.length-1,p=this.getHitDetectionTextures();for(s=p.length-1;0<=s;--s)for(t.bindTexture(d.default.TEXTURE_2D,p[s]),l=0<s?this.hitDetectionGroupIndices[s-1]:0,f=this.hitDetectionGroupIndices[s];0<=h&&this.startIndices[h]>=l;){if(u=this.startIndices[h],c=this.startIndicesFeature[h],void 0===i[r.default.getUid(c).toString()]&&c.getGeometry()&&(void 0===a||o.default.intersects(a,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,u,f);var _=n(c);if(_)return _}f=u,h--}},c.prototype.finish=function(){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},c.prototype.getTextures=function(){},c.prototype.getHitDetectionTextures=function(){},e.default=c},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={create:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},fromTransform:function(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}};e.default=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(13)),r=function(t){this.source_=t};r.prototype.getType=function(){},r.prototype.getSource=function(){return this.source_},r.prototype.isAnimated=n.default.FALSE,e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(7)),a=n(i(1)),s=n(i(3)),l=n(i(43)),u=n(i(116)),d=n(i(217)),f=n(i(214)),c=n(i(109)),h=n(i(208)),p=n(i(204)),_=function(t,e,i){u.default.call(this),this.maxExtent_=e,this.tolerance_=t,this.renderBuffer_=i,this.replaysByZIndex_={}};r.default.inherits(_,u.default),_.prototype.addDeclutter=function(){},_.prototype.getDeleteResourcesFunction=function(t){var e,i=[];for(e in this.replaysByZIndex_){var n,r=this.replaysByZIndex_[e];for(n in r)i.push(r[n].getDeleteResourcesFunction(t))}return function(){for(var t,e=i.length,n=0;n<e;n++)t=i[n].apply(this,arguments);return t}},_.prototype.finish=function(t){for(var e in this.replaysByZIndex_){var i,n=this.replaysByZIndex_[e];for(i in n)n[i].finish(t)}},_.prototype.getReplay=function(t,e){var i=void 0===t?"0":t.toString(),n=this.replaysByZIndex_[i];void 0===n&&(n={},this.replaysByZIndex_[i]=n);var r=n[e];void 0===r&&(r=new(0,_.BATCH_CONSTRUCTORS_[e])(this.tolerance_,this.maxExtent_),n[e]=r);return r},_.prototype.isEmpty=function(){return s.default.isEmpty(this.replaysByZIndex_)},_.prototype.replay=function(t,e,i,n,r,a,s,u){var d,f,c,h,p,_,g=Object.keys(this.replaysByZIndex_).map(Number);for(g.sort(o.default.numberSafeCompareFunction),d=0,f=g.length;d<f;++d)for(p=this.replaysByZIndex_[g[d].toString()],c=0,h=l.default.ORDER.length;c<h;++c)void 0!==(_=p[l.default.ORDER[c]])&&_.replay(t,e,i,n,r,a,s,u,void 0,!1)},_.prototype.replayHitDetection_=function(t,e,i,n,r,o,a,s,u,d,f){var c,h,p,_,g,y,v=Object.keys(this.replaysByZIndex_).map(Number);for(v.sort(function(t,e){return e-t}),c=0,h=v.length;c<h;++c)for(_=this.replaysByZIndex_[v[c].toString()],p=l.default.ORDER.length-1;0<=p;--p)if(void 0!==(g=_[l.default.ORDER[p]])&&(y=g.replay(t,e,i,n,r,o,a,s,u,d,f)))return y},_.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o,s,l,u,d){var f,c=e.getGL();return c.bindFramebuffer(c.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.renderBuffer_&&(f=a.default.buffer(a.default.createOrUpdateFromCoordinate(t),n*this.renderBuffer_)),this.replayHitDetection_(e,t,n,r,_.HIT_DETECTION_SIZE_,s,l,u,function(t){var e=new Uint8Array(4);if(c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,e),0<e[3]){var i=d(t);if(i)return i}},!0,f)},_.prototype.hasFeatureAtCoordinate=function(t,e,i,n,r,o,a,s,l){var u=e.getGL();return u.bindFramebuffer(u.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(e,t,n,r,_.HIT_DETECTION_SIZE_,a,s,l,function(){var t=new Uint8Array(4);return u.readPixels(0,0,1,1,u.RGBA,u.UNSIGNED_BYTE,t),0<t[3]},!1)},_.HIT_DETECTION_SIZE_=[1,1],_.BATCH_CONSTRUCTORS_={Circle:d.default,Image:f.default,LineString:c.default,Polygon:h.default,Text:p.default},e.default=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(1)),a=n(i(12)),s=n(i(53)),l=n(i(68)),u=n(i(114)),d=function(t,e,i,n,r,o,a){l.default.call(this),this.context_=t,this.center_=e,this.extent_=o,this.pixelRatio_=a,this.size_=r,this.rotation_=n,this.resolution_=i,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null};r.default.inherits(d,l.default),d.prototype.drawText_=function(t,e){var i=this.context_,n=t.getReplay(0,s.default.TEXT);n.setTextStyle(this.textStyle_),n.drawText(e,null),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)()},d.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},d.prototype.drawGeometry=function(t){switch(t.getType()){case a.default.POINT:this.drawPoint(t,null);break;case a.default.LINE_STRING:this.drawLineString(t,null);break;case a.default.POLYGON:this.drawPolygon(t,null);break;case a.default.MULTI_POINT:this.drawMultiPoint(t,null);break;case a.default.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case a.default.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case a.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case a.default.CIRCLE:this.drawCircle(t,null)}},d.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&o.default.intersects(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},d.prototype.drawGeometryCollection=function(t){var e,i,n=t.getGeometriesArray();for(e=0,i=n.length;e<i;++e)this.drawGeometry(n[e])},d.prototype.drawPoint=function(t,e){var i=this.context_,n=new u.default(1,this.extent_),r=n.getReplay(0,s.default.IMAGE);r.setImageStyle(this.imageStyle_),r.drawPoint(t,e),r.finish(i),r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},d.prototype.drawMultiPoint=function(t,e){var i=this.context_,n=new u.default(1,this.extent_),r=n.getReplay(0,s.default.IMAGE);r.setImageStyle(this.imageStyle_),r.drawMultiPoint(t,e),r.finish(i),r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},d.prototype.drawLineString=function(t,e){var i=this.context_,n=new u.default(1,this.extent_),r=n.getReplay(0,s.default.LINE_STRING);r.setFillStrokeStyle(null,this.strokeStyle_),r.drawLineString(t,e),r.finish(i),r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},d.prototype.drawMultiLineString=function(t,e){var i=this.context_,n=new u.default(1,this.extent_),r=n.getReplay(0,s.default.LINE_STRING);r.setFillStrokeStyle(null,this.strokeStyle_),r.drawMultiLineString(t,e),r.finish(i),r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},d.prototype.drawPolygon=function(t,e){var i=this.context_,n=new u.default(1,this.extent_),r=n.getReplay(0,s.default.POLYGON);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawPolygon(t,e),r.finish(i),r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},d.prototype.drawMultiPolygon=function(t,e){var i=this.context_,n=new u.default(1,this.extent_),r=n.getReplay(0,s.default.POLYGON);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawMultiPolygon(t,e),r.finish(i),r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},d.prototype.drawCircle=function(t,e){var i=this.context_,n=new u.default(1,this.extent_),r=n.getReplay(0,s.default.CIRCLE);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawCircle(t,e),r.finish(i),r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},d.prototype.setImageStyle=function(t){this.imageStyle_=t},d.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},d.prototype.setTextStyle=function(t){this.textStyle_=t},e.default=d},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){};i.prototype.getReplay=function(){},i.prototype.isEmpty=function(){},e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(7)),a=n(i(8)),s=n(i(1)),l=n(i(30)),u=n(i(3)),d=n(i(116)),f=n(i(53)),c=n(i(52)),h=n(i(226)),p=n(i(225)),_=n(i(224)),g=n(i(223)),y=n(i(43)),v=n(i(10)),m=function(t,e,i,n,r,o,s){d.default.call(this),this.declutterTree_=o,this.declutterGroup_=null,this.tolerance_=t,this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=i,this.renderBuffer_=s,this.replaysByZIndex_={},this.hitDetectionContext_=a.default.createCanvasContext2D(1,1),this.hitDetectionTransform_=v.default.create()};r.default.inherits(m,d.default),m.circleArrayCache_={0:[[!0]]},m.fillCircleArrayRowToMiddle_=function(t,e,i){var n,r=Math.floor(t.length/2);if(e>=r)for(n=r;n<e;n++)t[n][i]=!0;else if(e<r)for(n=e+1;n<r;n++)t[n][i]=!0},m.getCircleArray_=function(t){if(void 0!==m.circleArrayCache_[t])return m.circleArrayCache_[t];for(var e=2*t+1,i=Array(e),n=0;n<e;n++)i[n]=Array(e);for(var r=t,o=0,a=0;r>=o;)m.fillCircleArrayRowToMiddle_(i,t+r,t+o),m.fillCircleArrayRowToMiddle_(i,t+o,t+r),m.fillCircleArrayRowToMiddle_(i,t-o,t+r),m.fillCircleArrayRowToMiddle_(i,t-r,t+o),m.fillCircleArrayRowToMiddle_(i,t-r,t-o),m.fillCircleArrayRowToMiddle_(i,t-o,t-r),m.fillCircleArrayRowToMiddle_(i,t+o,t-r),m.fillCircleArrayRowToMiddle_(i,t+r,t-o),0<2*((a+=1+2*++o)-r)+1&&(a+=1-2*(r-=1));return m.circleArrayCache_[t]=i,i},m.replayDeclutter=function(t,e,i){for(var n,r=Object.keys(t).map(Number).sort(o.default.numberSafeCompareFunction),a={},s=0,l=r.length;s<l;++s)for(var u=0,d=(n=t[r[s].toString()]).length;u<d;){var f=n[u++],c=n[u++];f.replay(e,c,i,a)}},m.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=s.default.createEmpty()).push(1)),e},m.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},m.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],n=0,r=t.length;n<r;++n)if(t[n]in i)return!0;return!1},m.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e,i=this.replaysByZIndex_[t];for(e in i)i[e].finish()}},m.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,a,l){function u(t){for(var e=p.getImageData(0,0,c,c).data,i=0;i<c;i++)for(var n=0;n<c;n++)if(g[i][n]&&0<e[4*(n*c+i)+3]){var r;return _&&(E==f.default.IMAGE||E==f.default.TEXT)&&-1===_.indexOf(t)||(r=a(t)),r||void p.clearRect(0,0,c,c)}}var d,c=2*(n=Math.round(n))+1,h=v.default.compose(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),p=this.hitDetectionContext_;p.canvas.width!==c||p.canvas.height!==c?(p.canvas.width=c,p.canvas.height=c):p.clearRect(0,0,c,c),void 0!==this.renderBuffer_&&(d=s.default.createEmpty(),s.default.extendCoordinate(d,t),s.default.buffer(d,e*(this.renderBuffer_+n),d));var _,g=m.getCircleArray_(n);this.declutterTree_&&(_=this.declutterTree_.all().map(function(t){return t.value}));var E,b,C,T,x,S,R=Object.keys(this.replaysByZIndex_).map(Number);for(R.sort(o.default.numberSafeCompareFunction),b=R.length-1;0<=b;--b){var O=R[b].toString();for(T=this.replaysByZIndex_[O],C=y.default.ORDER.length-1;0<=C;--C)if(void 0!==(x=T[E=y.default.ORDER[C]]))if(!l||E!=f.default.IMAGE&&E!=f.default.TEXT){if(S=x.replayHitDetection(p,h,i,r,u,d))return S}else{var P=l[O];P?P.push(x,h.slice(0)):l[O]=[x,h.slice(0)]}}},m.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],n=e[1],r=e[2],o=e[3],a=[i,n,i,o,r,o,r,n];return l.default.transform2D(a,0,8,2,t,a),a},m.prototype.getReplay=function(t,e){var i=void 0===t?"0":t.toString(),n=this.replaysByZIndex_[i];void 0===n&&(n={},this.replaysByZIndex_[i]=n);var r=n[e];void 0===r&&(r=new(0,m.BATCH_CONSTRUCTORS_[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),n[e]=r);return r},m.prototype.getReplays=function(){return this.replaysByZIndex_},m.prototype.isEmpty=function(){return u.default.isEmpty(this.replaysByZIndex_)},m.prototype.replay=function(t,e,i,n,r,a){var s=Object.keys(this.replaysByZIndex_).map(Number);s.sort(o.default.numberSafeCompareFunction),t.save(),this.clip(t,e);var l,u,d,c,h,p,_=r||y.default.ORDER;for(l=0,u=s.length;l<u;++l){var g=s[l].toString();for(h=this.replaysByZIndex_[g],d=0,c=_.length;d<c;++d){var v=_[d];if(void 0!==(p=h[v]))if(!a||v!=f.default.IMAGE&&v!=f.default.TEXT)p.replay(t,e,i,n);else{var m=a[g];m?m.push(p,e.slice(0)):a[g]=[p,e.slice(0)]}}}t.restore()},m.BATCH_CONSTRUCTORS_={Circle:_.default,Default:c.default,Image:h.default,LineString:p.default,Polygon:_.default,Text:g.default},e.default=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.round;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(23)),s=n(i(82)),l=n(i(20)),u=n(i(17)),d=n(i(8)),f=n(i(1)),c=n(i(21)),h=n(i(123)),p=n(i(10)),_=function(t){h.default.call(this,t),this.context=null===this.context?null:d.default.createCanvasContext2D(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.tmpExtent=f.default.createEmpty(),this.tmpTileRange_=new s.default(0,0,0,0),this.imageTransform_=p.default.create(),this.zDirection=0};o.default.inherits(_,h.default),_.handles=function(t,e){return t===c.default.CANVAS&&e.getType()===a.default.TILE},_.create=function(t,e){return new _(e)},_.prototype.isDrawableTile_=function(t){var e=t.getState(),i=this.getLayer().getUseInterimTilesOnError();return e==l.default.LOADED||e==l.default.EMPTY||e==l.default.ERROR&&!i},_.prototype.prepareFrame=function(t,e){var i=t.pixelRatio,n=t.size,a=t.viewState,s=a.projection,d=a.resolution,c=a.center,h=this.getLayer(),_=h.getSource(),g=_.getRevision(),y=_.getTileGridForProjection(s),v=y.getZForResolution(d,this.zDirection),m=y.getResolution(v),E=r(d/m)||1,b=t.extent;if(void 0!==e.extent&&(b=f.default.getIntersection(b,e.extent)),f.default.isEmpty(b))return!1;var C=y.getTileRangeForExtentAndZ(b,v),T=y.getTileRangeExtent(v,C),x=_.getTilePixelRatio(i),S={};S[v]={};var R,O,P,I=this.createLoadedTileFinder(_,s,S),w=this.tmpExtent,L=this.tmpTileRange_,A=!1;for(O=C.minX;O<=C.maxX;++O)for(P=C.minY;P<=C.maxY;++P){if((R=_.getTile(v,O,P,i,s)).getState()==l.default.ERROR&&(h.getUseInterimTilesOnError()?0<h.getPreload()&&(A=!0):R.setState(l.default.LOADED)),this.isDrawableTile_(R)||(R=R.getInterimTile()),this.isDrawableTile_(R)){var M=o.default.getUid(this);if(R.getState()==l.default.LOADED){S[v][R.tileCoord.toString()]=R;var F=R.inTransition(M);!A&&(F||-1===this.renderedTiles.indexOf(R))&&(A=!0)}if(1===R.getAlpha(M,t.time))continue}var D=y.getTileCoordChildTileRange(R.tileCoord,L,w),N=!1;D&&(N=I(v+1,D)),N||y.forEachTileCoordParentTileRange(R.tileCoord,I,null,L,w)}var k=m*i/x*E,G=t.viewHints,j=G[u.default.ANIMATING]||G[u.default.INTERACTING];if(!(this.renderedResolution&&16<Date.now()-t.time&&j)&&(A||!this.renderedExtent_||!f.default.containsExtent(this.renderedExtent_,b)||this.renderedRevision!=g||E!=this.oversampling_||!j&&k!=this.renderedResolution)){var U=this.context;if(U){var B=_.getTilePixelSize(v,i,s),W=r(C.getWidth()*B[0]/E),z=r(C.getHeight()*B[1]/E),X=U.canvas;X.width!=W||X.height!=z?(this.oversampling_=E,X.width=W,X.height=z):(this.renderedExtent_&&!f.default.equals(T,this.renderedExtent_)&&U.clearRect(0,0,W,z),E=this.oversampling_)}this.renderedTiles.length=0;var Y,H,V,K,Z,q,J,Q,$,tt,et=Object.keys(S).map(Number);for(et.sort(function(t,e){return t===v?1:e===v?-1:t>e?1:t<e?-1:0}),K=0,Z=et.length;K<Z;++K)for(var it in V=et[K],H=_.getTilePixelSize(V,i,s),Y=y.getResolution(V)/m,J=x*_.getGutter(s),Q=S[V])R=Q[it],O=((q=y.getTileCoordExtent(R.getTileCoord(),w))[0]-T[0])/m*x/E,P=(T[3]-q[3])/m*x/E,$=H[0]*Y/E,tt=H[1]*Y/E,this.drawTileImage(R,t,e,O,P,$,tt,J,v===V),this.renderedTiles.push(R);this.renderedRevision=g,this.renderedResolution=m*i/x*E,this.renderedExtent_=T}var nt=this.renderedResolution/d,rt=p.default.compose(this.imageTransform_,i*n[0]/2,i*n[1]/2,nt,nt,0,(this.renderedExtent_[0]-c[0])/this.renderedResolution*i,(c[1]-this.renderedExtent_[3])/this.renderedResolution*i);return p.default.compose(this.coordinateToCanvasPixelTransform,i*n[0]/2-rt[4],i*n[1]/2-rt[5],i/d,-i/d,0,-c[0],-c[1]),this.updateUsedTiles(t.usedTiles,_,v,C),this.manageTilePyramid(t,_,y,i,s,b,v,h.getPreload()),this.scheduleExpireCache(t,_),this.updateLogos(t,_),0<this.renderedTiles.length},_.prototype.drawTileImage=function(t,e,i,n,r,a,s,l,u){var d=t.getImage(this.getLayer());if(d){var f=o.default.getUid(this),c=u?t.getAlpha(f,e.time):1;1!==c||this.getLayer().getSource().getOpaque(e.viewState.projection)||this.context.clearRect(n,r,a,s);var h=c!==this.context.globalAlpha;h&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(d,l,l,d.width-2*l,d.height-2*l,n,r,a,s),h&&this.context.restore(),1===c?u&&t.endTransition(f):e.animate=!0}},_.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},_.prototype.getLayer,_.prototype.getImageTransform=function(){return this.imageTransform_},e.default=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(84)),a=n(i(5)),s=n(i(4)),l=n(i(1)),u=n(i(13)),d=n(i(46)),f=n(i(70)),c=n(i(153)),h=n(i(10)),p=function(t,e){o.default.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={}};r.default.inherits(p,o.default),p.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;h.default.compose(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),h.default.invert(h.default.setFromArray(n,i))},p.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},p.expireIconCache_=function(){c.default.iconImageCache.expire()},p.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o,a,s){function u(t,i){var a=r.default.getUid(t).toString(),s=e.layerStates[r.default.getUid(i)].managed;if(!(a in e.skippedFeatureUids)||s)return n.call(o,t,s?i:null)}var f,c=e.viewState,h=c.resolution,p=c.projection,_=t;if(p.canWrapX()){var g=p.getExtent(),y=l.default.getWidth(g),v=t[0];if(v<g[0]||v>g[2])_=[v+y*Math.ceil((g[0]-v)/y),t[1]]}var m,E=e.layerStatesArray;for(m=E.length-1;0<=m;--m){var b=E[m],C=b.layer;if(d.default.visibleAtResolution(b,h)&&a.call(s,C)){var T=this.getLayerRenderer(C);if(C.getSource()&&(f=T.forEachFeatureAtCoordinate(C.getSource().getWrapX()?_:t,e,i,u,o)),f)return f}}},p.prototype.forEachLayerAtPixel=function(){},p.prototype.hasFeatureAtCoordinate=function(t,e,i,n,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,u.default.TRUE,this,n,r)},p.prototype.getLayerRenderer=function(t){var e=r.default.getUid(t).toString();if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var i,n,o=f.default.getLayerRendererPlugins(),l=this.getType(),u=0,d=o.length;u<d;++u)if((n=o[u]).handles(l,t)){i=n.create(this,t);break}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=a.default.listen(i,s.default.CHANGE,this.handleLayerRendererChange_,this),i},p.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},p.prototype.getLayerRenderers=function(){return this.layerRenderers_},p.prototype.getMap=function(){return this.map_},p.prototype.getType=function(){},p.prototype.handleLayerRendererChange_=function(){this.map_.render()},p.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],a.default.unlistenByKey(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},p.prototype.renderFrame=r.default.nullFunction,p.prototype.removeUnusedLayerRenderers_=function(t,e){for(var i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},p.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(p.expireIconCache_)},p.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},p.sortByZIndex=function(t,e){return t.zIndex-e.zIndex},e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(50)),a=n(i(143)),s=n(i(20)),l=n(i(11)),u=n(i(5)),d=n(i(4)),f=n(i(13)),c=n(i(34)),h=function(t){a.default.call(this),this.layer_=t};r.default.inherits(h,a.default),h.prototype.forEachFeatureAtCoordinate=r.default.nullFunction,h.prototype.hasFeatureAtCoordinate=f.default.FALSE,h.prototype.createLoadedTileFinder=function(t,e,i){return function(n,r){return t.forEachLoadedTile(e,n,r,function(t){i[n]||(i[n]={}),i[n][t.tileCoord.toString()]=t})}},h.prototype.getLayer=function(){return this.layer_},h.prototype.handleImageChange_=function(t){t.target.getState()===o.default.LOADED&&this.renderIfReadyAndVisible()},h.prototype.loadImage=function(t){var e=t.getState();return e!=o.default.LOADED&&e!=o.default.ERROR&&u.default.listen(t,d.default.CHANGE,this.handleImageChange_,this),e==o.default.IDLE&&(t.load(),e=t.getState()),e==o.default.LOADED},h.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==c.default.READY&&this.changed()},h.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var n=r.default.getUid(t).toString();n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}},h.prototype.updateLogos=function(t,e){var i=e.getLogo();void 0!==i&&("string"==typeof i?t.logos[i]="":i&&(l.default.assert("string"==typeof i.href,44),l.default.assert("string"==typeof i.src,45),t.logos[i.src]=i.href))},h.prototype.updateUsedTiles=function(t,e,i,n){var o=r.default.getUid(e).toString(),a=i.toString();o in t?a in t[o]?t[o][a].extend(n):t[o][a]=n:(t[o]={},t[o][a]=n)},h.prototype.manageTilePyramid=function(t,e,i,n,o,a,l,u,d,f){var c=r.default.getUid(e).toString();c in t.wantedTiles||(t.wantedTiles[c]={});var h,p,_,g,y,v,m=t.wantedTiles[c],E=t.tileQueue;for(v=i.getMinZoom();v<=l;++v)for(p=i.getTileRangeForExtentAndZ(a,v,p),_=i.getResolution(v),g=p.minX;g<=p.maxX;++g)for(y=p.minY;y<=p.maxY;++y)l-v<=u?((h=e.getTile(v,g,y,n,o)).getState()==s.default.IDLE&&(m[h.getKey()]=!0,!E.isKeyQueued(h.getKey())&&E.enqueue([h,c,i.getTileCoordCenter(h.tileCoord),_])),void 0!==d&&d.call(f,h)):e.useTile(v,g,y,o)},e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.round;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(7)),s=n(i(63)),l=n(i(1)),u=n(i(12)),d=n(i(24)),f=n(i(30)),c=n(i(19)),h=n(i(68)),p=n(i(25)),_=n(i(10)),g=function(t,e,i,n,r){h.default.call(this),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.viewRotation_=r,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageSnapToPixel_=!1,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=_.default.create()};o.default.inherits(g,h.default),g.prototype.drawImages_=function(t,e,i){if(this.image_){var n=f.default.transform2D(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var l,u,d=this.imageRotation_;for(this.imageRotateWithView_&&(d+=this.viewRotation_),l=0,u=n.length;l<u;l+=2){var c=n[l]-this.imageAnchorX_,h=n[l+1]-this.imageAnchorY_;if(this.imageSnapToPixel_&&(c=r(c),h=r(h)),0!==d||1!=this.imageScale_){var p=c+this.imageAnchorX_,g=h+this.imageAnchorY_;_.default.compose(a,p,g,this.imageScale_,this.imageScale_,d,-p,-g),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,h,this.imageWidth_,this.imageHeight_)}(0!==d||1!=this.imageScale_)&&o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},g.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=f.default.transform2D(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=n){var s=r[e]+this.textOffsetX_,l=r[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var u=_.default.compose(this.tmpLocalTransform_,s,l,this.textScale_,this.textScale_,a,-s,-l);o.setTransform.apply(o,u)}this.textStrokeState_&&o.strokeText(this.text_,s,l),this.textFillState_&&o.fillText(this.text_,s,l)}(0!==a||1!=this.textScale_)&&o.setTransform(1,0,0,1,0,0)}},g.prototype.moveToLineTo_=function(t,e,i,n,r){var o=this.context_,a=f.default.transform2D(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;r&&(s-=2);for(var l=2;l<s;l+=2)o.lineTo(a[l],a[l+1]);return r&&o.closePath(),i},g.prototype.drawRings_=function(t,e,i,n){var r,o;for(r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e},g.prototype.drawCircle=function(t){if(l.default.intersects(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=d.default.transform2D(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},g.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},g.prototype.drawGeometry=function(t){switch(t.getType()){case u.default.POINT:this.drawPoint(t);break;case u.default.LINE_STRING:this.drawLineString(t);break;case u.default.POLYGON:this.drawPolygon(t);break;case u.default.MULTI_POINT:this.drawMultiPoint(t);break;case u.default.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case u.default.MULTI_POLYGON:this.drawMultiPolygon(t);break;case u.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case u.default.CIRCLE:this.drawCircle(t)}},g.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&l.default.intersects(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},g.prototype.drawGeometryCollection=function(t){var e,i,n=t.getGeometriesArray();for(e=0,i=n.length;e<i;++e)this.drawGeometry(n[e])},g.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},g.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},g.prototype.drawLineString=function(t){if(l.default.intersects(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},g.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(l.default.intersects(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i,n,r=this.context_,o=t.getFlatCoordinates(),a=0,s=t.getEnds(),u=t.getStride();for(r.beginPath(),i=0,n=s.length;i<n;++i)a=this.moveToLineTo_(o,a,s[i],u,!1);r.stroke()}if(""!==this.text_){var d=t.getFlatMidpoints();this.drawText_(d,0,d.length,2)}}},g.prototype.drawPolygon=function(t){if(l.default.intersects(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},g.prototype.drawMultiPolygon=function(t){if(l.default.intersects(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e,i,n=this.context_,r=t.getOrientedFlatCoordinates(),o=0,a=t.getEndss(),s=t.getStride();for(n.beginPath(),e=0,i=a.length;e<i;++e){var u=a[e];o=this.drawRings_(r,o,u,s)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(""!==this.text_){var d=t.getFlatInteriorPoints();this.drawText_(d,0,d.length,2)}}},g.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},g.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),c.default.CANVAS_LINE_DASH&&(!a.default.equals(i.lineDash,t.lineDash)&&e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,c.default.CANVAS_LINE_DASH&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},g.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:p.default.defaultTextAlign;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=n&&(i.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},g.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:s.default.asColorLike(i||p.default.defaultFillStyle)}}else this.fillState_=null;if(e){var n=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),l=e.getLineJoin(),u=e.getWidth(),d=e.getMiterLimit();this.strokeState_={lineCap:void 0===r?p.default.defaultLineCap:r,lineDash:o||p.default.defaultLineDash,lineDashOffset:a||p.default.defaultLineDashOffset,lineJoin:void 0===l?p.default.defaultLineJoin:l,lineWidth:this.pixelRatio_*(void 0===u?p.default.defaultLineWidth:u),miterLimit:void 0===d?p.default.defaultMiterLimit:d,strokeStyle:s.default.asColorLike(n||p.default.defaultStrokeStyle)}}else this.strokeState_=null},g.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),n=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageSnapToPixel_=t.getSnapToPixel(),this.imageWidth_=r[0]}else this.image_=null},g.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:s.default.asColorLike(i||p.default.defaultFillStyle)}}else this.textFillState_=null;var n=t.getStroke();if(n){var r=n.getColor(),o=n.getLineCap(),a=n.getLineDash(),l=n.getLineDashOffset(),u=n.getLineJoin(),d=n.getWidth(),f=n.getMiterLimit();this.textStrokeState_={lineCap:void 0===o?p.default.defaultLineCap:o,lineDash:a||p.default.defaultLineDash,lineDashOffset:l||p.default.defaultLineDashOffset,lineJoin:void 0===u?p.default.defaultLineJoin:u,lineWidth:void 0===d?p.default.defaultLineWidth:d,miterLimit:void 0===f?p.default.defaultMiterLimit:f,strokeStyle:s.default.asColorLike(r||p.default.defaultStrokeStyle)}}else this.textStrokeState_=null;var c=t.getFont(),h=t.getOffsetX(),_=t.getOffsetY(),g=t.getRotateWithView(),y=t.getRotation(),v=t.getScale(),m=t.getText(),E=t.getTextAlign(),b=t.getTextBaseline();this.textState_={font:void 0===c?p.default.defaultFont:c,textAlign:void 0===E?p.default.defaultTextAlign:E,textBaseline:void 0===b?p.default.defaultTextBaseline:b},this.text_=void 0===m?"":m,this.textOffsetX_=void 0===h?0:this.pixelRatio_*h,this.textOffsetY_=void 0===_?0:this.pixelRatio_*_,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===y?0:y,this.textScale_=this.pixelRatio_*(void 0===v?1:v)}else this.text_=""},e.default=g},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(1)),a=n(i(13)),s=n(i(69)),l=n(i(45)),u=n(i(25)),d=n(i(121)),f=n(i(120)),c=n(i(10)),h=function(t){f.default.call(this,t),this.renderedResolution,this.transform_=c.default.create()};r.default.inherits(h,f.default),h.prototype.clip=function(t,e,i){var n=e.pixelRatio,r=e.size[0]*n,a=e.size[1]*n,s=e.viewState.rotation,l=o.default.getTopLeft(i),d=o.default.getTopRight(i),f=o.default.getBottomRight(i),h=o.default.getBottomLeft(i);c.default.apply(e.coordinateToPixelTransform,l),c.default.apply(e.coordinateToPixelTransform,d),c.default.apply(e.coordinateToPixelTransform,f),c.default.apply(e.coordinateToPixelTransform,h),t.save(),u.default.rotateAtOffset(t,-s,r/2,a/2),t.beginPath(),t.moveTo(l[0]*n,l[1]*n),t.lineTo(d[0]*n,d[1]*n),t.lineTo(f[0]*n,f[1]*n),t.lineTo(h[0]*n,h[1]*n),t.clip(),u.default.rotateAtOffset(t,s,r/2,a/2)},h.prototype.dispatchComposeEvent_=function(t,e,i,n){var r=this.getLayer();if(r.hasListener(t)){var o=i.size[0]*i.pixelRatio,a=i.size[1]*i.pixelRatio,l=i.viewState.rotation;u.default.rotateAtOffset(e,-l,o/2,a/2);var f=void 0===n?this.getTransform(i,0):n,c=new d.default(e,i.pixelRatio,i.extent,f,i.viewState.rotation),h=new s.default(t,c,i,e,null);r.dispatchEvent(h),u.default.rotateAtOffset(e,l,o/2,a/2)}},h.prototype.forEachLayerAtCoordinate=function(t,e,i,n){return this.forEachFeatureAtCoordinate(t,e,0,a.default.TRUE,this)?i.call(n,this.getLayer(),null):void 0},h.prototype.postCompose=function(t,e,i,n){this.dispatchComposeEvent_(l.default.POSTCOMPOSE,t,e,n)},h.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(l.default.PRECOMPOSE,t,e,i)},h.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(l.default.RENDER,t,e,i)},h.prototype.getTransform=function(t,e){var i=t.viewState,n=t.pixelRatio,r=n*t.size[0]/2,o=n*t.size[1]/2,a=n/i.resolution,s=-i.rotation,l=-i.center[0]+e,u=-i.center[1];return c.default.compose(this.transform_,r,o,a,-a,s,l,u)},h.prototype.composeFrame=function(){},h.prototype.prepareFrame=function(){},e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.round;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(55)),s=n(i(8)),l=n(i(1)),u=n(i(122)),d=n(i(10)),f=function(t){u.default.call(this,t),this.coordinateToCanvasPixelTransform=d.default.create(),this.hitCanvasContext_=null};o.default.inherits(f,u.default),f.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var n=this.getImage();if(n){var o=e.extent,a=void 0!==o&&!l.default.containsExtent(o,t.extent)&&l.default.intersects(o,t.extent);a&&this.clip(i,t,o);var s=this.getImageTransform(),u=i.globalAlpha;i.globalAlpha=e.opacity;var d=s[4],f=s[5],c=n.width*s[0],h=n.height*s[3];i.drawImage(n,0,0,+n.width,+n.height,r(d),r(f),r(c),r(h)),i.globalAlpha=u,a&&i.restore()}this.postCompose(i,t,e)},f.prototype.getImage=function(){},f.prototype.getImageTransform=function(){},f.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){var o=this.getLayer(),a=o.getSource(),s=e.viewState.resolution,l=e.viewState.rotation,u=e.skippedFeatureUids;return a.forEachFeatureAtCoordinate(t,s,l,i,u,function(t){return n.call(r,t,o)})},f.prototype.forEachLayerAtCoordinate=function(t,e,i,n){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==o.default.nullFunction)return u.default.prototype.forEachLayerAtCoordinate.apply(this,arguments);var r=d.default.apply(this.coordinateToCanvasPixelTransform,t.slice());a.default.scale(r,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=s.default.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),r[0],r[1],1,1,0,0,1,1);var l=this.hitCanvasContext_.getImageData(0,0,1,1).data;return 0<l[3]?i.call(n,this.getLayer(),l):void 0}},e.default=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={MAP_RENDERER:"MAP_RENDERER",LAYER_RENDERER:"LAYER_RENDERER"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.PI,o=Math.pow,a=Math.log,s=Math.sin,l=Math.cos,u=Math.max,d=Math.min;Object.defineProperty(e,"__esModule",{value:!0});var f=n(i(0)),c=n(i(256)),h=n(i(15)),p=n(i(255)),_=n(i(93)),g=n(i(17)),y=n(i(254)),v=n(i(7)),m=n(i(11)),E=n(i(55)),b=n(i(27)),C=n(i(1)),T=n(i(12)),x=n(i(35)),S=n(i(24)),R=n(i(6)),O=n(i(3)),P=n(i(16)),I=n(i(31)),w=function(t){h.default.call(this);var e=O.default.assign({},t);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=P.default.createProjection(e.projection,"EPSG:3857"),this.applyOptions_(e)};f.default.inherits(w,h.default),w.prototype.applyOptions_=function(t){var e={};e[y.default.CENTER]=void 0===t.center?null:t.center;var i=w.createResolutionConstraint_(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var n=w.createCenterConstraint_(t),r=i.constraint,o=w.createRotationConstraint_(t);this.constraints_={center:n,resolution:r,rotation:o},void 0===t.resolution?void 0!==t.zoom&&(e[y.default.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[y.default.RESOLUTION]=R.default.clamp(+(this.getResolution()||e[y.default.RESOLUTION]),this.minResolution_,this.maxResolution_))):e[y.default.RESOLUTION]=t.resolution,e[y.default.ROTATION]=void 0===t.rotation?0:t.rotation,this.setProperties(e),this.options_=t},w.prototype.getUpdatedOptions_=function(t){var e=O.default.assign({},this.options_);return void 0===e.resolution?e.zoom=this.getZoom():e.resolution=this.getResolution(),e.center=this.getCenter(),e.rotation=this.getRotation(),O.default.assign({},e,t)},w.prototype.animate=function(){var t,e=arguments.length;if(1<e&&"function"==typeof arguments[e-1]&&(t=arguments[e-1],--e),!this.isDef()){var i=arguments[e-1];return i.center&&this.setCenter(i.center),void 0!==i.zoom&&this.setZoom(i.zoom),void 0!==i.rotation&&this.setRotation(i.rotation),void(t&&t(!0))}for(var n=Date.now(),o=this.getCenter().slice(),a=this.getResolution(),s=this.getRotation(),l=[],u=0;u<e;++u){var d=arguments[u],f={start:n,complete:!1,anchor:d.anchor,duration:void 0===d.duration?1e3:d.duration,easing:d.easing||b.default.inAndOut};if(d.center&&(f.sourceCenter=o,f.targetCenter=d.center,o=f.targetCenter),void 0===d.zoom?d.resolution&&(f.sourceResolution=a,f.targetResolution=d.resolution,a=f.targetResolution):(f.sourceResolution=a,f.targetResolution=this.constrainResolution(this.maxResolution_,d.zoom-this.minZoom_,0),a=f.targetResolution),void 0!==d.rotation){f.sourceRotation=s;var c=R.default.modulo(d.rotation-s+r,2*r)-r;f.targetRotation=s+c,s=f.targetRotation}f.callback=t,w.isNoopAnimation(f)?f.complete=!0:n+=f.duration,l.push(f)}this.animations_.push(l),this.setHint(g.default.ANIMATING,1),this.updateAnimations_()},w.prototype.getAnimating=function(){return 0<this.hints_[g.default.ANIMATING]},w.prototype.getInteracting=function(){return 0<this.hints_[g.default.INTERACTING]},w.prototype.cancelAnimations=function(){this.setHint(g.default.ANIMATING,-this.hints_[g.default.ANIMATING]);for(var t,e=0,i=this.animations_.length;e<i;++e)(t=this.animations_[e])[0].callback&&t[0].callback(!1);this.animations_.length=0},w.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;0<=i;--i){for(var n,o=this.animations_[i],a=!0,s=0,l=o.length;s<l;++s)if(!(n=o[s]).complete){var u=t-n.start,d=0<n.duration?u/n.duration:1;1<=d?(n.complete=!0,d=1):a=!1;var f=n.easing(d);if(n.sourceCenter){var c=n.sourceCenter[0],h=n.sourceCenter[1],p=n.targetCenter[0],_=n.targetCenter[1];this.set(y.default.CENTER,[c+f*(p-c),h+f*(_-h)])}if(n.sourceResolution&&n.targetResolution){var v=1===f?n.targetResolution:n.sourceResolution+f*(n.targetResolution-n.sourceResolution);n.anchor&&this.set(y.default.CENTER,this.calculateCenterZoom(v,n.anchor)),this.set(y.default.RESOLUTION,v)}if(void 0!==n.sourceRotation&&void 0!==n.targetRotation){var m=1===f?R.default.modulo(n.targetRotation+r,2*r)-r:n.sourceRotation+f*(n.targetRotation-n.sourceRotation);n.anchor&&this.set(y.default.CENTER,this.calculateCenterRotate(m,n.anchor)),this.set(y.default.ROTATION,m)}if(e=!0,!n.complete)break}if(a){this.animations_[i]=null,this.setHint(g.default.ANIMATING,-1);var E=o[0].callback;E&&E(!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},w.prototype.calculateCenterRotate=function(t,e){var i,n=this.getCenter();return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],E.default.rotate(i,t-this.getRotation()),E.default.add(i,e)),i},w.prototype.calculateCenterZoom=function(t,e){var i,n=this.getCenter(),r=this.getResolution();void 0!==n&&void 0!==r&&(i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]);return i},w.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+f.default.getUid(this)+'"]',i=document.querySelector(e);if(i){var n=getComputedStyle(i);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},w.prototype.constrainCenter=function(t){return this.constraints_.center(t)},w.prototype.constrainResolution=function(t,e,i){return this.constraints_.resolution(t,e||0,i||0)},w.prototype.constrainRotation=function(t,e){return this.constraints_.rotation(t,e||0)},w.prototype.getCenter=function(){return this.get(y.default.CENTER)},w.prototype.getConstraints=function(){return this.constraints_},w.prototype.getHints=function(t){return void 0===t?this.hints_.slice():(t[0]=this.hints_[0],t[1]=this.hints_[1],t)},w.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();m.default.assert(i,1);var n=this.getResolution();m.default.assert(void 0!==n,2);var r=this.getRotation();return m.default.assert(void 0!==r,3),C.default.getForViewAndSize(i,n,r,e)},w.prototype.getMaxResolution=function(){return this.maxResolution_},w.prototype.getMinResolution=function(){return this.minResolution_},w.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},w.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},w.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},w.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},w.prototype.getProjection=function(){return this.projection_},w.prototype.getResolution=function(){return this.get(y.default.RESOLUTION)},w.prototype.getResolutions=function(){return this.resolutions_},w.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),n=C.default.getWidth(t)/i[0],r=C.default.getHeight(t)/i[1];return u(n,r)},w.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,n=this.minResolution_,r=a(i/n)/a(e);return function(t){return i/o(e,t*r)}},w.prototype.getRotation=function(){return this.get(y.default.ROTATION)},w.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,n=this.minResolution_,r=a(i/n)/a(e);return function(t){return a(i/t)/a(e)/r}},w.prototype.getState=function(){var t=this.getCenter(),e=this.getProjection(),i=this.getResolution(),n=this.getRotation();return{center:t.slice(),projection:void 0===e?null:e,resolution:i,rotation:n,zoom:this.getZoom()}},w.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},w.prototype.getZoomForResolution=function(t){var e,i,n=this.minZoom_||0;if(this.resolutions_){var r=v.default.linearFindNearest(this.resolutions_,t,1);n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+a(e/t)/a(i)},w.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},w.prototype.fit=function(t,e){var i,n=e||{},r=n.size;r||(r=this.getSizeFromViewport_()),t instanceof S.default?t.getType()===T.default.CIRCLE?(t=t.getExtent(),(i=x.default.fromExtent(t)).rotate(this.getRotation(),C.default.getCenter(t))):i=t:(m.default.assert(Array.isArray(t),24),m.default.assert(!C.default.isEmpty(t),25),i=x.default.fromExtent(t));var o,a=void 0===n.padding?[0,0,0,0]:n.padding,c=void 0===n.constrainResolution||n.constrainResolution,h=void 0!==n.nearest&&n.nearest;o=void 0===n.minResolution?void 0===n.maxZoom?0:this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):n.minResolution;for(var p=i.getFlatCoordinates(),_=this.getRotation(),g=l(-_),y=s(-_),v=1/0,E=1/0,b=-1/0,R=-1/0,O=i.getStride(),P=0,I=p.length;P<I;P+=O){var w=p[P]*g-p[P+1]*y,L=p[P]*y+p[P+1]*g;v=d(v,w),E=d(E,L),b=u(b,w),R=u(R,L)}var A=this.getResolutionForExtent([v,E,b,R],[r[0]-a[1]-a[3],r[1]-a[0]-a[2]]);if(A=isNaN(A)?o:u(A,o),c){var M=this.constrainResolution(A,0,0);!h&&M<A&&(M=this.constrainResolution(M,-1,0)),A=M}y=-y;var F=(v+b)/2,D=(E+R)/2,N=[(F+=(a[1]-a[3])/2*A)*g-(D+=(a[0]-a[2])/2*A)*y,D*g+F*y],k=n.callback?n.callback:f.default.nullFunction;void 0===n.duration?(this.setResolution(A),this.setCenter(N),setTimeout(k.bind(void 0,!0),0)):this.animate({resolution:A,center:N,duration:n.duration,easing:n.easing},k)},w.prototype.centerOn=function(t,e,i){var n=this.getRotation(),r=l(-n),o=s(-n),a=t[0]*r-t[1]*o,u=t[1]*r+t[0]*o,d=this.getResolution(),f=(a+=(e[0]/2-i[0])*d)*r-(u+=(i[1]-e[1]/2)*d)*(o=-o),c=u*r+a*o;this.setCenter([f,c])},w.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},w.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},w.prototype.setCenter=function(t){this.set(y.default.CENTER,t),this.getAnimating()&&this.cancelAnimations()},w.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},w.prototype.setResolution=function(t){this.set(y.default.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},w.prototype.setRotation=function(t){this.set(y.default.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},w.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},w.createCenterConstraint_=function(t){return void 0===t.extent?c.default.none:c.default.createExtent(t.extent)},w.createResolutionConstraint_=function(t){var e,i,n,r=void 0===t.minZoom?f.default.DEFAULT_MIN_ZOOM:t.minZoom,s=void 0===t.maxZoom?28:t.maxZoom,l=void 0===t.zoomFactor?2:t.zoomFactor;if(void 0!==t.resolutions){var d=t.resolutions;i=d[r],n=void 0===d[s]?d[d.length-1]:d[s],e=p.default.createSnapToResolutions(d)}else{var c=P.default.createProjection(t.projection,"EPSG:3857"),h=c.getExtent(),_=(h?u(C.default.getWidth(h),C.default.getHeight(h)):360*P.default.METERS_PER_UNIT[I.default.DEGREES]/c.getMetersPerUnit())/f.default.DEFAULT_TILE_SIZE/o(2,f.default.DEFAULT_MIN_ZOOM),g=_/o(2,28-f.default.DEFAULT_MIN_ZOOM);void 0===(i=t.maxResolution)?i=_/o(l,r):r=0,void 0===(n=t.minResolution)&&(n=void 0===t.maxZoom?g:void 0===t.maxResolution?_/o(l,s):i/o(l,s)),s=r+Math.floor(a(i/n)/a(l)),n=i/o(l,s-r),e=p.default.createSnapToPower(l,i,s-r)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:r,zoomFactor:l}},w.createRotationConstraint_=function(t){if(!(void 0!==t.enableRotation)||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?_.default.createSnapToZero():!1===e?_.default.none:"number"==typeof e?_.default.createSnapToN(e):_.default.none}return _.default.disable},w.isNoopAnimation=function(t){return!(t.sourceCenter&&t.targetCenter&&!E.default.equals(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)},e.default=w},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.abs;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(71)),s=function(t){var e={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};a.default.call(this,t,e),this.pointerMap=t.pointerMap,this.lastTouches=[]};o.default.inherits(s,a.default),s.POINTER_ID=1,s.POINTER_TYPE="mouse",s.DEDUP_DIST=25,s.prototype.isEventSimulatedFromTouch_=function(t){for(var e,i=this.lastTouches,n=t.clientX,o=t.clientY,a=0,l=i.length;a<l&&(e=i[a]);a++){var u=r(n-e[0]),d=r(o-e[1]);if(u<=s.DEDUP_DIST&&d<=s.DEDUP_DIST)return!0}return!1},s.prepareEvent=function(t,e){var i=e.cloneEvent(t,t),n=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),n()},i.pointerId=s.POINTER_ID,i.isPrimary=!0,i.pointerType=s.POINTER_TYPE,i},s.prototype.mousedown=function(t){if(!this.isEventSimulatedFromTouch_(t)){s.POINTER_ID.toString()in this.pointerMap&&this.cancel(t);var e=s.prepareEvent(t,this.dispatcher);this.pointerMap[s.POINTER_ID.toString()]=t,this.dispatcher.down(e,t)}},s.prototype.mousemove=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=s.prepareEvent(t,this.dispatcher);this.dispatcher.move(e,t)}},s.prototype.mouseup=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[s.POINTER_ID.toString()];if(e&&e.button===t.button){var i=s.prepareEvent(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}},s.prototype.mouseover=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=s.prepareEvent(t,this.dispatcher);this.dispatcher.enterOver(e,t)}},s.prototype.mouseout=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=s.prepareEvent(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}},s.prototype.cancel=function(t){var e=s.prepareEvent(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},s.prototype.cleanupMouse=function(){delete this.pointerMap[s.POINTER_ID.toString()]},e.default=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(130)),a=function(t,e,i,n,r){o.default.call(this,t,e,i.originalEvent,n,r),this.pointerEvent=i};r.default.inherits(a,o.default),e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(22)),a=function(t,e,i){o.default.call(this,t),this.map=e,this.frameState=void 0===i?null:i};r.default.inherits(a,o.default),e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(129)),a=function(t,e,i,n,r){o.default.call(this,t,e,r),this.originalEvent=i,this.pixel=e.getEventPixel(i),this.coordinate=e.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==n&&n};r.default.inherits(a,o.default),a.prototype.preventDefault=function(){o.default.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},a.prototype.stopPropagation=function(){o.default.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={IMAGE:"image",VECTOR:"vector"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(15)),a=n(i(132)),s=n(i(6)),l=n(i(3)),u=function(t){o.default.call(this);var e=l.default.assign({},t);e[a.default.OPACITY]=void 0===t.opacity?1:t.opacity,e[a.default.VISIBLE]=!(void 0!==t.visible)||t.visible,e[a.default.Z_INDEX]=void 0===t.zIndex?0:t.zIndex,e[a.default.MAX_RESOLUTION]=void 0===t.maxResolution?1/0:t.maxResolution,e[a.default.MIN_RESOLUTION]=void 0===t.minResolution?0:t.minResolution,this.setProperties(e),this.state_={layer:this,managed:!0},this.type};r.default.inherits(u,o.default),u.prototype.getType=function(){return this.type},u.prototype.getLayerState=function(){return this.state_.opacity=s.default.clamp(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex(),this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},u.prototype.getLayersArray=function(){},u.prototype.getLayerStatesArray=function(){},u.prototype.getExtent=function(){return this.get(a.default.EXTENT)},u.prototype.getMaxResolution=function(){return this.get(a.default.MAX_RESOLUTION)},u.prototype.getMinResolution=function(){return this.get(a.default.MIN_RESOLUTION)},u.prototype.getOpacity=function(){return this.get(a.default.OPACITY)},u.prototype.getSourceState=function(){},u.prototype.getVisible=function(){return this.get(a.default.VISIBLE)},u.prototype.getZIndex=function(){return this.get(a.default.Z_INDEX)},u.prototype.setExtent=function(t){this.set(a.default.EXTENT,t)},u.prototype.setMaxResolution=function(t){this.set(a.default.MAX_RESOLUTION,t)},u.prototype.setMinResolution=function(t){this.set(a.default.MIN_RESOLUTION,t)},u.prototype.setOpacity=function(t){this.set(a.default.OPACITY,t)},u.prototype.setVisible=function(t){this.set(a.default.VISIBLE,t)},u.prototype.setZIndex=function(t){this.set(a.default.Z_INDEX,t)},e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(96)),a=n(i(1)),s=n(i(3)),l=function(t){this.rbush_=(0,o.default)(t),this.items_={}};l.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[r.default.getUid(e)]=i},l.prototype.load=function(t,e){for(var i=Array(e.length),n=0,o=e.length;n<o;n++){var a=t[n],s=e[n],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};i[n]=l,this.items_[r.default.getUid(s)]=l}this.rbush_.load(i)},l.prototype.remove=function(t){var e=r.default.getUid(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},l.prototype.update=function(t,e){var i=this.items_[r.default.getUid(e)],n=[i.minX,i.minY,i.maxX,i.maxY];a.default.equals(n,t)||(this.remove(e),this.insert(t,e))},l.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},l.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},l.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},l.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},l.prototype.forEach_=function(t,e,i){for(var n,r=0,o=t.length;r<o;r++)if(n=e.call(i,t[r]))return n;return n},l.prototype.isEmpty=function(){return s.default.isEmpty(this.items_)},l.prototype.clear=function(){this.rbush_.clear(),this.items_={}},l.prototype.getExtent=function(t){var e=this.rbush_.data;return a.default.createOrUpdate(e.minX,e.minY,e.maxX,e.maxY,t)},l.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[0|e]=t.items_[0|e]},e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(271)),a=n(i(15)),s=n(i(16)),l=n(i(34)),u=function(t){a.default.call(this),this.projection_=s.default.get(t.projection),this.attributions_=null,this.attributions2_=this.adaptAttributions_(t.attributions),this.logo_=t.logo,this.state_=void 0===t.state?l.default.READY:t.state,this.wrapX_=void 0!==t.wrapX&&t.wrapX};r.default.inherits(u,a.default),u.prototype.adaptAttributions_=function(t){if(!t)return null;if(t instanceof o.default)return this.attributions_=[t],function(){return[t.getHTML()]};if(Array.isArray(t)){if(t[0]instanceof o.default){this.attributions_=t;var e=t.map(function(t){return t.getHTML()});return function(){return e}}return this.attributions_=t.map(function(t){return new o.default({html:t})}),function(){return t}}return"function"==typeof t?t:(this.attributions_=[new o.default({html:t})],function(){return[t]})},u.prototype.forEachFeatureAtCoordinate=r.default.nullFunction,u.prototype.getAttributions=function(){return this.attributions_},u.prototype.getAttributions2=function(){return this.attributions2_},u.prototype.getLogo=function(){return this.logo_},u.prototype.getProjection=function(){return this.projection_},u.prototype.getResolutions=function(){},u.prototype.getState=function(){return this.state_},u.prototype.getWrapX=function(){return this.wrapX_},u.prototype.refresh=function(){this.changed()},u.prototype.setAttributions=function(t){this.attributions2_=this.adaptAttributions_(t),this.changed()},u.prototype.setLogo=function(t){this.logo_=t},u.prototype.setState=function(t){this.state_=t,this.changed()},e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(7)),o=n(i(58)),a={linearRings:function(t,e,i,n,a,s,l){for(var u,d,f,c,h,p,_,g,y=a[s+1],v=[],m=0,E=i.length;m<E;++m)for(c=t[(g=i[m])-n],p=t[g-n+1],u=e;u<g;u+=n)h=t[u],_=t[u+1],(y<=p&&_<=y||p<=y&&y<=_)&&(f=(y-p)/(_-p)*(h-c)+c,v.push(f)),c=h,p=_;var b=NaN,C=-1/0;for(v.sort(r.default.numberSafeCompareFunction),c=v[0],u=1,d=v.length;u<d;++u){h=v[u];var T=Math.abs(h-c);T>C&&(f=(c+h)/2,o.default.linearRingsContainsXY(t,e,i,n,f,y)&&(b=f,C=T)),c=h}return isNaN(b)&&(b=a[s]),l?(l.push(b,y,C),l):[b,y,C]},linearRingss:function(t,e,i,n,r){var o,s,l=[];for(o=0,s=i.length;o<s;++o){var u=i[o];l=a.linearRings(t,e,u,n,r,2*o,l),e=u[u.length-1]}return l}};e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.sqrt;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(7)),s=n(i(1)),l=n(i(29)),u=n(i(12)),d=n(i(97)),f=n(i(35)),c=n(i(24)),h=n(i(76)),p=n(i(275)),_=n(i(59)),g=n(i(58)),y=n(i(37)),v=n(i(36)),m=n(i(136)),E=n(i(77)),b=n(i(75)),C=n(i(47)),T=function(t,e){c.default.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};o.default.inherits(T,c.default),T.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i,n,r=this.flatCoordinates.length;for(a.default.extend(this.flatCoordinates,t.getFlatCoordinates()),i=0,n=(e=t.getEnds().slice()).length;i<n;++i)e[i]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},T.prototype.clone=function(){for(var t=new T(null),e=this.endss_.length,i=Array(e),n=0;n<e;++n)i[n]=this.endss_[n].slice();return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),i),t},T.prototype.closestPointXY=function(t,e,i,n){return n<s.default.closestSquaredDistanceXY(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=r(_.default.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_.default.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},T.prototype.containsXY=function(t,e){return g.default.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},T.prototype.getArea=function(){return h.default.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},T.prototype.getCoordinates=function(t){var e;return void 0===t?e=this.flatCoordinates:(e=this.getOrientedFlatCoordinates().slice(),b.default.orientLinearRingss(e,0,this.endss_,this.stride,t)),v.default.coordinatesss(e,0,this.endss_,this.stride)},T.prototype.getEndss=function(){return this.endss_},T.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=p.default.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=m.default.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},T.prototype.getInteriorPoints=function(){var t=new d.default(null);return t.setFlatCoordinates(l.default.XYM,this.getFlatInteriorPoints().slice()),t},T.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;b.default.linearRingssAreOriented(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=b.default.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},T.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=C.default.quantizess(this.flatCoordinates,0,this.endss_,this.stride,r(t),e,0,i);var n=new T(null);return n.setFlatCoordinates(l.default.XY,e,i),n},T.prototype.getPolygon=function(t){if(0>t||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n,r,o=this.endss_[t].slice(),a=o[o.length-1];if(0!==e)for(n=0,r=o.length;n<r;++n)o[n]-=e;var s=new f.default(null);return s.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e,a),o),s},T.prototype.getPolygons=function(){var t,e,i,n,r=this.layout,o=this.flatCoordinates,a=this.endss_,s=[],l=0;for(t=0,e=a.length;t<e;++t){var u=a[t].slice(),d=u[u.length-1];if(0!==l)for(i=0,n=u.length;i<n;++i)u[i]-=l;var c=new f.default(null);c.setFlatCoordinates(r,o.slice(l,d),u),s.push(c),l=d}return s},T.prototype.getType=function(){return u.default.MULTI_POLYGON},T.prototype.intersectsExtent=function(t){return E.default.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},T.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=y.default.coordinatesss(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()}else this.setFlatCoordinates(l.default.XY,null,this.endss_)},T.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.endss_=i,this.changed()},T.prototype.setPolygons=function(t){var e,i,n,r=this.getLayout(),o=[],s=[];for(e=0,i=t.length;e<i;++e){var l=t[e];0===e&&(r=l.getLayout());var u,d,f=o.length;for(u=0,d=(n=l.getEnds()).length;u<d;++u)n[u]+=f;a.default.extend(o,l.getFlatCoordinates()),s.push(n)}this.setFlatCoordinates(r,o,s)},e.default=T},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(7)),a=n(i(1)),s=n(i(29)),l=n(i(12)),u=n(i(78)),d=n(i(24)),f=n(i(59)),c=n(i(37)),h=n(i(36)),p=n(i(141)),_=n(i(77)),g=n(i(47)),y=function(t,e){d.default.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};r.default.inherits(y,d.default),y.prototype.appendLineString=function(t){this.flatCoordinates?o.default.extend(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},y.prototype.clone=function(){var t=new y(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},y.prototype.closestPointXY=function(t,e,i,n){return n<a.default.closestSquaredDistanceXY(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(f.default.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),f.default.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},y.prototype.getCoordinateAtM=function(t,e,i){return this.layout!=s.default.XYM&&this.layout!=s.default.XYZM||0===this.flatCoordinates.length?null:p.default.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,t,void 0!==e&&e,void 0!==i&&i)},y.prototype.getCoordinates=function(){return h.default.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)},y.prototype.getEnds=function(){return this.ends_},y.prototype.getLineString=function(t){if(0>t||this.ends_.length<=t)return null;var e=new u.default(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},y.prototype.getLineStrings=function(){var t,e,i=this.flatCoordinates,n=this.ends_,r=this.layout,o=[],a=0;for(t=0,e=n.length;t<e;++t){var s=n[t],l=new u.default(null);l.setFlatCoordinates(r,i.slice(a,s)),o.push(l),a=s}return o},y.prototype.getFlatMidpoints=function(){var t,e,i=[],n=this.flatCoordinates,r=0,a=this.ends_,s=this.stride;for(t=0,e=a.length;t<e;++t){var l=a[t],u=p.default.lineString(n,r,l,s,.5);o.default.extend(i,u),r=l}return i},y.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=g.default.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i);var n=new y(null);return n.setFlatCoordinates(s.default.XY,e,i),n},y.prototype.getType=function(){return l.default.MULTI_LINE_STRING},y.prototype.intersectsExtent=function(t){return _.default.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,t)},y.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=c.default.coordinatess(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(s.default.XY,null,this.ends_)},y.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.ends_=i,this.changed()},y.prototype.setLineStrings=function(t){var e,i,n=this.getLayout(),r=[],a=[];for(e=0,i=t.length;e<i;++e){var s=t[e];0===e&&(n=s.getLayout()),o.default.extend(r,s.getFlatCoordinates()),a.push(r.length)}this.setFlatCoordinates(n,r,a)},e.default=y},function(t,e){"use strict";var i=Math.sqrt;Object.defineProperty(e,"__esModule",{value:!0});var n={lineString:function(t,e,n,r){var o,a=t[e],s=t[e+1],l=0;for(o=e+r;o<n;o+=r){var u=t[o],d=t[o+1];l+=i((u-a)*(u-a)+(d-s)*(d-s)),a=u,s=d}return l},linearRing:function(t,e,r,o){var a=n.lineString(t,e,r,o),s=t[r-o]-t[e],l=t[r-o+1]-t[e+1];return a+=i(s*s+l*l)}};e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={forEach:function(t,e,i,n,r,o){for(var a,s=[t[e],t[e+1]],l=[];e+n<i;e+=n){if(l[0]=t[e+n],l[1]=t[e+n+1],a=r.call(o,s,l))return a;s[0]=l[0],s[1]=l[1]}return!1}};e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(7)),o=n(i(6)),a={lineString:function(t,e,i,n,a,s){var l=NaN,u=NaN,d=(i-e)/n;if(1==d)l=t[e],u=t[e+1];else if(2==d)l=(1-a)*t[e]+a*t[e+n],u=(1-a)*t[e+1]+a*t[e+n+1];else if(0!=d){var f,c=t[e],h=t[e+1],p=0,_=[0];for(f=e+n;f<i;f+=n){var g=t[f],y=t[f+1];p+=Math.sqrt((g-c)*(g-c)+(y-h)*(y-h)),_.push(p),c=g,h=y}var v=a*p,m=r.default.binarySearch(_,v);if(0>m){var E=(v-_[-m-2])/(_[-m-1]-_[-m-2]),b=e+(-m-2)*n;l=o.default.lerp(t[b],t[b+n],E),u=o.default.lerp(t[b+1],t[b+n+1],E)}else l=t[e+m*n],u=t[e+m*n+1]}return s?(s[0]=l,s[1]=u,s):[l,u]},lineStringCoordinateAtM:function(t,e,i,n,r,a){if(i==e)return null;var s;if(r<t[e+n-1])return a?((s=t.slice(e,e+n))[n-1]=r,s):null;if(t[i-1]<r)return a?((s=t.slice(i-n,i))[n-1]=r,s):null;if(r==t[e+n-1])return t.slice(e,e+n);for(var l,u=e/n,d=i/n;u<d;)r<t[((l=u+d>>1)+1)*n-1]?d=l:u=l+1;var f=t[u*n-1];if(r==f)return t.slice((u-1)*n,(u-1)*n+n);var c,h=t[(u+1)*n-1];for(s=[],c=0;c<n-1;++c)s.push(o.default.lerp(t[(u-1)*n+c],t[u*n+c],(r-f)/(h-f)));return s.push(r),s},lineStringsCoordinateAtM:function(t,e,i,n,r,o,s){if(s)return a.lineStringCoordinateAtM(t,e,i[i.length-1],n,r,o);var l,u,d;if(r<t[n-1])return o?((l=t.slice(0,n))[n-1]=r,l):null;if(t[t.length-1]<r)return o?((l=t.slice(t.length-n))[n-1]=r,l):null;for(u=0,d=i.length;u<d;++u){var f=i[u];if(e!=f){if(r<t[e+n-1])return null;if(r<=t[f-1])return a.lineStringCoordinateAtM(t,e,f,n,r,!1);e=f}}return null}};e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(60)),a=n(i(98)),s=function(){o.default.call(this)};r.default.inherits(s,o.default),s.prototype.getObject_=function(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null===t?null:t},s.prototype.getType=function(){return a.default.JSON},s.prototype.readFeature=function(t,e){return this.readFeatureFromObject(this.getObject_(t),this.getReadOptions(t,e))},s.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(this.getObject_(t),this.getReadOptions(t,e))},s.prototype.readFeatureFromObject=function(){},s.prototype.readFeaturesFromObject=function(){},s.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(this.getObject_(t),this.getReadOptions(t,e))},s.prototype.readGeometryFromObject=function(){},s.prototype.readProjection=function(t){return this.readProjectionFromObject(this.getObject_(t))},s.prototype.readProjectionFromObject=function(){},s.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},s.prototype.writeFeatureObject=function(){},s.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},s.prototype.writeFeaturesObject=function(){},s.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},s.prototype.writeGeometryObject=function(){},e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(5)),a=n(i(39)),s=n(i(4)),l=function(){a.default.call(this),this.revision_=0};r.default.inherits(l,a.default),l.unByKey=function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)o.default.unlistenByKey(t[e]);else o.default.unlistenByKey(t)},l.prototype.changed=function(){++this.revision_,this.dispatchEvent(s.default.CHANGE)},l.prototype.dispatchEvent,l.prototype.getRevision=function(){return this.revision_},l.prototype.on=function(t,e,i){if(Array.isArray(t)){for(var n=t.length,r=Array(n),a=0;a<n;++a)r[a]=o.default.listen(this,t[a],e,i);return r}return o.default.listen(this,t,e,i)},l.prototype.once=function(t,e,i){if(Array.isArray(t)){for(var n=t.length,r=Array(n),a=0;a<n;++a)r[a]=o.default.listenOnce(this,t[a],e,i);return r}return o.default.listenOnce(this,t,e,i)},l.prototype.un=function(t,e,i){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)o.default.unlisten(this,t[n],e,i);else o.default.unlisten(this,t,e,i)},e.default=l},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(18)),l=function(e){function i(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e.target));return t.nycTranslateInstance=n,n.defaultLanguage=e.defaultLanguage||"en",n.button=e.button,n.languages=e.languages,n.hints=[],n.namedCodes={},n.code="",n.messages=e.messages,n.defaultMessages=null,n.messages&&(!n.messages[n.defaultLanguage]&&(n.defaultLanguage=n.defaultLang()),!n.messages[n.defaultLanguage]&&(n.defaultLanguage="en"),n.defaultMessages=n.messages[n.defaultLanguage]),n.code=n.defaultLanguage,n.render(e.target),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,s.default),o(i,[{key:"translate",value:function(t){var e=this,i=(0,a.default)(t.target).val();this.code=i,Object.keys(this.defaultMessages).forEach(function(t){var n=(e.messages[i]||e.defaultMessages)[t]||e.defaultMessages[t];(0,a.default)("."+t).html(n),(0,a.default)('*[data-msg-key="'+t+'"]').each(function(t,e){(0,a.default)(e).attr((0,a.default)(e).data("msg-attr"),n)})}),this.css("translated"),this.trigger("change",this)}},{key:"lang",value:function(){return this.code}},{key:"getCookieValue",value:function(){return""}},{key:"render",value:function(t){var e=this,n=[],r=(0,a.default)(i.HTML);(0,a.default)(t).append(r),Object.keys(this.languages).forEach(function(t){var i=e.languages[t].code,r=(0,a.default)("<option></option>").attr("value",i).html(e.languages[t].native);e.find("select").append(r),n.push(t),e.hints.push(e.languages[t].hint),e.namedCodes[i]=t}),this.codes=n.toString(),(0,a.default)("body").addClass("lang-en"),this.find("select").change(a.default.proxy(this.translate,this)),this.selectDefault(),this.showHint(),this.button&&(0,a.default)("#lng").addClass("button"),this.trigger("ready",this)}},{key:"css",value:function(t){var e=(0,a.default)("body");this.codes.split(",").forEach(function(t){e.removeClass("lang-"+t)}),e[this.code===this.defaultLanguage?"removeClass":"addClass"](t),e.addClass("lang-"+this.code),e.addClass(t)}},{key:"defaultLang",value:function(){return navigator.language.split("-")[0]}},{key:"selectDefault",value:function(){var t=this.defaultLang(),e=this.getCookieValue(),i=[],n=[];Object.values(this.languages).forEach(function(r){var o=r.code;0===e.indexOf(o)?i.push(o):0===e.indexOf(t)&&n.push(o)});var r=i[0]||n[0]||"en";this.find("select").val(this.languages[r].code).trigger("change")}},{key:"showHint",value:function(){var t=this;if(!this.button){var e=this.hints,i=0;setInterval(function(){t.find(".hint").html(e[i]||"Translate"),++i===e.length&&(i=0)},1e3)}}}]),i}();l.Options,l.Choice,l.Choices,l.DEFAULT_LANGUAGES={en:{code:"en",name:"English",native:"English",hint:"Translate"},ar:{code:"ar",name:"Arabic",native:"&#x627;&#x644;&#x639;&#x631;&#x628;&#x64A;&#x629;",hint:"&#x62A;&#x631;&#x62C;&#x645;"},bn:function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({code:"bn",name:"Bengali",native:"&#x9AC;&#x9BE;&#x999;&#x9BE;&#x9B2;&#x9BF;",hint:"&#x9AC;&#x9BE;&#x999;&#x9BE;&#x9B2;&#x9BF;"},"hint","&#x985;&#x9A8;&#x9C1;&#x9AC;&#x9BE;&#x9A6; &#x995;&#x9B0;&#x9BE;"),cn:{code:"cn",name:"Chinese",native:"&#x4E2D;&#x56FD;",hint:"&#x7FFB;&#x8BD1;"},fr:{code:"fr",name:"French",native:"Fran&#231;ais",hint:"Traduire"},ht:{code:"ht",name:"Hatian",native:"Krey&#242;l Ayisyen",hint:"Tradui"},ko:{code:"ko",name:"Korean",native:"&#xD55C;&#xAD6D;&#xC758;",hint:"&#xBC88;&#xC5ED;"},ru:{code:"ru",name:"Russian",native:"P&#x443;&#x441;&#x441;&#x43A;&#x438;&#x439;",hint:"&#x43F;&#x435;&#x440;&#x435;&#x432;&#x435;&#x441;&#x442;&#x438;"},es:{code:"es",name:"Spanish",native:"Espa&#241;ol",hint:"Traducir"},ur:{code:"ur",name:"Urdu",native:"&#x627;&#x631;&#x62F;&#x648;",hint:"&#x62A;&#x631;&#x62C;&#x645;&#x6C1; &#x6A9;&#x631;&#x6CC;&#x6BA;"}},l.HTML='<div id="lng"><button class="btn-sq rad-all"><span class ="hint notranslate">Translate</span><select class="notranslate" translate="no" title="Translate..." araia-label="Translate..."></select></button><div id="lng-goog"></div></div>',e.default=l}).call(this,i(64))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(function(t){t&&t.__esModule}(i(38)),function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"zoomLocation",value:function(){throw"Not implemented"}},{key:"setLocation",value:function(){throw"Not implemented"}}]),t}());r.ZOOM_LEVEL=17,e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(18)),l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,a.default)(e.HTML)));return(0,a.default)("body").append(i.getContainer().addClass(t)),i.okBtn=i.find(".btn-ok"),i.yesNoBtns=i.find(".btn-yes, .btn-no"),i.inputBtns=i.find(".btn-submit, .btn-cancel"),i.field=i.find("input"),i.msg=i.find(".dia-msg"),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"ok",value:function(t){this.buttons(e.Type.OK,t),this.show(e.Type.OK,t),this.okBtn.focus();var i=this,n=this.okBtn;return new Promise(function(t){n.one("click",function(){i.hide(),t(!0)})})}},{key:"input",value:function(t){var i=this.field;this.buttons(e.Type.INPUT,t),i.attr("placeholder",t.placeholder||""),this.show(e.Type.INPUT,t),i.focus();var n=this,r=this.inputBtns;return new Promise(function(t){var e=function(e){n.hndlKey(t,n,e)};(0,a.default)(document).keyup(e),r.one("click",function(r){var o=(0,a.default)(r.target).hasClass("btn-cancel");(0,a.default)(document).off("keyup",e),n.hide(),t(o?void 0:i.val())})})}},{key:"yesNo",value:function(t){this.buttons(e.Type.YES_NO,t),this.show(e.Type.YES_NO,t),this.find(".btn-yes").focus();var i=this,n=this.yesNoBtns;return new Promise(function(t){n.one("click",function(e){i.hide(),t((0,a.default)(e.target).hasClass("btn-yes"))})})}},{key:"yesNoCancel",value:function(t){this.buttons(e.Type.YES_NO_CANCEL,t),this.show(e.Type.YES_NO_CANCEL,t),this.find(".btn-yes").focus();var i=this,n=this.yesNoBtns,r=this.find(".btn-cancel");return new Promise(function(t){var e=function(e){i.hndlKey(t,i,e)};(0,a.default)(document).keyup(e),n.one("click",function(n){(0,a.default)(document).off("keyup",e),i.hide(),t((0,a.default)(n.target).hasClass("btn-yes"))}),r.one("click",function(){(0,a.default)(document).off("keyup",e),i.hide(),t(void 0)})})}},{key:"buttons",value:function(t,i){var n=i.buttonText||[],r=i.buttonHref||[];t===e.Type.OK?this.find(".btn-ok").html(n[0]||"OK").attr("href",r[0]||"#"):t===e.Type.INPUT?(this.find(".btn-submit").html(n[0]||"Submit").attr("href",r[0]||"#"),this.find(".btn-cancel").html(n[1]||"Cancel").attr("href",r[1]||"#")):t===e.Type.YES_NO?(this.find(".btn-yes").html(n[0]||"Yes").attr("href",r[0]||"#"),this.find(".btn-no").html(n[1]||"No").attr("href",r[1]||"#")):t===e.Type.YES_NO_CANCEL&&(this.find(".btn-yes").html(n[0]||"Yes").attr("href",r[0]||"#"),this.find(".btn-no").html(n[1]||"No").attr("href",r[1]||"#"),this.find(".btn-cancel").html(n[2]||"Cancel").attr("href",r[2]||"#"))}},{key:"show",value:function(t,i){var n;this.currentType=t,this.getContainer().removeClass("dia-3-btns"),this.find(".ui-link").removeClass("ui-link"),this.inputBtns.css("display",t===e.Type.INPUT?"inline-block":"none"),this.field.css("display",t===e.Type.INPUT?"block":"none"),this.okBtn.css("display",t===e.Type.OK?"inline-block":"none"),this.yesNoBtns.css("display",t===e.Type.YES_NO?"inline-block":"none"),t===e.Type.YES_NO_CANCEL&&(this.getContainer().addClass("dia-3-btns"),this.yesNoBtns.css("display","inline-block"),this.find(".btn-cancel").css("display","inline-block"));try{n=(0,a.default)(i.message)}catch(t){}n&&n.length?this.msg.html(n):this.msg.html(i.message),this.getContainer().fadeIn()}},{key:"hide",value:function(){var t=this.field;this.getContainer().fadeOut(function(){t.val("")})}},{key:"hndlKey",value:function(t,e,i){13===i.keyCode&&(0,a.default)(i.target).get(0)===e.field.get(0)?(e.hide(),t(e.field.val())):27===i.keyCode&&(e.hide(),t(void 0))}}]),e}();l.Type={OK:"ok",YES_NO:"yes-no",YES_NO_CANCEL:"yes-no-cancel",INPUT:"input"},l.Options,l.HTML='<div class="dia-container" role="dialog"><div class="dia"><div class="dia-msg"></div><input class="rad-all"><div class="dia-btns"><a class="btn rad-all btn-ok">OK</a><a class="btn rad-all btn-yes">Yes</a><a class="btn rad-all btn-no">No</a><a class="btn rad-all btn-submit">OK</a><a class="btn rad-all btn-cancel">Cancel</a></div></div></div>',e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(18)),l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target));return i.getContainer().append(e.HTML),i.btn=i.find("h3").append(t.title).click(a.default.proxy(i.toggle,i)),i.content=i.find(".content").append((0,a.default)(t.content)),t.collapsed&&(i.content.hide(),i.btn.removeClass("rad-top"),i.find("h3 button").addClass("expd")),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"toggle",value:function(){var t=this;"none"===this.content.css("display")?this.content.slideDown(function(){t.btn.addClass("rad-top"),t.trigger("change",t)}):this.content.slideUp(function(){t.btn.removeClass("rad-top"),t.trigger("change",t)}),this.find("h3 button").toggleClass("expd")}}]),e}();l.Options,l.HTML='<div class="clps rad-all"><h3 class="btn rad-all rad-top" role="button"><button class="btn-rnd"><span class="screen-reader-only">show/hide</span></button></h3><div class="content rad-bot"></div></div>',e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(83)),a=n(i(31)),s={Projection_:function(t,e){o.default.call(this,{code:t,units:a.default.DEGREES,extent:s.EXTENT,axisOrientation:e,global:!0,metersPerUnit:s.METERS_PER_UNIT,worldExtent:s.EXTENT})}};r.default.inherits(s.Projection_,o.default),s.RADIUS=6378137,s.EXTENT=[-180,-90,180,90],s.METERS_PER_UNIT=Math.PI*s.RADIUS/180,s.PROJECTIONS=[new s.Projection_("CRS:84"),new s.Projection_("EPSG:4326","neu"),new s.Projection_("urn:ogc:def:crs:EPSG::4326","neu"),new s.Projection_("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new s.Projection_("urn:ogc:def:crs:OGC:1.3:CRS84"),new s.Projection_("urn:ogc:def:crs:OGC:2:84"),new s.Projection_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new s.Projection_("urn:x-ogc:def:crs:EPSG:4326","neu")],e.default=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={cache_:null,set:function(t){i.cache_=t},get:function(){return i.cache_||window.proj4}};e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}
/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */var r=Math.atan2,o=Math.sqrt,a=Math.abs,s=Math.sin,l=Math.cos;Object.defineProperty(e,"__esModule",{value:!0});var u=n(i(6)),d=n(i(12)),f=function(t){this.radius=t};f.prototype.geodesicArea=function(t){return f.getArea_(t,this.radius)},f.prototype.haversineDistance=function(t,e){return f.getDistance_(t,e,this.radius)},f.prototype.offset=function(t,e,i){var n=u.default.toRadians(t[1]),o=u.default.toRadians(t[0]),a=e/this.radius,d=Math.asin(s(n)*l(a)+l(n)*s(a)*l(i)),f=o+r(s(i)*s(a)*l(n),l(a)-s(n)*s(d));return[u.default.toDegrees(f),u.default.toDegrees(d)]},f.DEFAULT_RADIUS=6371008.8,f.getLength=function(t,e){var i,n,r,o,a,s,l=e||{},u=l.radius||f.DEFAULT_RADIUS,c=l.projection||"EPSG:3857",h=(t=t.clone().transform(c,"EPSG:4326")).getType(),p=0;switch(h){case d.default.POINT:case d.default.MULTI_POINT:break;case d.default.LINE_STRING:case d.default.LINEAR_RING:i=t.getCoordinates(),p=f.getLength_(i,u);break;case d.default.MULTI_LINE_STRING:case d.default.POLYGON:for(r=0,o=(i=t.getCoordinates()).length;r<o;++r)p+=f.getLength_(i[r],u);break;case d.default.MULTI_POLYGON:for(r=0,o=(i=t.getCoordinates()).length;r<o;++r)for(a=0,s=(n=i[r]).length;a<s;++a)p+=f.getLength_(n[a],u);break;case d.default.GEOMETRY_COLLECTION:var _=t.getGeometries();for(r=0,o=_.length;r<o;++r)p+=f.getLength(_[r],e);break;default:throw new Error("Unsupported geometry type: "+h)}return p},f.getLength_=function(t,e){for(var i=0,n=0,r=t.length;n<r-1;++n)i+=f.getDistance_(t[n],t[n+1],e);return i},f.getDistance_=function(t,e,i){var n=u.default.toRadians(t[1]),a=u.default.toRadians(e[1]),d=(a-n)/2,f=u.default.toRadians(e[0]-t[0])/2,c=s(d)*s(d)+s(f)*s(f)*l(n)*l(a);return 2*i*r(o(c),o(1-c))},f.getArea=function(t,e){var i,n,r,o,s,l,u=e||{},c=u.radius||f.DEFAULT_RADIUS,h=u.projection||"EPSG:3857",p=(t=t.clone().transform(h,"EPSG:4326")).getType(),_=0;switch(p){case d.default.POINT:case d.default.MULTI_POINT:case d.default.LINE_STRING:case d.default.MULTI_LINE_STRING:case d.default.LINEAR_RING:break;case d.default.POLYGON:for(i=t.getCoordinates(),_=a(f.getArea_(i[0],c)),r=1,o=i.length;r<o;++r)_-=a(f.getArea_(i[r],c));break;case d.default.MULTI_POLYGON:for(r=0,o=(i=t.getCoordinates()).length;r<o;++r)for(n=i[r],_+=a(f.getArea_(n[0],c)),s=1,l=n.length;s<l;++s)_-=a(f.getArea_(n[s],c));break;case d.default.GEOMETRY_COLLECTION:var g=t.getGeometries();for(r=0,o=g.length;r<o;++r)_+=f.getArea(g[r],e);break;default:throw new Error("Unsupported geometry type: "+p)}return _},f.getArea_=function(t,e){for(var i=0,n=t.length,r=t[n-1][0],o=t[n-1][1],a=0;a<n;a++){var l=t[a][0],d=t[a][1];i+=u.default.toRadians(l-r)*(2+s(u.default.toRadians(o))+s(u.default.toRadians(d))),r=l,o=d}return i*e*e/2},e.default=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(294)),r={};r.iconImageCache=new n.default,e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(50)),a=n(i(11)),s=n(i(32)),l=n(i(5)),u=n(i(4)),d=n(i(296)),f=n(i(295)),c=n(i(293)),h=n(i(156)),p=function(t){var e=t||{};this.anchor_=void 0===e.anchor?[.5,.5]:e.anchor,this.normalizedAnchor_=null,this.anchorOrigin_=void 0===e.anchorOrigin?c.default.TOP_LEFT:e.anchorOrigin,this.anchorXUnits_=void 0===e.anchorXUnits?d.default.FRACTION:e.anchorXUnits,this.anchorYUnits_=void 0===e.anchorYUnits?d.default.FRACTION:e.anchorYUnits,this.crossOrigin_=void 0===e.crossOrigin?null:e.crossOrigin;var i=void 0===e.img?null:e.img,n=void 0===e.imgSize?null:e.imgSize,l=e.src;a.default.assert(!(void 0!==l&&i),4),a.default.assert(!i||i&&n,5),(void 0===l||0===l.length)&&i&&(l=i.src||r.default.getUid(i).toString()),a.default.assert(void 0!==l&&0<l.length,6);var u=void 0===e.src?o.default.LOADED:o.default.IDLE;this.color_=void 0===e.color?null:s.default.asArray(e.color),this.iconImage_=f.default.get(i,l,n,this.crossOrigin_,u,this.color_),this.offset_=void 0===e.offset?[0,0]:e.offset,this.offsetOrigin_=void 0===e.offsetOrigin?c.default.TOP_LEFT:e.offsetOrigin,this.origin_=null,this.size_=void 0===e.size?null:e.size;var p=void 0===e.opacity?1:e.opacity,_=void 0!==e.rotateWithView&&e.rotateWithView,g=void 0===e.rotation?0:e.rotation,y=void 0===e.scale?1:e.scale,v=!(void 0!==e.snapToPixel)||e.snapToPixel;h.default.call(this,{opacity:p,rotation:g,scale:y,snapToPixel:v,rotateWithView:_})};r.default.inherits(p,h.default),p.prototype.clone=function(){return new p({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null===this.size_?void 0:this.size_.slice(),opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},p.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==d.default.FRACTION||this.anchorYUnits_==d.default.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==d.default.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==d.default.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=c.default.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_==c.default.TOP_RIGHT||this.anchorOrigin_==c.default.BOTTOM_RIGHT)&&(t[0]=-t[0]+e[0]),(this.anchorOrigin_==c.default.BOTTOM_LEFT||this.anchorOrigin_==c.default.BOTTOM_RIGHT)&&(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},p.prototype.getColor=function(){return this.color_},p.prototype.getImage=function(t){return this.iconImage_.getImage(t)},p.prototype.getImageSize=function(){return this.iconImage_.getSize()},p.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},p.prototype.getImageState=function(){return this.iconImage_.getImageState()},p.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},p.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=c.default.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_==c.default.TOP_RIGHT||this.offsetOrigin_==c.default.BOTTOM_RIGHT)&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_==c.default.BOTTOM_LEFT||this.offsetOrigin_==c.default.BOTTOM_RIGHT)&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},p.prototype.getSrc=function(){return this.iconImage_.getSrc()},p.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},p.prototype.listenImageChange=function(t,e){return l.default.listen(this.iconImage_,u.default.CHANGE,t,e)},p.prototype.load=function(){this.iconImage_.load()},p.prototype.unlistenImageChange=function(t,e){l.default.unlisten(this.iconImage_,u.default.CHANGE,t,e)},e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(32)),a=function(t){var e=t||{};this.color_=void 0===e.color?null:e.color,this.checksum_=void 0};a.prototype.clone=function(){var t=this.getColor();return new a({color:t&&t.slice?t.slice():t||void 0})},a.prototype.getColor=function(){return this.color_},a.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},a.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?this.checksum_=r.default.getUid(this.color_).toString():this.checksum_="f"+(this.color_?o.default.asString(this.color_):"-")),this.checksum_},e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.snapToPixel_=t.snapToPixel};i.prototype.getOpacity=function(){return this.opacity_},i.prototype.getRotateWithView=function(){return this.rotateWithView_},i.prototype.getRotation=function(){return this.rotation_},i.prototype.getScale=function(){return this.scale_},i.prototype.getSnapToPixel=function(){return this.snapToPixel_},i.prototype.getAnchor=function(){},i.prototype.getImage=function(){},i.prototype.getHitDetectionImage=function(){},i.prototype.getImageState=function(){},i.prototype.getImageSize=function(){},i.prototype.getHitDetectionImageSize=function(){},i.prototype.getOrigin=function(){},i.prototype.getSize=function(){},i.prototype.setOpacity=function(t){this.opacity_=t},i.prototype.setRotateWithView=function(t){this.rotateWithView_=t},i.prototype.setRotation=function(t){this.rotation_=t},i.prototype.setScale=function(t){this.scale_=t},i.prototype.setSnapToPixel=function(t){this.snapToPixel_=t},i.prototype.listenImageChange=function(){},i.prototype.load=function(){},i.prototype.unlistenImageChange=function(){},e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(297)),a=function(t){var e=t||{};o.default.call(this,{points:1/0,fill:e.fill,radius:e.radius,snapToPixel:e.snapToPixel,stroke:e.stroke,atlasManager:e.atlasManager})};r.default.inherits(a,o.default),a.prototype.clone=function(){var t=new a({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},a.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){var e=n.default.VERSION?n.default.VERSION.split("-")[0]:"latest";this.message="Assertion failed. See https://openlayers.org/en/"+e+"/doc/errors/#"+t+" for details.",this.code=t,this.name="AssertionError"};n.default.inherits(r,Error),e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"replace",value:function(t,e){return Object.keys(e).forEach(function(i){t=t.replace(new RegExp("\\$\\{"+i+"\\}","g"),void 0===e[i]?"":e[i])}),t}}]),t}();e.default=n},function(t){t.exports=window.Papa||{}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(48)),a=n(i(60)),s=n(i(142)),l=n(i(78)),u=n(i(138)),d=n(i(97)),f=n(i(137)),c=n(i(28)),h=n(i(35)),p=n(i(16)),_=function(t){var e=t||{};s.default.call(this),this.layerName_=e.layerName,this.layers_=e.layers?e.layers:null,this.defaultDataProjection=p.default.get(e.defaultDataProjection?e.defaultDataProjection:"EPSG:4326")};r.default.inherits(_,s.default),_.concatenateArcs_=function(t,e){var i,n,r,o,a,s,l=[];for(r=0,o=t.length;r<o;++r)i=t[r],0<r&&l.pop(),n=0<=i?e[i]:e[~i].slice().reverse(),l.push.apply(l,n);for(a=0,s=l.length;a<s;++a)l[a]=l[a].slice();return l},_.readPointGeometry_=function(t,e,i){var n=t.coordinates;return e&&i&&_.transformVertex_(n,e,i),new c.default(n)},_.readMultiPointGeometry_=function(t,e,i){var n,r,o=t.coordinates;if(e&&i)for(n=0,r=o.length;n<r;++n)_.transformVertex_(o[n],e,i);return new d.default(o)},_.readLineStringGeometry_=function(t,e){var i=_.concatenateArcs_(t.arcs,e);return new l.default(i)},_.readMultiLineStringGeometry_=function(t,e){var i,n,r=[];for(i=0,n=t.arcs.length;i<n;++i)r[i]=_.concatenateArcs_(t.arcs[i],e);return new u.default(r)},_.readPolygonGeometry_=function(t,e){var i,n,r=[];for(i=0,n=t.arcs.length;i<n;++i)r[i]=_.concatenateArcs_(t.arcs[i],e);return new h.default(r)},_.readMultiPolygonGeometry_=function(t,e){var i,n,r,o,a,s,l=[];for(a=0,s=t.arcs.length;a<s;++a){for(n=[],r=0,o=(i=t.arcs[a]).length;r<o;++r)n[r]=_.concatenateArcs_(i[r],e);l[a]=n}return new f.default(l)},_.readFeaturesFromGeometryCollection_=function(t,e,i,n,r,o,a){var s,l,u=t.geometries,d=[];for(s=0,l=u.length;s<l;++s)d[s]=_.readFeatureFromGeometry_(u[s],e,i,n,r,o,a);return d},_.readFeatureFromGeometry_=function(t,e,i,n,r,s,l){var u,d=t.type,f=_.GEOMETRY_READERS_[d];u="Point"===d||"MultiPoint"===d?f(t,i,n):f(t,e);var c=new o.default;c.setGeometry(a.default.transformWithOptions(u,!1,l)),void 0!==t.id&&c.setId(t.id);var h=t.properties;return r&&(!h&&(h={}),h[r]=s),h&&c.setProperties(h),c},_.prototype.readFeatures,_.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var i,n=t,r=null,o=null;n.transform&&(r=(i=n.transform).scale,o=i.translate);var a=n.arcs;i&&_.transformArcs_(a,r,o);var s,l,u=[],d=n.objects,f=this.layerName_;for(s in d)this.layers_&&-1==this.layers_.indexOf(s)||("GeometryCollection"===d[s].type?(l=d[s],u.push.apply(u,_.readFeaturesFromGeometryCollection_(l,a,r,o,f,s,e))):(l=d[s],u.push(_.readFeatureFromGeometry_(l,a,r,o,f,s,e))));return u}return[]},_.transformArcs_=function(t,e,i){var n,r;for(n=0,r=t.length;n<r;++n)_.transformArc_(t[n],e,i)},_.transformArc_=function(t,e,i){var n,r,o,a=0,s=0;for(r=0,o=t.length;r<o;++r)a+=(n=t[r])[0],s+=n[1],n[0]=a,n[1]=s,_.transformVertex_(n,e,i)},_.transformVertex_=function(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]},_.prototype.readProjection,_.prototype.readProjectionFromObject=function(){return this.defaultDataProjection},_.GEOMETRY_READERS_={Point:_.readPointGeometry_,LineString:_.readLineStringGeometry_,Polygon:_.readPolygonGeometry_,MultiPoint:_.readMultiPointGeometry_,MultiLineString:_.readMultiLineStringGeometry_,MultiPolygon:_.readMultiPolygonGeometry_},_.prototype.writeFeatureObject=function(){},_.prototype.writeFeaturesObject=function(){},_.prototype.writeGeometryObject=function(){},_.prototype.readGeometryFromObject=function(){},_.prototype.readFeatureFromObject=function(){},e.default=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=n(i(2)),l=n(i(9)),u=n(i(18)),d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target)),n=t.units,o=l.default.nextId("slider"),a=(0,s.default)("<label></label>").html(t.label||"").attr("for",o);return i.text=(0,s.default)('<input type="text">').attr("value",t.value||t.min).change(s.default.proxy(i.change,i)).keydown(s.default.proxy(i.key,i)).focus(function(t){return(0,s.default)(t.target).select()}),i.range=(0,s.default)('<input type="range">').attr("id",o).attr("min",t.min).attr("max",t.max).attr("step",t.step||1).attr("value",i.text.val()).change(s.default.proxy(i.change,i)),n=n?(0,s.default)("<span>"+n+"</span>"):void 0,i.append(a).append(i.text).append(n).append(i.range).addClass("sld"),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),a(e,[{key:"val",value:function(t){return void 0===t?this.range.val():(this.range.val(t),this.change(),this)}},{key:"badKey",value:function(t){var e=t.keyCode;return-1===s.default.inArray(e,[8,9,37,39,46])&&isNaN(String.fromCharCode(t.which||e))}},{key:"key",value:function(t){38===t.keyCode?this.val(1*this.val()+1*this.range.attr("step")):40===t.keyCode?this.val(this.val()-this.range.attr("step")):this.badKey(t)?t.preventDefault():13===t.keyCode&&this.val(this.text.val())}},{key:"change",value:function(){this.text.val(this.range.val()),this.trigger("change",this)}}]),e}();d.Options,e.default=d},function(t){t.exports=window},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(160)),s=n(i(163)),l=(n(i(9)),n(i(48))),u=n(i(60)),d=n(i(98)),f=n(i(28)),c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.defaultDataProjection=t.defaultDataProjection||"EPSG:4326",i.defaultFeatureProjection=t.defaultFeatureProjection||"EPSG:3857",i.id=t.id,i.x=t.x,i.y=t.y,i.lastId=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"readFeature",value:function(t,e){var i=t[this.id]||this.lastId++,n=t[this.x]=1*t[this.x],r=t[this.y]=1*t[this.y];if(isNaN(n)||isNaN(r))throw"Invalid coordinate ["+n+", "+r+"] for id "+i;var o=new f.default([n,r]),a=new l.default(t);return(e=e||{}).dataProjection=e.dataProjection||this.defaultDataProjection,e.featureProjection=e.featureProjection||this.defaultFeatureProjection,o.transform(e.dataProjection,e.featureProjection),a.setGeometry(o),a.setId(i),a}},{key:"readFeatures",value:function(t,e){var i=this,n=[];return t instanceof ArrayBuffer&&(t=new s.default.TextDecoder("utf-8").decode(t)),"string"==typeof t&&(t=a.default.parse(t,{header:!0}).data),t.forEach(function(t){try{n.push(i.readFeature(t,e))}catch(e){console.error(e,t)}}),n}},{key:"readProjection",value:function(){return this.defaultDataProjection}},{key:"getLastExtent",value:function(){return null}},{key:"getType",value:function(){return d.default.ARRAY_BUFFER}}]),e}();c.Options,e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n(i(2)),n(i(74)));i(87).polyfill(),i(86);var s=function(t){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),t.loader=function(){console.warn("Use autoLoad to load features")};var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.autoLoadOptions=t,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"autoLoad",value:function(){var t=this,e=this.autoLoadOptions,i=this.getFormat();return new Promise(function(n){fetch(e.url).then(function(t){return t.text()}).then(function(e){var r=i.readFeatures(e);t.addFeatures(r),t.set("autoload-complete",!0),n(r)})})}}]),e}();e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(78)),l=n(i(83)),u=(n(i(9)),n(i(165))),d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.allFeatures=t.features||null,i.on("change:autoload-complete",a.default.proxy(i.storeFeatures,i)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"filter",value:function(t){var e=[],i={};return this.allFeatures.forEach(function(n){var r=!0;t.every(function(t){return r=-1<a.default.inArray(n.get(t.property),t.values)}),r&&(i[n.getId()]=!0,e.push(n))}),this.clear(!0),this.addFeatures(e),e}},{key:"sort",value:function(t){var i=this,n=this.getFeatures();return n.sort(function(n,r){n.getGeometry(),r.getGeometry();var o=i.distance(t,n.getGeometry()),s=i.distance(t,r.getGeometry());return n.set("__distance",o),r.set("__distance",s),a.default.extend(n,e.DistanceDecoration),a.default.extend(r,e.DistanceDecoration),o.distance<s.distance?-1:o.distance>s.distance?1:0}),n}},{key:"distance",value:function(t,e){var i=new s.default([t,e.getClosestPoint(t)]),n=this.projections(this.getFormat());return n[0]&&i.transform(n[1],n[0]),{distance:i.getLength(),units:n[0]?n[0].getUnits():void 0}}},{key:"projections",value:function(t){var e=t?t.parentFormat:null,i=void 0,n=void 0;return e?(i=e.defaultDataProjection,n=e.defaultFeatureProjection||"EPSG:3857"):t&&(i=t.defaultDataProjection,n=t.defaultFeatureProjection||"EPSG:3857"),i&&(i=i.getCode?i:new l.default({code:i})),[i,n]}},{key:"storeFeatures",value:function(){this.allFeatures=this.getFeatures()}}]),e}();d.Distance,d.Filter,d.DistanceDecoration={getDistance:function(){return this.get("__distance")}},e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(104)),l=n(i(9)),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{id:l.default.nextId("Popup"),element:(0,a.default)(e.HTML).get(0),stopEvent:!0}));return i.margin=[10,10,10,10],i.popup=(0,a.default)(i.getElement()),i.map=t.map,i.setMap(i.map),i.content=i.popup.find(".content"),i.popup.find(".btn-x").on("click tap",a.default.proxy(i.hide,i)),i.popup.on("mouseover mousemove",a.default.proxy(i.hideTip,i)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"show",value:function(t){this.setPosition(t.coordinate),t.html&&(this.content.html(t.html),this.cssClass(t.css)),this.popup.fadeIn(),(0,a.default)(".f-tip").fadeOut(),this.pan()}},{key:"cssClass",value:function(t){this.content.get(0).className="content",this.content.addClass(t)}},{key:"hide",value:function(){this.popup.fadeOut()}},{key:"hideTip",value:function(t){t.stopPropagation(),(0,a.default)(".f-tip").fadeOut()}},{key:"pan",value:function(){var t=this.popup;if("none"!==t.css("display")){var e=this.map.getView(),i=parseInt(t.css("bottom")),n=-parseInt(t.css("left")),r=this.getOffset(),o=this.map.getPixelFromCoordinate(this.getPosition()),a=this.map.getSize(),s={width:t.width(),height:t.height()+i},l=s.width-n,u=o[0]-n-this.margin[3],d=a[0]-(o[0]+l)-this.margin[1],f=o[1]-s.height+r[1]-this.margin[0],c=a[1]-(o[1]+i)-r[1]-this.margin[2],h=e.getCenter(),p=this.map.getPixelFromCoordinate(h);0>d?p[0]-=d:0>u&&(p[0]+=u),0>f?p[1]+=f:0>c&&(p[1]-=c),this.fullscreen()||e.animate({center:this.map.getCoordinateFromPixel(p)})}}},{key:"fullscreen",value:function(){var t=(0,a.default)(this.map.getTargetElement()),e=(0,a.default)(this.getElement()),i=this.content,n=i.clone();if(e.height()>t.height()){var r=(0,a.default)('<div class="pop fullscreen"></div>').append(i);e.append(n);var o=(0,a.default)('<button class="btn-rnd btn-x"><span class="screen-reader-only">Close</span></button>').click(function(){r.fadeOut(function(){n.remove(),i.find(".dtl").not(".btn").slideUp(),e.append(i),r.remove()})});return t.append(r.append(o)),r.fadeIn(),!0}}}]),e}();u.ShowOptions,u.Options,u.HTML='<div class="pop"><div class="content"></div><button class="btn-rnd btn-x"><span class="screen-reader-only">Close</span></button></div>',e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(1)),l=n(i(9)),u=n(i(167)),d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.layers=[],i.addLayers(t.layers),i.map.on("click",a.default.proxy(i.mapClick,i)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"addLayers",value:function(t){var e=this;t.forEach(function(t){e.addLayer(t)})}},{key:"addLayer",value:function(t){this.layers.push(t),t.set("popup-id",this.getId())}},{key:"showFeature",value:function(t,e){e=e||s.default.getCenter(t.getGeometry().getExtent()),this.show({coordinate:e,html:l.default.html(t),css:t.cssClass?t.cssClass():""})}},{key:"mapClick",value:function(t){var e=this.getId(),i=this.map.forEachFeatureAtPixel(t.pixel,function(t,i){if(i.get("popup-id")===e)return t});i&&this.showFeature(i,t.coordinate)}}]),e}();d.Options,e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(9)),l=n(i(18)),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,a.default)(e.HTML)));return t=t||{},(0,a.default)(t.target).append(i.getContainer()),i.item=null,i.current=i.find(".current"),i.total=i.find(".total"),i.currentItem=i.find(".it"),i.btns=i.find(".btns"),i.items=null,i.find(".btn-nxt, .btn-prv").click(a.default.proxy(i.navigate,i)),t.items&&i.show(t.items),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default),o(e,[{key:"show",value:function(t){this.items=t,this.item=t[0],this.btns[1<t.length?"show":"hide"](),this.current.data("current",0).html(1),this.total.html(t.length),this.currentItem.html(t.length?s.default.html(t[0]):""),this.trigger("change",this)}},{key:"navigate",value:function(t){var e=(0,a.default)(t.target).data("incr")-0,i=this.current.data("current")-0+e;0<=i&&i<this.items.length&&(this.current.data("current",i).html(i+1),this.currentItem.html(s.default.html(this.items[i])),this.item=this.items[i],this.trigger("change",this))}}]),e}();u.Options,u.HTML='<div class="it-pg"><div class="it"></div><div class="btns"><button class="btn-rnd btn-prv" data-incr="-1"><span class="screen-reader-only">Previous</span></button><span class="current"></span> of <span class="total"></span><button class="btn-rnd btn-nxt" data-incr="1"><span class="screen-reader-only">Next</span></button></div></div>',e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n(i(2)),n(i(1))),s=(n(i(9)),n(i(169))),l=n(i(168)),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.layers=[],i.pager=new s.default({target:i.content}),i.addLayers(t.layers),i.pager.on("change",i.paged,i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default),o(e,[{key:"showFeatures",value:function(t,e){e=e||a.default.getCenter(t[0].getGeometry().getExtent()),this.pager.show(t),this.show({coordinate:e})}},{key:"mapClick",value:function(t){var e=this.getId(),i=[];this.map.forEachFeatureAtPixel(t.pixel,function(t,n){n.get("popup-id")===e&&i.push(t)}),i.length&&this.showFeatures(i,t.coordinate)}},{key:"paged",value:function(t){this.cssClass(t.item.cssClass?t.item.cssClass():""),this.pan()}}]),e}();e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(99)),l=n(i(1)),u=n(i(105)),d=n(i(38)),f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,a.default)(t.getTargetElement()).find(".ol-overlaycontainer-stopevent")));return i.map=t,i.view=t.getView(),i.geoJson=new s.default,i.getContainer().on("click dblclick mouseover mousemove",function(){(0,a.default)(".feature-tip").hide()}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"featureAsLocation",value:function(t,e){var i=t.getGeometry();return{name:t.getName?t.getName():t.get(e.nameField),coordinate:l.default.getCenter(i.getExtent()),geometry:JSON.parse(this.geoJson.writeGeometry(i)),data:t.getProperties(),type:"geocoded",accuracy:d.default.Accuracy.HIGH}}},{key:"zoom",value:function(t){this.view.animate({zoom:this.view.getZoom()+1*(0,a.default)(t.target).data("zoom-incr")})}}]),e}();e.default=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n(i(2)),n(i(99))),s=n(i(85)),l=n(i(154)),u=n(i(74)),d=n(i(72)),f=n(i(48)),c=n(i(28)),h=(n(i(38)),n(i(145))),p=n(i(89)),_=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.layer=null,i.source=null,i.map=t.map,i.view=i.map.getView(),i.zoom=void 0===t.zoom?h.default.ZOOM_LEVEL:t.zoom,i.format=new a.default,i.tip=null,i.createLayer(t.style),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,h.default),o(e,[{key:"zoomLocation",value:function(t,e){var i=this.map,n=this.view,r=this.source,o=this.feature(t),a=o.getGeometry();r.clear(),r.addFeature(o),e&&i.once("moveend",e),"Point"===a.getType()?n.animate({center:t.coordinate,zoom:this.zoom}):n.fit(a.getExtent(),{size:i.getSize(),duration:500})}},{key:"setLocation",value:function(t){this.source.clear(),this.source.addFeature(this.feature(t))}},{key:"feature",value:function(t){var e=t.geometry,i=new f.default({name:t.name,isFeature:t.isFeature});return e?i.setGeometry(this.format.readGeometry(e)):i.setGeometry(new c.default(t.coordinate)),i}},{key:"createLayer",value:function(t){this.source=new u.default,this.layer=new d.default({source:this.source,style:t||e.LOCATION_STYLE,zIndex:1e4}),this.map.addLayer(this.layer),this.tip=new p.default({map:this.map,tips:[{layer:this.layer,label:function(t){return{css:"nyc-user-location",html:t.get("name")}}}]})}}]),e}();_.Options,_.LOCATION_STYLE=new s.default({image:new l.default({scale:.09375,size:[1024,1024],src:"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%221024%22%20height%3D%221024%22%3E%3Cfilter%20id%3D%22filter%22%20style%3D%22color-interpolation-filters%3AsRGB%22%20x%3D%22-0.035750399%22%20width%3D%221.0715008%22%20y%3D%22-0.03625311%22%20%20height%3D%221.0725062%22%3E%3CfeGaussianBlur%20stdDeviation%3D%226.0015266%22%2F%3E%3C%2Ffilter%3E%3Cpath%20style%3D%22opacity%3A0.1%3Bfill%3A%23000000%3Bfill-opacity%3A1%3Bstroke%3A%23000000%3Bstroke-width%3A10%3Bstroke-opacity%3A1%3Bfilter%3Aurl(%23filter)%22%20d%3D%22M%20868.91078%2C141.10492%20C%20806.53392%2C79.855774%20695.84806%2C89.539532%20621.70905%2C162.73227%20547.57005%2C235.92501%20492.08486%2C476.05139%20510.9101%2C494.53629%20529.73535%2C513.02119%20773.473%2C457.74384%20847.612%2C384.5511%20921.751%2C311.35836%20931.28764%2C202.35407%20868.91078%2C141.10492%20Z%20M%20645.16036%2C361.99953%20c%20-41.52967%2C-40.77885%20-35.13918%2C-113.58881%2014.19918%2C-162.29746%2049.33837%2C-48.70864%20123.27149%2C-55.19708%20164.80115%2C-14.41823%2041.52967%2C40.77885%2035.13918%2C113.58881%20-14.19918%2C162.29745%20-49.33837%2C48.70864%20-123.27149%2C55.19709%20-164.80115%2C14.41824%20z%22%2F%3E%3Cpath%20style%3D%22fill%3A%23000%3Bstroke%3A%23fff%3Bstroke-width%3A20%22%20d%3D%22m%20512%2C25.6%20c%20-95.4279%2C0%20-172.8%2C77.3721%20-172.8%2C172.8%200%2C95.4279%20144%2C288%20172.8%2C288%2028.8%2C0%20172.8%2C-192.5721%20172.8%2C-288%20C%20684.8%2C102.9721%20607.4279%2C25.6%20512%2C25.6%20Z%20m%200%2C288%20c%20-63.5346%2C0%20-115.2%2C-51.6942%20-115.2%2C-115.2%200%2C-63.5058%2051.6654%2C-115.2%20115.2%2C-115.2%2063.5346%2C0%20115.2%2C51.6942%20115.2%2C115.2%200%2C63.5058%20-51.6654%2C115.2%20-115.2%2C115.2%20z%22%2F%3E%3C%2Fsvg%3E"})}),e.default=_},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(174)),a=n(i(15)),s=n(i(150)),l=n(i(5)),u=n(i(4)),d=n(i(35)),f=n(i(19)),c=n(i(6)),h=n(i(16)),p=n(i(148)),_=function(t){a.default.call(this);var e=t||{};this.position_=null,this.transform_=h.default.identityTransform,this.sphere_=new s.default(p.default.RADIUS),this.watchId_=void 0,l.default.listen(this,a.default.getChangeEventType(o.default.PROJECTION),this.handleProjectionChanged_,this),l.default.listen(this,a.default.getChangeEventType(o.default.TRACKING),this.handleTrackingChanged_,this),void 0!==e.projection&&this.setProjection(e.projection),void 0!==e.trackingOptions&&this.setTrackingOptions(e.trackingOptions),this.setTracking(void 0!==e.tracking&&e.tracking)};r.default.inherits(_,a.default),_.prototype.disposeInternal=function(){this.setTracking(!1),a.default.prototype.disposeInternal.call(this)},_.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=h.default.getTransformFromProjections(h.default.get("EPSG:4326"),t),this.position_&&this.set(o.default.POSITION,this.transform_(this.position_)))},_.prototype.handleTrackingChanged_=function(){if(f.default.GEOLOCATION){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!t&&void 0!==this.watchId_&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},_.prototype.positionChange_=function(t){var e=t.coords;this.set(o.default.ACCURACY,e.accuracy),this.set(o.default.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(o.default.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(o.default.HEADING,null===e.heading?void 0:c.default.toRadians(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set(o.default.POSITION,i),this.set(o.default.SPEED,null===e.speed?void 0:e.speed);var n=d.default.circular(this.sphere_,this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(o.default.ACCURACY_GEOMETRY,n),this.changed()},_.prototype.positionError_=function(t){t.type=u.default.ERROR,this.setTracking(!1),this.dispatchEvent(t)},_.prototype.getAccuracy=function(){return this.get(o.default.ACCURACY)},_.prototype.getAccuracyGeometry=function(){return this.get(o.default.ACCURACY_GEOMETRY)||null},_.prototype.getAltitude=function(){return this.get(o.default.ALTITUDE)},_.prototype.getAltitudeAccuracy=function(){return this.get(o.default.ALTITUDE_ACCURACY)},_.prototype.getHeading=function(){return this.get(o.default.HEADING)},_.prototype.getPosition=function(){return this.get(o.default.POSITION)},_.prototype.getProjection=function(){return this.get(o.default.PROJECTION)},_.prototype.getSpeed=function(){return this.get(o.default.SPEED)},_.prototype.getTracking=function(){return this.get(o.default.TRACKING)},_.prototype.getTrackingOptions=function(){return this.get(o.default.TRACKING_OPTIONS)},_.prototype.setProjection=function(t){this.set(o.default.PROJECTION,h.default.get(t))},_.prototype.setTracking=function(t){this.set(o.default.TRACKING,t)},_.prototype.setTrackingOptions=function(t){this.set(o.default.TRACKING_OPTIONS,t)},e.default=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=(n(i(9)),n(i(38))),l=n(i(175)),u=n(i(55)),d=n(i(1)),f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.locating=!1,i.extentLimit=t.extentLimit,i.geolocation=new l.default({trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),i.geolocation.on("change",a.default.proxy(i.geolocationChange,i)),i.geolocation.on("error",a.default.proxy(i.geolocationError,i)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"locate",value:function(){this.locating=!0,this.geolocation.setTracking(!0)}},{key:"track",value:function(t){this.geolocation.setTracking(t)}},{key:"geolocationError",value:function(t){console.error(t.message,t)}},{key:"geolocationChange",value:function(){var t=this.geolocation,e=t.getPosition(),i=u.default.toStringHDMS(e);e=proj4("EPSG:4326",this.projection,e),this.withinLimit(e)&&(this.locating&&(this.track(!1),this.locating=!1),this.trigger("geolocated",{coordinate:e,heading:t.getHeading(),accuracy:t.getAccuracy()/this.metersPerUnit(),type:"geolocated",name:i}))}},{key:"withinLimit",value:function(t){return!this.extentLimit||d.default.containsCoordinate(this.extentLimit,t)}}]),e}();f.Options,e.default=f},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(i(81)),a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":n(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":n(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),r(e,[{key:"search",value:function(){throw"Not implemented"}}]),e}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var a,s=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=n(i(2)),u=n(i(9)),d=n(i(38)),f=n(i(177)),c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.url=t.url+"&input=",i.projection=t.projection||"EPSG:3857",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,f.default),s(e,[{key:"search",value:function(t){if(5!==(t=t.trim()).length||isNaN(t))t.length&&(t=t.replace(/"/g,"").replace(/'/g,"").replace(/&/g," and "),l.default.ajax({url:""+this.url+t,dataType:"jsonp",success:l.default.proxy(this.geoclient,this),error:l.default.proxy(this.error,this)}));else{var i=this.project(e.ZIP_CODE_POINTS[t]);this.trigger(i?"geocoded":"ambiguous",i?{coordinate:i,accuracy:d.default.Accuracy.ZIP_CODE,type:"geocoded",zip:!0,name:t}:{input:t,possible:[]})}}},{key:"project",value:function(t){return t&&"EPSG:2263"!==this.projection?proj4("EPSG:2263",this.projection,t):t}},{key:"geoclient",value:function(t){var e=t.results;if("OK"!==t.status)this.trigger("ambiguous",{type:"ambiguous",input:t.input,possible:[]});else if(1===e.length){var i=e[0],n=this.parse(i);n?(n.type="geocoded",this.trigger("geocoded",n)):this.trigger("ambiguous",{type:"ambiguous",input:t.input,possible:[]})}else this.trigger("ambiguous",{type:"ambiguous",input:t.input,possible:this.possible(e)})}},{key:"possible",value:function(t){var e=this,i=[];return t.forEach(function(t){var n=e.parse(t);n&&i.push(n)}),i}},{key:"parse",value:function(t){var e=t.request.split(" ")[0],i=t.response,n=void 0,r=void 0,o=void 0;if("intersection"===e)n=i.streetName1+" and "+i.streetName2,r=[1*i.xCoordinate,1*i.yCoordinate],o=d.default.Accuracy.MEDIUM;else if("blockface"===e)n=i.firstStreetNameNormalized+" btwn "+i.secondStreetNameNormalized+" & "+i.thirdStreetNameNormalized,r=[(1*i.fromXCoordinate+1*i.toXCoordinate)/2,(1*i.fromYCoordinate+1*i.toYCoordinate)/2],o=d.default.Accuracy.LOW;else{var a=i.internalLabelXCoordinate,s=i.internalLabelYCoordinate;n=(i.houseNumber?i.houseNumber+" ":"")+(i.firstStreetNameNormalized||i.giStreetName1),r=[1*(a&&s?a:i.xCoordinate),1*(a&&s?s:i.yCoordinate)],o=a&&s?d.default.Accuracy.HIGH:d.default.Accuracy.MEDIUM}try{return{type:"geocoded",coordinate:this.project(r),data:i,accuracy:o,name:u.default.capitalize(n.replace(/  /," ").replace(/  /," ")+", "+i.firstBoroughName)+", NY "+(i.zipCode||i.leftSegmentZipCode||"")}}catch(e){console.warn("No coordinate",t)}}},{key:"error",value:function(){console.error("Geoclient error",arguments),this.trigger("error",{type:"error",error:arguments})}}]),e}();c.Options,c.ZIP_CODE_POINTS=(r(a={10474:[1018466,233787],10455:[1007889,236616],10037:[1001661,235627],10024:[991450,225457],10454:[1007449,232863],10026:[997179,231835],10035:[1001886,231364],10025:[993331,230012]},"10035",[1006595,228454]),r(a,"11101",[1001319,211034]),r(a,"11364",[1051553,211923]),r(a,"10018",[984278,215509]),r(a,"10020",[990012,215729]),r(a,"11005",[1064789,214295]),r(a,"10017",[991869,213252]),r(a,"10001",[983613,213360]),r(a,"10011",[982781,210664]),r(a,"10016",[990291,210665]),r(a,"11104",[1006224,210564]),r(a,"11109",[996054,210740]),r(a,"10010",[988989,208515]),r(a,"11367",[1032392,205392]),r(a,"10014",[982449,206620]),r(a,"10003",[987465,205563]),r(a,"11222",[998773,204620]),r(a,"11379",[1017432,200740]),r(a,"11429",[1056859,198057]),r(a,"11435",[1036960,195018]),r(a,"11415",[1031798,197376]),r(a,"11418",[1031001,193330]),r(a,"11433",[1043368,193721]),r(a,"11451",[1039899,194697]),r(a,"11221",[1004438,191873]),r(a,"11421",[1023878,191241]),r(a,"11372",[1016528,213126]),r(a,"11004",[1065606,210363]),r(a,"11040",[1065956,213534]),r(a,"10002",[988242,200171]),r(a,"10314",[939259,155728]),r(a,"11693",[1028661,168843]),r(a,"11228",[980891,164066]),r(a,"11096",[1048547,164406]),r(a,"11693",[1032834,164479]),r(a,"11209",[976172,165379]),r(a,"10304",[962458,165679]),r(a,"10456",[1007883,242372]),r(a,"10472",[1021444,241624]),r(a,"10031",[998088,239814]),r(a,"10039",[1001519,240436]),r(a,"10459",[1013835,240084]),r(a,"10451",[1005368,238290]),r(a,"10473",[1022475,237217]),r(a,"10030",[1000193,237302]),r(a,"10027",[999088,234131]),r(a,"10464",[1047712,250241]),r(a,"10464",[1043291,247861]),r(a,"10461",[1028296,247902]),r(a,"10457",[1012388,247405]),r(a,"10460",[1015132,243510]),r(a,"10032",[1000382,244917]),r(a,"10452",[1005446,244483]),r(a,"11414",[1027256,178677]),r(a,"11231",[979340,182720]),r(a,"11232",[983612,177801]),r(a,"10034",[1005713,255122]),r(a,"10033",[1001707,248780]),r(a,"10462",[1020685,249420]),r(a,"10040",[1003863,251914]),r(a,"10453",[1008152,249805]),r(a,"11102",[1004636,220364]),r(a,"11370",[1014445,217532]),r(a,"10021",[997020,219120]),r(a,"11361",[1047797,217779]),r(a,"11358",[1040709,216377]),r(a,"11362",[1057749,215220]),r(a,"10044",[996385,214347]),r(a,"11369",[1019957,217722]),r(a,"11103",[1008295,217197]),r(a,"11106",[1001397,217519]),r(a,"11368",[1024870,212082]),r(a,"11377",[1010574,210678]),r(a,"10036",[985413,216821]),r(a,"11355",[1033762,213010]),r(a,"10302",[945946,169124]),r(a,"10465",[1031495,239091]),r(a,"11691",[1053783,158810]),r(a,"11096",[1054217,162199]),r(a,"11223",[991665,156781]),r(a,"11693",[1030676,160394]),r(a,"11208",[1019700,184749]),r(a,"11207",[1013544,183721]),r(a,"10004",[978925,190480]),r(a,"10004",[971715,190592]),r(a,"11413",[1053380,183328]),r(a,"11217",[989547,187967]),r(a,"11238",[994291,186584]),r(a,"11231",[983057,186217]),r(a,"11422",[1057272,180607]),r(a,"11420",[1036899,184708]),r(a,"11417",[1027410,185709]),r(a,"11215",[989882,181773]),r(a,"11357",[1036533,225804]),r(a,"10029",[999950,227538]),r(a,"00083",[991590,220538]),r(a,"11356",[1028115,225277]),r(a,"11359",[1046026,228012]),r(a,"10303",[933820,171004]),r(a,"11234",[1004323,163783]),r(a,"11360",[1044984,223892]),r(a,"11105",[1011836,221755]),r(a,"10128",[997765,224257]),r(a,"11371",[1022003,220457]),r(a,"10023",[988765,222068]),r(a,"11363",[1055047,220385]),r(a,"10028",[995910,222872]),r(a,"11354",[1032198,219054]),r(a,"11216",[998312,187241]),r(a,"11416",[1025796,188584]),r(a,"11233",[1006523,186300]),r(a,"11436",[1040697,185554]),r(a,"11213",[1000284,183308]),r(a,"11212",[1008387,180764]),r(a,"11225",[997345,180829]),r(a,"11218",[990799,173649]),r(a,"11226",[995711,174598]),r(a,"11219",[985166,169604]),r(a,"11210",[999101,167896]),r(a,"11230",[993494,166072]),r(a,"11419",[1033365,190202]),r(a,"11434",[1046577,185969]),r(a,"11204",[987887,164576]),r(a,"10471",[1012587,266570]),r(a,"10470",[1024748,268409]),r(a,"10466",[1024313,263999]),r(a,"10467",[1019786,258782]),r(a,"11430",[1043607,175068]),r(a,"11203",[1002509,175950]),r(a,"10469",[1026678,255623]),r(a,"10468",[1013897,258046]),r(a,"10463",[1008780,258696]),r(a,"10458",[1015534,253712]),r(a,"11378",[1009641,202115]),r(a,"10009",[990043,203961]),r(a,"10012",[984832,203596]),r(a,"10013",[982892,201665]),r(a,"10007",[982504,199552]),r(a,"11237",[1004600,197083]),r(a,"11385",[1011367,195195]),r(a,"10038",[983418,197803]),r(a,"11206",[1000221,195003]),r(a,"10006",[980563,197293]),r(a,"11412",[1050773,193231]),r(a,"10005",[981339,197038]),r(a,"11251",[993428,194599]),r(a,"10004",[980174,195435]),r(a,"11411",[1057763,192413]),r(a,"11201",[986968,192156]),r(a,"10004",[972576,193652]),r(a,"11205",[995897,192159]),r(a,"10305",[963310,156060]),r(a,"11229",[999717,158278]),r(a,"11214",[984e3,159330]),r(a,"10306",[950937,145144]),r(a,"11694",[1025530,149310]),r(a,"11224",[984306,149092]),r(a,"10308",[942704,140020]),r(a,"10282",[979981,200244]),r(a,"11211",[999857,199848]),r(a,"11249",[993704,198278]),r(a,"11370",[1016758,227518]),r(a,"10065",[994666,217698]),r(a,"10075",[995301,221633]),r(a,"10069",[987047,221849]),r(a,"10281",[980036,198787]),r(a,"11373",[1017948,208465]),r(a,"10279",[981949,198823]),r(a,"10165",[990124,213288]),r(a,"10168",[990733,212960]),r(a,"10105",[990067,217259]),r(a,"10118",[988212,211939]),r(a,"10176",[990123,214490]),r(a,"10162",[997739,219667]),r(a,"10170",[990955,213470]),r(a,"10112",[989735,215947]),r(a,"10122",[986550,213178]),r(a,"10107",[989098,218425]),r(a,"10103",[990705,216275]),r(a,"10174",[991094,213106]),r(a,"10166",[990733,213798]),r(a,"10169",[990872,214089]),r(a,"10167",[991259,214199]),r(a,"10177",[990927,214381]),r(a,"10172",[991398,214417]),r(a,"10171",[991426,214709]),r(a,"10270",[982060,196710]),r(a,"10104",[990123,216312]),r(a,"10271",[981339,197293]),r(a,"10110",[989486,213943]),r(a,"10175",[989847,214016]),r(a,"10151",[991702,217332]),r(a,"10173",[990040,213907]),r(a,"10178",[990429,212814]),r(a,"10119",[986217,213068]),r(a,"10121",[986439,212486]),r(a,"10123",[986827,213032]),r(a,"10106",[989624,218024]),r(a,"10158",[991177,212122]),r(a,"10041",[981727,195435]),r(a,"10120",[987242,212449]),r(a,"10278",[983113,199880]),r(a,"10155",[993143,216531]),r(a,"10043",[982337,195836]),r(a,"10081",[981838,197074]),r(a,"10096",[989071,214235]),r(a,"10097",[988461,216931]),r(a,"10196",[989237,215e3]),r(a,"10196",[989458,214963]),r(a,"10275",[980368,196382]),r(a,"10265",[982060,196164]),r(a,"10045",[981866,197329]),r(a,"10047",[988047,208660]),r(a,"10047",[988047,208660]),r(a,"10080",[980785,198167]),r(a,"10203",[981062,196965]),r(a,"10259",[981478,197439]),r(a,"10260",[981921,196564]),r(a,"10285",[980147,199224]),r(a,"10286",[981727,196637]),r(a,"10463",[1007644,260043]),r(a,"10475",[1030489,258509]),r(a,"10464",[1036131,258338]),r(a,"10309",[923594,132955]),r(a,"10307",[916899,124411]),r(a,"10280",[979509,197257]),r(a,"10048",[980812,198532]),r(a,"10055",[991564,215802]),r(a,"10019",[989652,217477]),r(a,"10111",[990483,215838]),r(a,"10153",[991896,217478]),r(a,"10154",[991896,215328]),r(a,"10152",[991979,215584]),r(a,"10115",[994299,234675]),r(a,"10022",[993087,215620]),r(a,"11235",[1000973,149936]),r(a,"11693",[1036606,153266]),r(a,"11692",[1041045,155461]),r(a,"11697",[1009230,143240]),r(a,"10312",[935583,136827]),r(a,"11239",[1021573,175899]),r(a,"11236",[1011642,172461]),r(a,"11220",[979421,172519]),r(a,"10301",[961077,172967]),r(a,"10310",[950582,169591]),r(a,"11426",[1060737,207724]),r(a,"11365",[1041364,208618]),r(a,"11001",[1065508,206646]),r(a,"11375",[1026883,201848]),r(a,"11427",[1053373,205042]),r(a,"11374",[1022389,203771]),r(a,"11366",[1039491,203659]),r(a,"11423",[1048812,200621]),r(a,"11428",[1055655,202207]),r(a,"11432",[1041634,200093]),a),e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(i(2)),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"filter",value:function(t,e,i){var n=this,o=3<i.length,a=6<i.length,s={exact:[],possible:[]},l=this.regexp(i),u=[],d=this.test;r.default.merge((0,r.default)(e).find("li"),(0,r.default)(t).find("li")).each(function(t,e){u.push((0,r.default)(e)),d(l,(0,r.default)(e),s,o,n.log)}),(0,r.default)(t).append(u),s.exact.length?(0,r.default)(e).prepend(s.exact):!a&&(0,r.default)(e).prepend(s.possible)}},{key:"test",value:function(t,e,i,n){var r=e.html();n&&t.exact.test(r)&&i.exact.push(e),t.possible.test(r)&&i.possible.push(e)}},{key:"regexp",value:function(t){for(var e=new String(t.replace(/[^a-zA-Z0-9]/g,"")),i=new String(t.replace(/[^a-zA-Z0-9 ]/g,"")),n="^",r=0;r<e.length;r++)n+="(?=.*"+e.charAt(r)+")|";return n=n.substr(0,n.length-1),n+=".*$",{exact:new RegExp("("+i+")","i"),possible:new RegExp(n,"i")}}}]),t}();e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(81)),s=(n(i(38)),n(i(105)),n(i(146))),l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.zoomSearch=t.zoomSearch,i.locator=t.locator,i.mapLocator=t.mapLocator,i.dialog=new s.default,i.autoLocate=t.autoLocate||!1,i.hookupEvents(),i.locateFromQueryString(document.location.search),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"setLocation",value:function(t){this.mapLocator.setLocation(t)}},{key:"hookupEvents",value:function(){this.locator.on("geocoded",this.located,this),this.locator.on("geolocated",this.located,this),this.locator.on("ambiguous",this.ambiguous,this),this.locator.on("error",this.error,this),this.zoomSearch.on("disambiguated",this.located,this),this.zoomSearch.on("search",this.locator.search,this.locator),this.zoomSearch.on("geolocate",this.locator.locate,this.locator)}},{key:"locateFromQueryString",value:function(t){var e={};try{t.substr(1).split("&").forEach(function(t){var i=t.split("=");e[i[0]]=decodeURIComponent(i[1])})}catch(t){}e.address?this.locator.search(e.address):this.autoLocate&&this.locator.locate()}},{key:"located",value:function(t){var e=this;this.zoomSearch.val("geolocated"===t.type?"":t.name),this.mapLocator.zoomLocation(t,function(){e.trigger(t.type,t)})}},{key:"ambiguous",value:function(t){t.possible.length?this.zoomSearch.disambiguate(t):this.dialog.ok({message:"The location you entered was not understood"})}},{key:"error",value:function(){this.dialog.ok({message:"Failed to contact geocoder"})}}]),e}();l.Options,e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(180)),a=n(i(178)),s=n(i(176)),l=n(i(173)),u=n(i(171)),d=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{zoomSearch:new u.default(t.map),locator:new s.default({geocoder:new a.default({url:t.url})}),mapLocator:new l.default({map:t.map})}))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),e}();d.Options,e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(9)),l=n(i(18)),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target));return i.getContainer().addClass("chc rad-all"),i.radio=t.radio,i.inputs=null,i.choices=t.choices,i.setChoices(i.choices),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default),o(e,[{key:"setChoices",value:function(t){var i=this;this.getContainer().empty(),this.radio&&this.getContainer().attr("role","radiogroup"),t.forEach(function(t,n){var r=(0,a.default)(e.HTML),o=s.default.nextId("chc-chc"),l=r.find("input");r.addClass(i.radio?t.name+"-"+n:t.name),l.attr("id",o).attr("name",t.name).attr("type",i.radio?"radio":"checkbox").prop("checked",t.checked).data("choice",t).change(a.default.proxy(i.change,i)),r.find("label").html(t.label).attr("for",o),i.append(r),i.extend(t)}),this.inputs=this.find("input")}},{key:"val",value:function(t){if(t)return a.default.each(this.inputs,function(e,i){(0,a.default)(i).prop("checked",!1),t.some(function(t){var e=(0,a.default)(i).data("choice");if(t.eq(e))return(0,a.default)(i).prop("checked",!0),!0})}),this.val();var e=[];return a.default.each(this.inputs,function(t,i){(0,a.default)(i).prop("checked")&&e.push((0,a.default)(i).data("choice"))}),e}},{key:"change",value:function(){this.trigger("change",this)}},{key:"extend",value:function(t){a.default.extend(t,{eq:function(t){return this.name===t.name&&this.label===t.label&&JSON.stringify(this.value)===JSON.stringify(t.value)}})}}]),e}();u.Choice,u.Options,u.HTML='<div class="chc-chc"><input><label></label></div>',e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(23)),a=n(i(46)),s=n(i(183)),l=n(i(3)),u=function(t){var e=t||{},i=l.default.assign({},e);delete i.preload,delete i.useInterimTilesOnError,a.default.call(this,i),this.setPreload(void 0===e.preload?0:e.preload),this.setUseInterimTilesOnError(!(void 0!==e.useInterimTilesOnError)||e.useInterimTilesOnError),this.type=o.default.TILE};r.default.inherits(u,a.default),u.prototype.getPreload=function(){return this.get(s.default.PRELOAD)},u.prototype.getSource,u.prototype.setPreload=function(t){this.set(s.default.PRELOAD,t)},u.prototype.getUseInterimTilesOnError=function(){return this.get(s.default.USE_INTERIM_TILES_ON_ERROR)},u.prototype.setUseInterimTilesOnError=function(t){this.set(s.default.USE_INTERIM_TILES_ON_ERROR,t)},e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(107)),a=n(i(20)),s=n(i(22)),l=n(i(16)),u=n(i(61)),d=n(i(135)),f=n(i(49)),c=n(i(62)),h=function(t){d.default.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0===t.tilePixelRatio?1:t.tilePixelRatio,this.tileGrid=void 0===t.tileGrid?null:t.tileGrid,this.tileCache=new o.default(t.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:t.transition}};r.default.inherits(h,d.default),h.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},h.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},h.prototype.forEachLoadedTile=function(t,e,i,n){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var o,s,l,u=!0,d=i.minX;d<=i.maxX;++d)for(var c=i.minY;c<=i.maxY;++c)s=f.default.getKeyZXY(e,d,c),l=!1,r.containsKey(s)&&((l=(o=r.get(s)).getState()===a.default.LOADED)&&(l=!1!==n(o))),l||(u=!1);return u},h.prototype.getGutter=function(){return 0},h.prototype.getKey=function(){return this.key_},h.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},h.prototype.getOpaque=function(){return this.opaque_},h.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},h.prototype.getTile=function(){},h.prototype.getTileGrid=function(){return this.tileGrid},h.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:c.default.getForProjection(t)},h.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!l.default.equivalent(e,t)?null:this.tileCache},h.prototype.getTilePixelRatio=function(){return this.tilePixelRatio_},h.prototype.getTilePixelSize=function(t,e,i){var n=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),o=u.default.toSize(n.getTileSize(t),this.tmpSize);return 1==r?o:u.default.scale(o,r,this.tmpSize)},h.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0===e?this.getProjection():e,n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=c.default.wrapX(n,t,i)),f.default.withinExtentAndZ(t,n)?t:null},h.prototype.refresh=function(){this.tileCache.clear(),this.changed()},h.prototype.useTile=r.default.nullFunction,h.Event=function(t,e){s.default.call(this,t),this.tile=e},r.default.inherits(h.Event,s.default),e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(11)),o=n(i(6)),a=n(i(49)),s={createFromTemplate:function(t,e){var i=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,a=/\{-y\}/g;return function(s){return s?t.replace(i,s[0].toString()).replace(n,s[1].toString()).replace(o,function(){return(-s[2]-1).toString()}).replace(a,function(){var t=s[0],i=e.getFullTileRange(t);return r.default.assert(i,55),(i.getHeight()+s[2]).toString()}):void 0}},createFromTemplates:function(t,e){for(var i=t.length,n=Array(i),r=0;r<i;++r)n[r]=s.createFromTemplate(t[r],e);return s.createFromTileUrlFunctions(n)},createFromTileUrlFunctions:function(t){return 1===t.length?t[0]:function(e,i,n){if(e){var r=a.default.hash(e),s=o.default.modulo(r,t.length);return t[s](e,i,n)}}},nullTileUrlFunction:function(){},expandUrl:function(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var n,r=i[1].charCodeAt(0),o=i[2].charCodeAt(0);for(n=r;n<=o;++n)e.push(t.replace(i[0],String.fromCharCode(n)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(i[2],10),s=parseInt(i[1],10);s<=a;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e}};e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(20)),a=n(i(187)),s=n(i(186)),l=n(i(185)),u=n(i(49)),d=function(t){s.default.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):a.default.nullTileUrlFunction,this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),t.tileUrlFunction&&this.setTileUrlFunction(t.tileUrlFunction),this.tileLoadingKeys_={}};r.default.inherits(d,s.default),d.prototype.fixedTileUrlFunction,d.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},d.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},d.prototype.getUrls=function(){return this.urls},d.prototype.handleTileChange=function(t){var e,i=t.target,n=r.default.getUid(i),a=i.getState();a==o.default.LOADING?(this.tileLoadingKeys_[n]=!0,e=l.default.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=a==o.default.ERROR?l.default.TILELOADERROR:a==o.default.LOADED||a==o.default.ABORT?l.default.TILELOADEND:void 0),void 0!=e&&this.dispatchEvent(new s.default.Event(e,i))},d.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},d.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0===e?this.changed():this.setKey(e)},d.prototype.setUrl=function(t){var e=this.urls=a.default.expandUrl(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):a.default.createFromTemplates(e,this.tileGrid),t)},d.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):a.default.createFromTemplates(t,this.tileGrid),e)},d.prototype.useTile=function(t,e,i){var n=u.default.getKeyZXY(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.abs,o=Math.max,a=Math.min;Object.defineProperty(e,"__esModule",{value:!0});var s=n(i(0)),l=n(i(1)),u=n(i(6)),d=n(i(16)),f=function(t,e,i,n,r){this.sourceProj_=t,this.targetProj_=e;var u={},f=d.default.getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return u[e]||(u[e]=f(t)),u[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&l.default.getWidth(n)==l.default.getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?l.default.getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?l.default.getWidth(this.targetProj_.getExtent()):null;var c=l.default.getTopLeft(i),h=l.default.getTopRight(i),p=l.default.getBottomRight(i),_=l.default.getBottomLeft(i),g=this.transformInv_(c),y=this.transformInv_(h),v=this.transformInv_(p),m=this.transformInv_(_);if(this.addQuad_(c,h,p,_,g,y,v,m,s.default.RASTER_REPROJECTION_MAX_SUBDIVISION),this.wrapsXInSource_){var E=1/0;this.triangles_.forEach(function(t){E=a(E,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(o(t.source[0][0],t.source[1][0],t.source[2][0])-E>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-E>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-E>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-E>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=a(e[0][0],e[1][0],e[2][0]);o(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}},this)}u={}};f.prototype.addTriangle_=function(t,e,i,n,r,o){this.triangles_.push({source:[n,r,o],target:[t,e,i]})},f.prototype.addQuad_=function(t,e,i,n,o,a,d,f,c){var h=l.default.boundingExtent([o,a,d,f]),p=this.sourceWorldWidth_?l.default.getWidth(h)/this.sourceWorldWidth_:null,_=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&.5<p&&1>p,y=!1;if(0<c){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var v=l.default.boundingExtent([t,e,i,n]);y|=l.default.getWidth(v)/this.targetWorldWidth_>s.default.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH}!g&&this.sourceProj_.isGlobal()&&p&&(y|=p>s.default.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH)}if(y||!this.maxSourceExtent_||l.default.intersects(h,this.maxSourceExtent_)){if(!(y||isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(d[0])&&isFinite(d[1])&&isFinite(f[0])&&isFinite(f[1]))){if(!(0<c))return;y=!0}if(0<c){if(!y){var m,E=[(t[0]+i[0])/2,(t[1]+i[1])/2],b=this.transformInv_(E);if(g)m=(u.default.modulo(o[0],_)+u.default.modulo(d[0],_))/2-u.default.modulo(b[0],_);else m=(o[0]+d[0])/2-b[0];var C=(o[1]+d[1])/2-b[1];y=m*m+C*C>this.errorThresholdSquared_}if(y){if(r(t[0]-i[0])<=r(t[1]-i[1])){var T=[(e[0]+i[0])/2,(e[1]+i[1])/2],x=this.transformInv_(T),S=[(n[0]+t[0])/2,(n[1]+t[1])/2],R=this.transformInv_(S);this.addQuad_(t,e,T,S,o,a,x,R,c-1),this.addQuad_(S,T,i,n,R,x,d,f,c-1)}else{var O=[(t[0]+e[0])/2,(t[1]+e[1])/2],P=this.transformInv_(O),I=[(i[0]+n[0])/2,(i[1]+n[1])/2],w=this.transformInv_(I);this.addQuad_(t,O,I,n,o,P,w,f,c-1),this.addQuad_(O,e,i,I,P,a,d,w,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,n,o,d,f),this.addTriangle_(t,e,i,o,a,d)}},f.prototype.calculateSourceExtent=function(){var t=l.default.createEmpty();return this.triangles_.forEach(function(e){var i=e.source;l.default.extendCoordinate(t,i[0]),l.default.extendCoordinate(t,i[1]),l.default.extendCoordinate(t,i[2])}),t},f.prototype.getTriangles=function(){return this.triangles_},e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.round;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(8)),a=n(i(1)),s=n(i(6)),l=n(i(16)),u={calculateSourceResolution:function(t,e,i,n){var r=l.default.transform(i,e,t),o=l.default.getPointResolution(e,n,i),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var u=t.getMetersPerUnit();void 0!==u&&(o/=u);var d=t.getExtent();if(!d||a.default.containsCoordinate(d,r)){var f=l.default.getPointResolution(t,o,r)/o;isFinite(f)&&0<f&&(o/=f)}return o},enlargeClipPoint_:function(t,e,i,n){var o=i-t,a=n-e,s=Math.sqrt(o*o+a*a);return[r(i+o/s),r(n+a/s)]},render:function(t,e,i,n,l,d,f,c,h,p,_){var g=o.default.createCanvasContext2D(r(i*t),r(i*e));if(0===h.length)return g.canvas;g.scale(i,i);var y=a.default.createEmpty();h.forEach(function(t){a.default.extend(y,t.extent)});var v=a.default.getWidth(y),m=a.default.getHeight(y),E=o.default.createCanvasContext2D(r(i*v/n),r(i*m/n)),b=i/n;h.forEach(function(t){var e=t.extent[0]-y[0],i=-(t.extent[3]-y[3]),n=a.default.getWidth(t.extent),r=a.default.getHeight(t.extent);E.drawImage(t.image,p,p,t.image.width-2*p,t.image.height-2*p,e*b,i*b,n*b,r*b)});var C=a.default.getTopLeft(f);return c.getTriangles().forEach(function(t){var e=t.source,r=t.target,o=e[0][0],a=e[0][1],l=e[1][0],f=e[1][1],c=e[2][0],h=e[2][1],p=(r[0][0]-C[0])/d,_=-(r[0][1]-C[1])/d,v=(r[1][0]-C[0])/d,m=-(r[1][1]-C[1])/d,b=(r[2][0]-C[0])/d,T=-(r[2][1]-C[1])/d,x=o,S=a;o=0,a=0;var R=[[l-=x,f-=S,0,0,v-p],[c-=x,h-=S,0,0,b-p],[0,0,l,f,m-_],[0,0,c,h,T-_]],O=s.default.solveLinearSystem(R);if(O){g.save(),g.beginPath();var P=(p+v+b)/3,I=(_+m+T)/3,w=u.enlargeClipPoint_(P,I,p,_),L=u.enlargeClipPoint_(P,I,v,m),A=u.enlargeClipPoint_(P,I,b,T);g.moveTo(L[0],L[1]),g.lineTo(w[0],w[1]),g.lineTo(A[0],A[1]),g.clip(),g.transform(O[0],O[2],O[1],O[3],p,_),g.translate(y[0]-x,y[3]-S),g.scale(n/i,-n/i),g.drawImage(E.canvas,0,0),g.restore()}}),_&&(g.save(),g.strokeStyle="black",g.lineWidth=1,c.getTriangles().forEach(function(t){var e=t.target,i=(e[0][0]-C[0])/d,n=-(e[0][1]-C[1])/d,r=(e[1][0]-C[0])/d,o=-(e[1][1]-C[1])/d,a=(e[2][0]-C[0])/d,s=-(e[2][1]-C[1])/d;g.beginPath(),g.moveTo(r,o),g.lineTo(i,n),g.lineTo(a,s),g.closePath(),g.stroke()}),g.restore()),g.canvas}};e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(108)),a=n(i(20)),s=n(i(5)),l=n(i(4)),u=n(i(1)),d=n(i(6)),f=n(i(190)),c=n(i(189)),h=function(t,e,i,n,s,l,h,p,_,g,y){o.default.call(this,s,a.default.IDLE),this.renderEdges_=void 0!==y&&y,this.pixelRatio_=h,this.gutter_=p,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=l||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var v=n.getTileCoordExtent(this.wrappedTileCoord_),m=this.targetTileGrid_.getExtent(),E=this.sourceTileGrid_.getExtent(),b=m?u.default.getIntersection(v,m):v;if(0!==u.default.getArea(b)){var C=t.getExtent();C&&(E=E?u.default.getIntersection(E,C):C);var T=n.getResolution(this.wrappedTileCoord_[0]),x=u.default.getCenter(b),S=f.default.calculateSourceResolution(t,i,x,T);if(!isFinite(S)||0>=S)this.state=a.default.EMPTY;else{var R=void 0===g?r.default.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD:g;if(this.triangulation_=new c.default(t,i,b,E,S*R),0!==this.triangulation_.getTriangles().length){this.sourceZ_=e.getZForResolution(S);var O=this.triangulation_.calculateSourceExtent();if(E&&(t.canWrapX()?(O[1]=d.default.clamp(O[1],E[1],E[3]),O[3]=d.default.clamp(O[3],E[1],E[3])):O=u.default.getIntersection(O,E)),u.default.getArea(O)){for(var P=e.getTileRangeForExtentAndZ(O,this.sourceZ_),I=P.minX;I<=P.maxX;I++)for(var w,L=P.minY;L<=P.maxY;L++)(w=_(this.sourceZ_,I,L,h))&&this.sourceTiles_.push(w);0===this.sourceTiles_.length&&(this.state=a.default.EMPTY)}else this.state=a.default.EMPTY}else this.state=a.default.EMPTY}}else this.state=a.default.EMPTY};r.default.inherits(h,o.default),h.prototype.disposeInternal=function(){this.state==a.default.LOADING&&this.unlistenSources_(),o.default.prototype.disposeInternal.call(this)},h.prototype.getImage=function(){return this.canvas_},h.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e){e&&e.getState()==a.default.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})},this),this.sourceTiles_.length=0,0===t.length)this.state=a.default.ERROR;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=f.default.render(n,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=a.default.LOADED}this.changed()},h.prototype.load=function(){if(this.state==a.default.IDLE){this.state=a.default.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e){var i,n=e.getState();n!=a.default.IDLE&&n!=a.default.LOADING||(t++,i=s.default.listen(e,l.default.CHANGE,function(){var n=e.getState();(n==a.default.LOADED||n==a.default.ERROR||n==a.default.EMPTY)&&(s.default.unlistenByKey(i),0==--t&&(this.unlistenSources_(),this.reproject_()))},this),this.sourcesListenerKeys_.push(i))},this),this.sourceTiles_.forEach(function(t){t.getState()==a.default.IDLE&&t.load()}),0==t&&setTimeout(this.reproject_.bind(this),0)}},h.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(s.default.unlistenByKey),this.sourcesListenerKeys_=null},e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(108)),a=n(i(20)),s=n(i(8)),l=n(i(5)),u=n(i(4)),d=function(t,e,i,n,r,a){o.default.call(this,t,e,a),this.crossOrigin_=n,this.src_=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.imageListenerKeys_=null,this.tileLoadFunction_=r};r.default.inherits(d,o.default),d.prototype.disposeInternal=function(){this.state==a.default.LOADING&&(this.unlistenImage_(),this.image_=d.getBlankImage()),this.interimTile&&this.interimTile.dispose(),this.state=a.default.ABORT,this.changed(),o.default.prototype.disposeInternal.call(this)},d.prototype.getImage=function(){return this.image_},d.prototype.getKey=function(){return this.src_},d.prototype.handleImageError_=function(){this.state=a.default.ERROR,this.unlistenImage_(),this.image_=d.getBlankImage(),this.changed()},d.prototype.handleImageLoad_=function(){this.state=this.image_.naturalWidth&&this.image_.naturalHeight?a.default.LOADED:a.default.EMPTY,this.unlistenImage_(),this.changed()},d.prototype.load=function(){this.state==a.default.ERROR&&(this.state=a.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==a.default.IDLE&&(this.state=a.default.LOADING,this.changed(),this.imageListenerKeys_=[l.default.listenOnce(this.image_,u.default.ERROR,this.handleImageError_,this),l.default.listenOnce(this.image_,u.default.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},d.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(l.default.unlistenByKey),this.imageListenerKeys_=null},d.getBlankImage=function(){var t=s.default.createCanvasContext2D(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas},e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(192)),a=n(i(107)),s=n(i(20)),l=n(i(5)),u=n(i(4)),d=n(i(16)),f=n(i(191)),c=n(i(188)),h=n(i(49)),p=n(i(62)),_=function t(e){c.default.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,logo:e.logo,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:t.defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition}),this.crossOrigin=void 0===e.crossOrigin?null:e.crossOrigin,this.tileClass=void 0===e.tileClass?o.default:e.tileClass,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1};r.default.inherits(_,c.default),_.prototype.canExpireCache=function(){if(!r.default.ENABLE_RASTER_REPROJECTION)return c.default.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},_.prototype.expireCache=function(t,e){if(r.default.ENABLE_RASTER_REPROJECTION){var i=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[n];o.expireCache(o==i?e:{})}}else c.default.prototype.expireCache.call(this,t,e)},_.prototype.getGutter=function(t){return r.default.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!d.default.equivalent(this.getProjection(),t)?0:this.getGutterInternal()},_.prototype.getGutterInternal=function(){return 0},_.prototype.getOpaque=function(t){return!(r.default.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!d.default.equivalent(this.getProjection(),t))&&c.default.prototype.getOpaque.call(this,t)},_.prototype.getTileGridForProjection=function(t){if(!r.default.ENABLE_RASTER_REPROJECTION)return c.default.prototype.getTileGridForProjection.call(this,t);var e=this.getProjection();if(this.tileGrid&&(!e||d.default.equivalent(e,t)))return this.tileGrid;var i=r.default.getUid(t).toString();return i in this.tileGridForProjection||(this.tileGridForProjection[i]=p.default.getForProjection(t)),this.tileGridForProjection[i]},_.prototype.getTileCacheForProjection=function(t){if(!r.default.ENABLE_RASTER_REPROJECTION)return c.default.prototype.getTileCacheForProjection.call(this,t);var e=this.getProjection();if(!e||d.default.equivalent(e,t))return this.tileCache;var i=r.default.getUid(t).toString();return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new a.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},_.prototype.createTile_=function(t,e,i,n,r,o){var a=[t,e,i],d=this.getTileCoordForTileUrlFunction(a,r),f=d?this.tileUrlFunction(d,n,r):void 0,c=new this.tileClass(a,void 0===f?s.default.EMPTY:s.default.IDLE,void 0===f?"":f,this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,l.default.listen(c,u.default.CHANGE,this.handleTileChange,this),c},_.prototype.getTile=function(t,e,i,n,o){var a=this.getProjection();if(!r.default.ENABLE_RASTER_REPROJECTION||!a||!o||d.default.equivalent(a,o))return this.getTileInternal(t,e,i,n,a||o);var s,l=this.getTileCacheForProjection(o),u=[t,e,i],c=h.default.getKey(u);l.containsKey(c)&&(s=l.get(c));var p=this.getKey();if(s&&s.key==p)return s;var _=this.getTileGridForProjection(a),g=this.getTileGridForProjection(o),y=this.getTileCoordForTileUrlFunction(u,o),v=new f.default(a,_,o,g,u,y,this.getTilePixelRatio(n),this.getGutterInternal(),function(t,e,i,n){return this.getTileInternal(t,e,i,n,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return v.key=p,s?(v.interimTile=s,v.refreshInterimChain(),l.replace(c,v)):l.set(c,v),v},_.prototype.getTileInternal=function(t,e,i,n,r){var o=null,a=h.default.getKeyZXY(t,e,i),l=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=l){var u=o;(o=this.createTile_(t,e,i,n,r,l)).interimTile=u.getState()==s.default.IDLE?u.interimTile:u,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,i,n,r,l),this.tileCache.set(a,o);return o},_.prototype.setRenderReprojectionEdges=function(t){if(r.default.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},_.prototype.setTileGridForProjection=function(t,e){if(r.default.ENABLE_RASTER_REPROJECTION){var i=d.default.get(t);if(i){var n=r.default.getUid(i).toString();n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}},_.defaultTileLoadFunction=function(t,e){t.getImage().src=e},e.default=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(193)),a=n(i(62)),s=function(t){var e=t||{},i=void 0===e.projection?"EPSG:3857":e.projection,n=void 0===e.tileGrid?a.default.createXYZ({extent:a.default.extentFromProjection(i),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize}):e.tileGrid;o.default.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,opaque:e.opaque,projection:i,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:!(void 0!==e.wrapX)||e.wrapX,transition:e.transition})};r.default.inherits(s,o.default),e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(23)),a=n(i(17)),s=n(i(1)),l=n(i(114)),u=n(i(21)),d=n(i(91)),f=n(i(90)),c=n(i(10)),h=function(t,e){f.default.call(this,t,e),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=s.default.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null};r.default.inherits(h,f.default),h.handles=function(t,e){return t===u.default.WEBGL&&e.getType()===o.default.VECTOR},h.create=function(t,e){return new h(t,e)},h.prototype.composeFrame=function(t,e,i){this.layerState_=e;var n=t.viewState,r=this.replayGroup_,o=t.size,a=t.pixelRatio,s=this.mapRenderer.getGL();r&&!r.isEmpty()&&(s.enable(s.SCISSOR_TEST),s.scissor(0,0,o[0]*a,o[1]*a),r.replay(i,n.center,n.resolution,n.rotation,o,a,e.opacity,e.managed?t.skippedFeatureUids:{}),s.disable(s.SCISSOR_TEST))},h.prototype.disposeInternal=function(){var t=this.replayGroup_;if(t){var e=this.mapRenderer.getContext();t.getDeleteResourcesFunction(e)(),this.replayGroup_=null}f.default.prototype.disposeInternal.call(this)},h.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){if(this.replayGroup_&&this.layerState_){var a=this.mapRenderer.getContext(),s=e.viewState,l=this.getLayer(),u=this.layerState_,d={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s.center,s.resolution,s.rotation,e.size,e.pixelRatio,u.opacity,{},function(t){var e=r.default.getUid(t).toString();if(!(e in d))return d[e]=!0,n.call(o,t,l)})}},h.prototype.hasFeatureAtCoordinate=function(t,e){if(!this.replayGroup_||!this.layerState_)return!1;var i=this.mapRenderer.getContext(),n=e.viewState,r=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(t,i,n.center,n.resolution,n.rotation,e.size,e.pixelRatio,r.opacity,e.skippedFeatureUids)},h.prototype.forEachLayerAtPixel=function(t,e,i,n){var r=c.default.apply(e.pixelToCoordinateTransform,t.slice());return this.hasFeatureAtCoordinate(r,e)?i.call(n,this.getLayer(),null):void 0},h.prototype.handleStyleImageChange_=function(){this.renderIfReadyAndVisible()},h.prototype.prepareFrame=function(t,e,i){var n=this.getLayer(),r=n.getSource();this.updateLogos(t,r);var o=t.viewHints[a.default.ANIMATING],u=t.viewHints[a.default.INTERACTING],f=n.getUpdateWhileAnimating(),c=n.getUpdateWhileInteracting();if(!this.dirty_&&!f&&o||!c&&u)return!0;var h=t.extent,p=t.viewState,_=p.projection,g=p.resolution,y=t.pixelRatio,v=n.getRevision(),m=n.getRenderBuffer(),E=n.getRenderOrder();void 0===E&&(E=d.default.defaultOrder);var b=s.default.buffer(h,m*g);if(!this.dirty_&&this.renderedResolution_==g&&this.renderedRevision_==v&&this.renderedRenderOrder_==E&&s.default.containsExtent(this.renderedExtent_,b))return!0;this.replayGroup_&&t.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(i)),this.dirty_=!1;var C=new l.default(d.default.getTolerance(g,y),b,n.getRenderBuffer());r.loadFeatures(b,g,_);var T=function(t){var e,i=t.getStyleFunction();if(i?e=i.call(t,g):(i=n.getStyleFunction())&&(e=i(t,g)),e){var r=this.renderFeature(t,g,y,e,C);this.dirty_=this.dirty_||r}};if(E){var x=[];r.forEachFeatureInExtent(b,function(t){x.push(t)},this),x.sort(E),x.forEach(T,this)}else r.forEachFeatureInExtent(b,T,this);return C.finish(i),this.renderedResolution_=g,this.renderedRevision_=v,this.renderedRenderOrder_=E,this.renderedExtent_=b,this.replayGroup_=C,!0},h.prototype.renderFeature=function(t,e,i,n,r){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var a=n.length-1;a>=0;--a)o=d.default.renderFeature(r,t,n[a],d.default.getSquaredTolerance(e,i),this.handleStyleImageChange_,this)||o;else o=d.default.renderFeature(r,t,n,d.default.getSquaredTolerance(e,i),this.handleStyleImageChange_,this)||o;return o},e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0));e.default=function(t,e){this.u_tileOffset=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_tileOffset":"d"),this.u_texture=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_texture":"e"),this.a_position=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_texCoord":"c")}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(42)),a=n(i(41)),s={};s.fragment=new o.default(r.default.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n":"precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"),s.vertex=new a.default(r.default.DEBUG_WEBGL?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}"),e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.round;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(23)),s=n(i(82)),l=n(i(20)),u=n(i(7)),d=n(i(1)),f=n(i(6)),c=n(i(21)),h=n(i(90)),p=n(i(197)),_=n(i(196)),g=n(i(61)),y=n(i(10)),v=n(i(14)),m=n(i(33)),E=function(t,e){h.default.call(this,t,e),this.fragmentShader_=p.default.fragment,this.vertexShader_=p.default.vertex,this.locations_=null,this.renderArrayBuffer_=new m.default([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]};o.default.inherits(E,h.default),E.handles=function(t,e){return t===c.default.WEBGL&&e.getType()===a.default.TILE},E.create=function(t,e){return new E(t,e)},E.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),h.default.prototype.disposeInternal.call(this)},E.prototype.createLoadedTileFinder=function(t,e,i){var n=this.mapRenderer;return function(r,o){return t.forEachLoadedTile(e,r,o,function(t){var e=n.isTileTextureLoaded(t);return e&&(!i[r]&&(i[r]={}),i[r][t.tileCoord.toString()]=t),e})}},E.prototype.handleWebGLContextLost=function(){h.default.prototype.handleWebGLContextLost.call(this),this.locations_=null},E.prototype.prepareFrame=function(t,e,i){var n,o=this.mapRenderer,a=i.getGL(),c=t.viewState,h=c.projection,p=this.getLayer(),m=p.getSource(),E=m.getTileGridForProjection(h),b=E.getZForResolution(c.resolution),C=E.getResolution(b),T=m.getTilePixelSize(b,t.pixelRatio,h),x=T[0]/g.default.toSize(E.getTileSize(b),this.tmpSize_)[0],S=C/x,R=m.getTilePixelRatio(x)*m.getGutter(h),O=c.center,P=t.extent,I=E.getTileRangeForExtentAndZ(P,b);if(this.renderedTileRange_&&this.renderedTileRange_.equals(I)&&this.renderedRevision_==m.getRevision())n=this.renderedFramebufferExtent_;else{var w=I.getSize(),L=Math.max(w[0]*T[0],w[1]*T[1]),A=f.default.roundUpToPowerOfTwo(L),M=S*A,F=E.getOrigin(b),D=F[0]+I.minX*T[0]*S,N=F[1]+I.minY*T[1]*S;n=[D,N,D+M,N+M],this.bindFramebuffer(t,A),a.viewport(0,0,A,A),a.clearColor(0,0,0,0),a.clear(v.default.COLOR_BUFFER_BIT),a.disable(v.default.BLEND);var k=i.getProgram(this.fragmentShader_,this.vertexShader_);i.useProgram(k),this.locations_||(this.locations_=new _.default(a,k)),i.bindBuffer(v.default.ARRAY_BUFFER,this.renderArrayBuffer_),a.enableVertexAttribArray(this.locations_.a_position),a.vertexAttribPointer(this.locations_.a_position,2,v.default.FLOAT,!1,16,0),a.enableVertexAttribArray(this.locations_.a_texCoord),a.vertexAttribPointer(this.locations_.a_texCoord,2,v.default.FLOAT,!1,16,8),a.uniform1i(this.locations_.u_texture,0);var G={};G[b]={};var j,U,B,W,z,X,Y=this.createLoadedTileFinder(m,h,G),H=p.getUseInterimTilesOnError(),V=!0,K=d.default.createEmpty(),Z=new s.default(0,0,0,0);for(W=I.minX;W<=I.maxX;++W)for(z=I.minY;z<=I.maxY;++z)if(U=m.getTile(b,W,z,x,h),void 0===e.extent||(X=E.getTileCoordExtent(U.tileCoord,K),d.default.intersects(X,e.extent))){if((B=U.getState())==l.default.LOADED||B==l.default.EMPTY||B==l.default.ERROR&&!H||(U=U.getInterimTile()),(B=U.getState())==l.default.LOADED){if(o.isTileTextureLoaded(U)){G[b][U.tileCoord.toString()]=U;continue}}else if(B==l.default.EMPTY||B==l.default.ERROR&&!H)continue;V=!1,E.forEachTileCoordParentTileRange(U.tileCoord,Y,null,Z,K)||(j=E.getTileCoordChildTileRange(U.tileCoord,Z,K))&&Y(b+1,j)}var q=Object.keys(G).map(Number);q.sort(u.default.numberSafeCompareFunction);var J,Q,$,tt,et=new Float32Array(4);for(J=0,Q=q.length;J<Q;++J)for($ in tt=G[q[J]])U=tt[$],X=E.getTileCoordExtent(U.tileCoord,K),et[0]=2*(X[2]-X[0])/M,et[1]=2*(X[3]-X[1])/M,et[2]=2*(X[0]-n[0])/M-1,et[3]=2*(X[1]-n[1])/M-1,a.uniform4fv(this.locations_.u_tileOffset,et),o.bindTileTexture(U,T,R*x,v.default.LINEAR,v.default.LINEAR),a.drawArrays(v.default.TRIANGLE_STRIP,0,4);V?(this.renderedTileRange_=I,this.renderedFramebufferExtent_=n,this.renderedRevision_=m.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,t.animate=!0)}this.updateUsedTiles(t.usedTiles,m,b,I);var it=o.getTileTextureQueue();this.manageTilePyramid(t,m,E,x,h,P,b,p.getPreload(),function(t){t.getState()!=l.default.LOADED||o.isTileTextureLoaded(t)||it.isKeyQueued(t.getKey())||it.enqueue([t,E.getTileCoordCenter(t.tileCoord),E.getResolution(t.tileCoord[0]),T,R*x])},this),this.scheduleExpireCache(t,m),this.updateLogos(t,m);var nt=this.texCoordMatrix;return y.default.reset(nt),y.default.translate(nt,(r(O[0]/C)*C-n[0])/(n[2]-n[0]),(r(O[1]/C)*C-n[1])/(n[3]-n[1])),0!==c.rotation&&y.default.rotate(nt,c.rotation),y.default.scale(nt,t.size[0]*c.resolution/(n[2]-n[0]),t.size[1]*c.resolution/(n[3]-n[1])),y.default.translate(nt,-.5,-.5),!0},E.prototype.forEachLayerAtPixel=function(t,e,i,n){if(this.framebuffer){var r=[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]],o=y.default.apply(this.texCoordMatrix,r.slice()),a=[o[0]*this.framebufferDimension,o[1]*this.framebufferDimension],s=this.mapRenderer.getContext().getGL();s.bindFramebuffer(s.FRAMEBUFFER,this.framebuffer);var l=new Uint8Array(4);return s.readPixels(a[0],a[1],1,1,s.RGBA,s.UNSIGNED_BYTE,l),0<l[3]?i.call(n,this.getLayer(),l):void 0}},e.default=E},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(7)),a=n(i(40)),s=n(i(8)),l=n(i(5)),u=n(i(19)),d=n(i(46)),f=n(i(69)),c=n(i(45)),h=n(i(115)),p=n(i(119)),_=n(i(21)),g=n(i(34)),y=n(i(102)),v=n(i(94)),m=n(i(14)),E=n(i(65)),b=n(i(110)),C=function(t,e){p.default.call(this,t,e),this.canvas_=document.createElement("CANVAS"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=a.default.CLASS_UNSELECTABLE,t.insertBefore(this.canvas_,t.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=s.default.createCanvasContext2D(),this.renderedVisible_=!0,this.gl_=m.default.getContext(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new E.default(this.canvas_,this.gl_),l.default.listen(this.canvas_,b.default.LOST,this.handleWebGLContextLost,this),l.default.listen(this.canvas_,b.default.RESTORED,this.handleWebGLContextRestored,this),this.textureCache_=new y.default,this.focus_=null,this.tileTextureQueue_=new v.default(function(t){var e=t[1],i=t[2],n=e[0]-this.focus_[0],r=e[1]-this.focus_[1];return 65536*Math.log(i)+Math.sqrt(n*n+r*r)/i}.bind(this),function(t){return t[0].getKey()}),this.loadNextTileTexture_=function(){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var t=this.tileTextureQueue_.dequeue(),e=t[0],i=t[3],n=t[4];this.bindTileTexture(e,i,n,m.default.LINEAR,m.default.LINEAR)}return!1}.bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()};r.default.inherits(C,p.default),C.handles=function(t){return u.default.WEBGL&&t===_.default.WEBGL},C.create=function(t,e){return new C(t,e)},C.prototype.bindTileTexture=function(t,e,i,n,r){var o=this.getGL(),a=t.getKey();if(this.textureCache_.containsKey(a)){var s=this.textureCache_.get(a);o.bindTexture(m.default.TEXTURE_2D,s.texture),s.magFilter!=n&&(o.texParameteri(m.default.TEXTURE_2D,m.default.TEXTURE_MAG_FILTER,n),s.magFilter=n),s.minFilter!=r&&(o.texParameteri(m.default.TEXTURE_2D,m.default.TEXTURE_MIN_FILTER,r),s.minFilter=r)}else{var l=o.createTexture();if(o.bindTexture(m.default.TEXTURE_2D,l),0<i){var u=this.clipTileContext_.canvas,d=this.clipTileContext_;this.clipTileCanvasWidth_!==e[0]||this.clipTileCanvasHeight_!==e[1]?(u.width=e[0],u.height=e[1],this.clipTileCanvasWidth_=e[0],this.clipTileCanvasHeight_=e[1]):d.clearRect(0,0,e[0],e[1]),d.drawImage(t.getImage(),i,i,e[0],e[1],0,0,e[0],e[1]),o.texImage2D(m.default.TEXTURE_2D,0,m.default.RGBA,m.default.RGBA,m.default.UNSIGNED_BYTE,u)}else o.texImage2D(m.default.TEXTURE_2D,0,m.default.RGBA,m.default.RGBA,m.default.UNSIGNED_BYTE,t.getImage());o.texParameteri(m.default.TEXTURE_2D,m.default.TEXTURE_MAG_FILTER,n),o.texParameteri(m.default.TEXTURE_2D,m.default.TEXTURE_MIN_FILTER,r),o.texParameteri(m.default.TEXTURE_2D,m.default.TEXTURE_WRAP_S,m.default.CLAMP_TO_EDGE),o.texParameteri(m.default.TEXTURE_2D,m.default.TEXTURE_WRAP_T,m.default.CLAMP_TO_EDGE),this.textureCache_.set(a,{texture:l,magFilter:n,minFilter:r})}},C.prototype.dispatchComposeEvent_=function(t,e){var i=this.getMap();if(i.hasListener(t)){var n=this.context_,r=e.extent,o=e.size,a=e.viewState,s=e.pixelRatio,l=a.resolution,u=a.center,d=a.rotation,c=new h.default(n,u,l,d,o,r,s),p=new f.default(t,c,e,null,n);i.dispatchEvent(p)}},C.prototype.disposeInternal=function(){var t=this.getGL();t.isContextLost()||this.textureCache_.forEach(function(e){e&&t.deleteTexture(e.texture)}),this.context_.dispose(),p.default.prototype.disposeInternal.call(this)},C.prototype.expireCache_=function(t,e){for(var i,n=this.getGL();this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>r.default.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK;){if(i=this.textureCache_.peekLast())n.deleteTexture(i.texture);else{if(+this.textureCache_.peekLastKey()==e.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},C.prototype.getContext=function(){return this.context_},C.prototype.getGL=function(){return this.gl_},C.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},C.prototype.getType=function(){return _.default.WEBGL},C.prototype.handleWebGLContextLost=function(t){t.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;var e=this.getLayerRenderers();for(var i in e){e[i].handleWebGLContextLost()}},C.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},C.prototype.initializeGL_=function(){var t=this.gl_;t.activeTexture(m.default.TEXTURE0),t.blendFuncSeparate(m.default.SRC_ALPHA,m.default.ONE_MINUS_SRC_ALPHA,m.default.ONE,m.default.ONE_MINUS_SRC_ALPHA),t.disable(m.default.CULL_FACE),t.disable(m.default.DEPTH_TEST),t.disable(m.default.SCISSOR_TEST),t.disable(m.default.STENCIL_TEST)},C.prototype.isTileTextureLoaded=function(t){return this.textureCache_.containsKey(t.getKey())},C.prototype.renderFrame=function(t){var e=this.getContext(),i=this.getGL();if(i.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchComposeEvent_(c.default.PRECOMPOSE,t);var n=[],a=t.layerStatesArray;o.default.stableSort(a,p.default.sortByZIndex);var s,l,u,f=t.viewState.resolution;for(s=0,l=a.length;s<l;++s)u=a[s],d.default.visibleAtResolution(u,f)&&u.sourceState==g.default.READY&&(this.getLayerRenderer(u.layer).prepareFrame(t,u,e)&&n.push(u));var h=t.size[0]*t.pixelRatio,_=t.size[1]*t.pixelRatio;for((this.canvas_.width!=h||this.canvas_.height!=_)&&(this.canvas_.width=h,this.canvas_.height=_),i.bindFramebuffer(m.default.FRAMEBUFFER,null),i.clearColor(0,0,0,0),i.clear(m.default.COLOR_BUFFER_BIT),i.enable(m.default.BLEND),i.viewport(0,0,this.canvas_.width,this.canvas_.height),s=0,l=n.length;s<l;++s)u=n[s],this.getLayerRenderer(u.layer).composeFrame(t,u,e);this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>r.default.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchComposeEvent_(c.default.POSTCOMPOSE,t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},C.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o,a){var s;if(this.getGL().isContextLost())return!1;var l,u=e.viewState,f=e.layerStatesArray;for(l=f.length-1;0<=l;--l){var c=f[l],h=c.layer;if(d.default.visibleAtResolution(c,u.resolution)&&o.call(a,h))if(s=this.getLayerRenderer(h).forEachFeatureAtCoordinate(t,e,i,n,r))return s}},C.prototype.hasFeatureAtCoordinate=function(t,e,i,n,r){var o=!1;if(this.getGL().isContextLost())return!1;var a,s=e.viewState,l=e.layerStatesArray;for(a=l.length-1;0<=a;--a){var u=l[a],f=u.layer;if(d.default.visibleAtResolution(u,s.resolution)&&n.call(r,f))if(o=this.getLayerRenderer(f).hasFeatureAtCoordinate(t,e))return!0}return o},C.prototype.forEachLayerAtPixel=function(t,e,i,n,r){if(this.getGL().isContextLost())return!1;var o,a,s=e.viewState,l=e.layerStatesArray;for(a=l.length-1;0<=a;--a){var u=l[a],f=u.layer;if(d.default.visibleAtResolution(u,s.resolution)&&r.call(n,f))if(o=this.getLayerRenderer(f).forEachLayerAtPixel(t,e,i,n))return o}},e.default=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0));e.default=function(t,e){this.u_texCoordMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_texCoordMatrix":"d"),this.u_projectionMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_projectionMatrix":"e"),this.u_opacity=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_opacity":"f"),this.u_texture=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_texture":"g"),this.a_position=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_texCoord":"c")}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(42)),a=n(i(41)),s={};s.fragment=new o.default(r.default.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n":"precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"),s.vertex=new a.default(r.default.DEBUG_WEBGL?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}"),e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(8)),r=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=n.default.createCanvasContext2D(t,t),this.canvas_=this.context_.canvas};r.prototype.get=function(t){return this.entries_[t]||null},r.prototype.add=function(t,e,i,n,r){var o,a,s;for(a=0,s=this.emptyBlocks_.length;a<s;++a)if((o=this.emptyBlocks_[a]).width>=e+this.space_&&o.height>=i+this.space_){var l={offsetX:o.x+this.space_,offsetY:o.y+this.space_,image:this.canvas_};return this.entries_[t]=l,n.call(r,this.context_,o.x+this.space_,o.y+this.space_),this.split_(a,o,e+this.space_,i+this.space_),l}return null},r.prototype.split_=function(t,e,i,n){var r,o;e.width-i>e.height-n?(r={x:e.x+i,y:e.y,width:e.width-i,height:e.height},o={x:e.x,y:e.y+n,width:i,height:e.height-n},this.updateBlocks_(t,r,o)):(r={x:e.x+i,y:e.y,width:e.width-i,height:n},o={x:e.x,y:e.y+n,width:e.width,height:e.height-n},this.updateBlocks_(t,r,o))},r.prototype.updateBlocks_=function(t,e,i){var n=[t,1];0<e.width&&0<e.height&&n.push(e),0<i.width&&0<i.height&&n.push(i),this.emptyBlocks_.splice.apply(this.emptyBlocks_,n)},e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.min;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(202)),s=function(t){var e=t||{};this.currentSize_=void 0===e.initialSize?o.default.INITIAL_ATLAS_SIZE:e.initialSize,this.maxSize_=void 0===e.maxSize?-1==o.default.MAX_ATLAS_SIZE?void 0===o.default.WEBGL_MAX_TEXTURE_SIZE?2048:o.default.WEBGL_MAX_TEXTURE_SIZE:o.default.MAX_ATLAS_SIZE:e.maxSize,this.space_=void 0===e.space?1:e.space,this.atlases_=[new a.default(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new a.default(this.currentHitSize_,this.space_)]};s.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var i=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,i)},s.prototype.getInfo_=function(t,e){var i,n,r;for(n=0,r=t.length;n<r;++n)if(i=t[n].get(e))return i;return null},s.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},s.prototype.add=function(t,e,i,n,r,a){if(e+this.space_>this.maxSize_||i+this.space_>this.maxSize_)return null;var s=this.add_(!1,t,e,i,n,a);if(!s)return null;var l=void 0===r?o.default.nullFunction:r,u=this.add_(!0,t,e,i,l,a);return this.mergeInfos_(s,u)},s.prototype.add_=function(t,e,i,n,o,s){var l,u,d,f,c=t?this.hitAtlases_:this.atlases_;for(d=0,f=c.length;d<f;++d){if(u=(l=c[d]).add(e,i,n,o,s))return u;var h;if(!u&&d===f-1)t?(h=r(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=h):(h=r(2*this.currentSize_,this.maxSize_),this.currentSize_=h),l=new a.default(h,this.space_),c.push(l),++f}return null},e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.round,o=Math.ceil;Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(0)),s=n(i(63)),l=n(i(8)),u=n(i(12)),d=n(i(19)),f=n(i(43)),c=n(i(66)),h=n(i(111)),p=n(i(203)),_=n(i(33)),g=function(t,e){h.default.call(this,t,e),this.images_=[],this.textures_=[],this.measureCanvas_=l.default.createCanvasContext2D(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1};a.default.inherits(g,h.default),g.prototype.drawText=function(t,e){if(this.text_){var i=null,n=2,o=2;switch(t.getType()){case u.default.POINT:case u.default.MULTI_POINT:n=(i=t.getFlatCoordinates()).length,o=t.getStride();break;case u.default.CIRCLE:i=t.getCenter();break;case u.default.LINE_STRING:i=t.getFlatMidpoint();break;case u.default.MULTI_LINE_STRING:n=(i=t.getFlatMidpoints()).length;break;case u.default.POLYGON:i=t.getFlatInteriorPoint();break;case u.default.MULTI_POLYGON:n=(i=t.getFlatInteriorPoints()).length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var s,l,d,f,c,h,p,_,g=this.currAtlas_,y=this.text_.split("\n"),v=this.getTextSize_(y),m=r(v[0]*this.textAlign_-this.offsetX_),E=r(v[1]*this.textBaseline_-this.offsetY_),b=this.state_.lineWidth/2*this.state_.scale;for(s=0,l=y.length;s<l;++s)for(c=0,h=g.height*s,d=0,f=(p=y[s].split("")).length;d<f;++d){if(_=g.atlas.getInfo(p[d])){var C,T=_.image;this.anchorX=m-c,this.anchorY=E-h,this.originX=0===d?_.offsetX-b:_.offsetX,this.originY=_.offsetY,this.height=g.height,this.width=0===d||d===p.length-1?g.width[p[d]]+b:g.width[p[d]],this.imageHeight=T.height,this.imageWidth=T.width,0===this.images_.length?this.images_.push(T):(C=this.images_[this.images_.length-1],a.default.getUid(C)!=a.default.getUid(T)&&(this.groupIndices.push(this.indices.length),this.images_.push(T))),this.drawText_(i,0,n,o)}c+=this.width}}},g.prototype.getTextSize_=function(t){var e=this,i=this.currAtlas_,n=t.length*i.height;return[t.map(function(t){var n,r,o=0;for(n=0,r=t.length;n<r;++n){var a=t[n];i.width[a]||e.addCharToAtlas_(a),o+=i.width[a]?i.width[a]:0}return o}).reduce(function(t,e){return Math.max(t,e)}),n]},g.prototype.drawText_=function(t,e,i,n){var r,o;for(r=e,o=i;r<o;r+=n)this.drawCoordinates(t,e,i,n)},g.prototype.addCharToAtlas_=function(t){if(1===t.length){var e=this.currAtlas_,i=this.state_,n=this.measureCanvas_.getContext("2d");n.font=i.font;var r=o(n.measureText(t).width*i.scale);e.atlas.add(t,r,e.height,function(e,n,r){e.font=i.font,e.fillStyle=i.fillColor,e.strokeStyle=i.strokeColor,e.lineWidth=i.lineWidth,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.miterLimit=i.miterLimit,e.textAlign="left",e.textBaseline="top",d.default.CANVAS_LINE_DASH&&i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),1!==i.scale&&e.setTransform(i.scale,0,0,i.scale,0,0),i.strokeColor&&e.strokeText(t,n,r),i.fillColor&&e.fillText(t,n,r)})&&(e.width[t]=r)}},g.prototype.finish=function(t){var e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new _.default(this.vertices),this.indicesBuffer=new _.default(this.indices),this.createTextures(this.textures_,this.images_,{},e),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,h.default.prototype.finish.call(this,t)},g.prototype.setTextStyle=function(t){var e=this.state_,i=t.getFill(),n=t.getStroke();if(t&&t.getText()&&(i||n)){if(i){var r=i.getColor();e.fillColor=s.default.asColorLike(r||c.default.defaultFillStyle)}else e.fillColor=null;if(n){var o=n.getColor();e.strokeColor=s.default.asColorLike(o||c.default.defaultStrokeStyle),e.lineWidth=n.getWidth()||c.default.defaultLineWidth,e.lineCap=n.getLineCap()||c.default.defaultLineCap,e.lineDashOffset=n.getLineDashOffset()||c.default.defaultLineDashOffset,e.lineJoin=n.getLineJoin()||c.default.defaultLineJoin,e.miterLimit=n.getMiterLimit()||c.default.defaultMiterLimit;var a=n.getLineDash();e.lineDash=a?a.slice():c.default.defaultLineDash}else e.strokeColor=null,e.lineWidth=0;e.font=t.getFont()||c.default.defaultFont,e.scale=t.getScale()||1,this.text_=t.getText();var l=f.default.TEXT_ALIGN[t.getTextAlign()],u=f.default.TEXT_ALIGN[t.getTextBaseline()];this.textAlign_=void 0===l?c.default.defaultTextAlign:l,this.textBaseline_=void 0===u?c.default.defaultTextBaseline:u,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(e)}else this.text_=""},g.prototype.getAtlas_=function(t){var e,i=[];for(e in t)(t[e]||0===t[e])&&(Array.isArray(t[e])?i=i.concat(t[e]):i.push(t[e]));var n=this.calculateHash_(i);if(!this.atlases_[n]){var r=this.measureCanvas_.getContext("2d");r.font=t.font;var a=o((1.5*r.measureText("M").width+t.lineWidth/2)*t.scale);this.atlases_[n]={atlas:new p.default({space:t.lineWidth+1}),width:{},height:a}}return this.atlases_[n]},g.prototype.calculateHash_=function(t){var e,i,n="";for(e=0,i=t.length;e<i;++e)n+=t[e];return n},g.prototype.getTextures=function(){return this.textures_},g.prototype.getHitDetectionTextures=function(){return this.textures_},e.default=g},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){this.first_=void 0,this.last_=void 0,this.head_=void 0,this.circular_=!(void 0!==t)||t,this.length_=0};i.prototype.insertItem=function(t){var e={prev:void 0,next:void 0,data:t},i=this.head_;if(i){var n=i.next;e.prev=i,e.next=n,i.next=e,n&&(n.prev=e),i===this.last_&&(this.last_=e)}else this.first_=e,this.last_=e,this.circular_&&(e.next=e,e.prev=e);this.head_=e,this.length_++},i.prototype.removeItem=function(){var t=this.head_;if(t){var e=t.next,i=t.prev;e&&(e.prev=i),i&&(i.next=e),this.head_=e||i,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=i?this.head_.prev:this.head_),this.length_--}},i.prototype.firstItem=function(){return this.head_=this.first_,this.head_?this.head_.data:void 0},i.prototype.lastItem=function(){return this.head_=this.last_,this.head_?this.head_.data:void 0},i.prototype.nextItem=function(){return this.head_&&this.head_.next?(this.head_=this.head_.next,this.head_.data):void 0},i.prototype.getNextItem=function(){return this.head_&&this.head_.next?this.head_.next.data:void 0},i.prototype.prevItem=function(){return this.head_&&this.head_.prev?(this.head_=this.head_.prev,this.head_.data):void 0},i.prototype.getPrevItem=function(){return this.head_&&this.head_.prev?this.head_.prev.data:void 0},i.prototype.getCurrItem=function(){return this.head_?this.head_.data:void 0},i.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},i.prototype.concat=function(t){if(t.head_){if(this.head_){var e=this.head_.next;this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_}else this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_;t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0}},i.prototype.getLength=function(){return this.length_},e.default=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0));e.default=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_projectionMatrix":"b"),this.u_offsetScaleMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_offsetScaleMatrix":"c"),this.u_offsetRotateMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_offsetRotateMatrix":"d"),this.u_color=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_color":"e"),this.u_opacity=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_opacity":"f"),this.a_position=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_position":"a")}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(42)),a=n(i(41)),s={};s.fragment=new o.default(r.default.DEBUG_WEBGL?"precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),s.vertex=new a.default(r.default.DEBUG_WEBGL?"\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n":"attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}"),e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.max,o=Math.min;Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(i(0)),l=n(i(7)),u=n(i(32)),d=n(i(1)),f=n(i(3)),c=n(i(58)),h=n(i(75)),p=n(i(30)),_=n(i(207)),g=n(i(206)),y=n(i(109)),v=n(i(67)),m=n(i(66)),E=n(i(101)),b=n(i(205)),C=n(i(134)),T=n(i(14)),x=n(i(33)),S=function(t,e){v.default.call(this,t,e),this.lineStringReplay=new y.default(t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}};s.default.inherits(S,v.default),S.prototype.drawCoordinates_=function(t,e,i){var n=new b.default,r=new C.default;this.processFlatCoordinates_(t,i,n,r,!0);var o=this.getMaxCoords_(n);if(e.length){var a,s,l=[];for(a=0,s=e.length;a<s;++a){var u={list:new b.default,maxCoords:void 0,rtree:new C.default};l.push(u),this.processFlatCoordinates_(e[a],i,u.list,u.rtree,!1),this.classifyPoints_(u.list,u.rtree,!0),u.maxCoords=this.getMaxCoords_(u.list)}for(l.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),a=0;a<l.length;++a){var d,f=l[a].list,c=f.firstItem(),h=c;do{if(this.getIntersections_(h,r).length){d=!0;break}h=f.nextItem()}while(c!==h);!d&&this.bridgeHole_(f,l[a].maxCoords[0],n,o[0],r)&&(r.concat(l[a].rtree),this.classifyPoints_(n,r,!1))}}else this.classifyPoints_(n,r,!1);this.triangulate_(n,r)},S.prototype.processFlatCoordinates_=function(t,e,i,n,a){var s,l,u,d,f,c=h.default.linearRingIsClockwise(t,0,t.length,e),p=this.vertices.length/2,_=[],g=[];if(a===c){for(d=u=this.createPoint_(t[0],t[1],p++),s=e,l=t.length;s<l;s+=e)f=this.createPoint_(t[s],t[s+1],p++),g.push(this.insertItem_(d,f,i)),_.push([o(d.x,f.x),o(d.y,f.y),r(d.x,f.x),r(d.y,f.y)]),d=f;g.push(this.insertItem_(f,u,i)),_.push([o(d.x,f.x),o(d.y,f.y),r(d.x,f.x),r(d.y,f.y)])}else{var y=t.length-e;for(d=u=this.createPoint_(t[y],t[y+1],p++),s=y-e,l=0;s>=l;s-=e)f=this.createPoint_(t[s],t[s+1],p++),g.push(this.insertItem_(d,f,i)),_.push([o(d.x,f.x),o(d.y,f.y),r(d.x,f.x),r(d.y,f.y)]),d=f;g.push(this.insertItem_(f,u,i)),_.push([o(d.x,f.x),o(d.y,f.y),r(d.x,f.x),r(d.y,f.y)])}n.load(_,g)},S.prototype.getMaxCoords_=function(t){var e=t.firstItem(),i=e,n=[i.p0.x,i.p0.y];do{(i=t.nextItem()).p0.x>n[0]&&(n=[i.p0.x,i.p0.y])}while(i!==e);return n},S.prototype.classifyPoints_=function(t,e,i){var n=t.firstItem(),r=n,o=t.nextItem(),a=!1;do{var s=i?m.default.triangleIsCounterClockwise(o.p1.x,o.p1.y,r.p1.x,r.p1.y,r.p0.x,r.p0.y):m.default.triangleIsCounterClockwise(r.p0.x,r.p0.y,r.p1.x,r.p1.y,o.p1.x,o.p1.y);void 0===s?(this.removeItem_(r,o,t,e),a=!0,o===n&&(n=t.getNextItem()),o=r,t.prevItem()):r.p1.reflex!==s&&(r.p1.reflex=s,a=!0),r=o,o=t.nextItem()}while(r!==n);return a},S.prototype.bridgeHole_=function(t,e,i,n,r){for(var o=t.firstItem();o.p1.x!==e;)o=t.nextItem();var a,s,l,u,d=o.p1,f={x:n,y:d.y,i:-1},c=1/0,h=this.getIntersections_({p0:d,p1:f},r,!0);for(a=0,s=h.length;a<s;++a){var p=h[a],_=this.calculateIntersection_(d,f,p.p0,p.p1,!0),g=Math.abs(d.x-_[0]);g<c&&void 0!==m.default.triangleIsCounterClockwise(d.x,d.y,p.p0.x,p.p0.y,p.p1.x,p.p1.y)&&(c=g,u={x:_[0],y:_[1],i:-1},o=p)}if(c===1/0)return!1;if(l=o.p1,0<c){var y=this.getPointsInTriangle_(d,u,o.p1,r);if(y.length){var v=1/0;for(a=0,s=y.length;a<s;++a){var E=y[a],b=Math.atan2(d.y-E.y,f.x-E.x);(b<v||b===v&&E.x<l.x)&&(v=b,l=E)}}}for(o=i.firstItem();o.p1.x!==l.x||o.p1.y!==l.y;)o=i.nextItem();var C={x:d.x,y:d.y,i:d.i,reflex:void 0},T={x:o.p1.x,y:o.p1.y,i:o.p1.i,reflex:void 0};return t.getNextItem().p0=C,this.insertItem_(d,o.p1,t,r),this.insertItem_(T,C,t,r),o.p1=T,t.setFirstItem(),i.concat(t),!0},S.prototype.triangulate_=function(t,e){for(var i=!1,n=this.isSimple_(t,e);3<t.getLength();)if(n){if(!this.clipEars_(t,e,n,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e,!0))break}else if(!this.clipEars_(t,e,n,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e)){if(!(n=this.isSimple_(t,e))){this.splitPolygon_(t,e);break}i=!this.isClockwise_(t),this.classifyPoints_(t,e,i)}if(3===t.getLength()){var r=this.indices.length;this.indices[r++]=t.getPrevItem().p0.i,this.indices[r++]=t.getCurrItem().p0.i,this.indices[r++]=t.getNextItem().p0.i}},S.prototype.clipEars_=function(t,e,i,n){var r,o,a,s=this.indices.length,l=t.firstItem(),u=t.getPrevItem(),d=l,f=t.nextItem(),c=t.getNextItem(),p=!1;do{var _;if(r=d.p0,o=d.p1,a=f.p1,!1===o.reflex)_=i?0===this.getPointsInTriangle_(r,o,a,e,!0).length:n?this.diagonalIsInside_(c.p1,a,o,r,u.p0):this.diagonalIsInside_(u.p0,r,o,a,c.p1),(i||0===this.getIntersections_({p0:r,p1:a},e).length)&&_&&(i||!1===r.reflex||!1===a.reflex||h.default.linearRingIsClockwise([u.p0.x,u.p0.y,r.x,r.y,o.x,o.y,a.x,a.y,c.p1.x,c.p1.y],0,10,2)===!n)&&(this.indices[s++]=r.i,this.indices[s++]=o.i,this.indices[s++]=a.i,this.removeItem_(d,f,t,e),f===l&&(l=c),p=!0);u=t.getPrevItem(),d=t.getCurrItem(),f=t.nextItem(),c=t.getNextItem()}while(d!==l&&3<t.getLength());return p},S.prototype.resolveSelfIntersections_=function(t,e,i){var n=t.firstItem();t.nextItem();var a=n,s=t.nextItem(),l=!1;do{var u=this.calculateIntersection_(a.p0,a.p1,s.p0,s.p1,i);if(u){var d,f=!1,c=this.vertices.length,h=this.indices.length,p=t.prevItem();if(t.removeItem(),e.remove(p),f=p===n,i?(u[0]===a.p0.x&&u[1]===a.p0.y?(t.prevItem(),d=a.p0,s.p0=d,e.remove(a),f=f||a===n):(d=s.p1,a.p1=d,e.remove(s),f=f||s===n),t.removeItem()):(d=this.createPoint_(u[0],u[1],c/2),a.p1=d,s.p0=d,e.update([o(a.p0.x,a.p1.x),o(a.p0.y,a.p1.y),r(a.p0.x,a.p1.x),r(a.p0.y,a.p1.y)],a),e.update([o(s.p0.x,s.p1.x),o(s.p0.y,s.p1.y),r(s.p0.x,s.p1.x),r(s.p0.y,s.p1.y)],s)),this.indices[h++]=p.p0.i,this.indices[h++]=p.p1.i,this.indices[h++]=d.i,l=!0,f)break}a=t.getPrevItem(),s=t.nextItem()}while(a!==n);return l},S.prototype.isSimple_=function(t,e){var i=t.firstItem(),n=i;do{if(this.getIntersections_(n,e).length)return!1;n=t.nextItem()}while(n!==i);return!0},S.prototype.isClockwise_=function(t){var e=2*t.getLength(),i=Array(e),n=t.firstItem(),r=n,o=0;do{i[o++]=r.p0.x,i[o++]=r.p0.y,r=t.nextItem()}while(r!==n);return h.default.linearRingIsClockwise(i,0,e,2)},S.prototype.splitPolygon_=function(t,e){var i=t.firstItem(),n=i;do{var a=this.getIntersections_(n,e);if(a.length){var s=a[0],l=this.vertices.length/2,u=this.calculateIntersection_(n.p0,n.p1,s.p0,s.p1),d=this.createPoint_(u[0],u[1],l),f=new b.default,c=new C.default;this.insertItem_(d,n.p1,f,c),n.p1=d,e.update([o(n.p0.x,d.x),o(n.p0.y,d.y),r(n.p0.x,d.x),r(n.p0.y,d.y)],n);for(var h=t.nextItem();h!==s;)this.insertItem_(h.p0,h.p1,f,c),e.remove(h),t.removeItem(),h=t.getCurrItem();this.insertItem_(s.p0,d,f,c),s.p0=d,e.update([o(s.p1.x,d.x),o(s.p1.y,d.y),r(s.p1.x,d.x),r(s.p1.y,d.y)],s),this.classifyPoints_(t,e,!1),this.triangulate_(t,e),this.classifyPoints_(f,c,!1),this.triangulate_(f,c);break}n=t.nextItem()}while(n!==i)},S.prototype.createPoint_=function(t,e,i){var n=this.vertices.length;return this.vertices[n++]=t,this.vertices[n++]=e,{x:t,y:e,i:i,reflex:void 0}},S.prototype.insertItem_=function(t,e,i,n){var a={p0:t,p1:e};return i.insertItem(a),n&&n.insert([o(t.x,e.x),o(t.y,e.y),r(t.x,e.x),r(t.y,e.y)],a),a},S.prototype.removeItem_=function(t,e,i,n){i.getCurrItem()===e&&(i.removeItem(),t.p1=e.p1,n.remove(e),n.update([o(t.p0.x,t.p1.x),o(t.p0.y,t.p1.y),r(t.p0.x,t.p1.x),r(t.p0.y,t.p1.y)],t))},S.prototype.getPointsInTriangle_=function(t,e,i,n,s){var l,u,d,f,h=[],p=n.getInExtent([o(t.x,e.x,i.x),o(t.y,e.y,i.y),r(t.x,e.x,i.x),r(t.y,e.y,i.y)]);for(l=0,u=p.length;l<u;++l)for(d in p[l])"object"===(void 0===(f=p[l][d])?"undefined":a(f))&&(!s||f.reflex)&&(f.x!==t.x||f.y!==t.y)&&(f.x!==e.x||f.y!==e.y)&&(f.x!==i.x||f.y!==i.y)&&-1===h.indexOf(f)&&c.default.linearRingContainsXY([t.x,t.y,e.x,e.y,i.x,i.y],0,6,2,f.x,f.y)&&h.push(f);return h},S.prototype.getIntersections_=function(t,e,i){var n,a,s=t.p0,l=t.p1,u=e.getInExtent([o(s.x,l.x),o(s.y,l.y),r(s.x,l.x),r(s.y,l.y)]),d=[];for(n=0,a=u.length;n<a;++n){var f=u[n];t!==f&&(i||f.p0!==l||f.p1!==s)&&this.calculateIntersection_(s,l,f.p0,f.p1,i)&&d.push(f)}return d},S.prototype.calculateIntersection_=function(t,e,i,n,r){var o=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!=o){var a=((n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x))/o,s=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/o;if(!r&&a>m.default.EPSILON&&a<1-m.default.EPSILON&&s>m.default.EPSILON&&s<1-m.default.EPSILON||r&&0<=a&&1>=a&&0<=s&&1>=s)return[t.x+a*(e.x-t.x),t.y+a*(e.y-t.y)]}},S.prototype.diagonalIsInside_=function(t,e,i,n,r){if(void 0===e.reflex||void 0===n.reflex)return!1;var o=(i.x-n.x)*(e.y-n.y)>(i.y-n.y)*(e.x-n.x),a=(r.x-n.x)*(e.y-n.y)<(r.y-n.y)*(e.x-n.x),s=(t.x-e.x)*(n.y-e.y)>(t.y-e.y)*(n.x-e.x),l=(i.x-e.x)*(n.y-e.y)<(i.y-e.y)*(n.x-e.x),u=n.reflex?a||o:a&&o,d=e.reflex?l||s:l&&s;return u&&d},S.prototype.drawMultiPolygon=function(t,e){var i,n,r,o,a=t.getEndss(),s=t.getStride(),l=this.indices.length,u=this.lineStringReplay.getCurrentIndex(),d=t.getFlatCoordinates(),f=0;for(i=0,n=a.length;i<n;++i){var c=a[i];if(0<c.length){var h=p.default.translate(d,f,c[0],s,-this.origin[0],-this.origin[1]);if(h.length){var _,g=[];for(r=1,o=c.length;r<o;++r)c[r]!==c[r-1]&&(_=p.default.translate(d,c[r-1],c[r],s,-this.origin[0],-this.origin[1]),g.push(_));this.lineStringReplay.drawPolygonCoordinates(h,g,s),this.drawCoordinates_(h,g,s)}}f=c[c.length-1]}this.indices.length>l&&(this.startIndices.push(l),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(l),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>u&&this.lineStringReplay.setPolygonStyle(e,u)},S.prototype.drawPolygon=function(t,e){var i=t.getEnds(),n=t.getStride();if(0<i.length){var r=t.getFlatCoordinates().map(Number),o=p.default.translate(r,0,i[0],n,-this.origin[0],-this.origin[1]);if(o.length){var a,s,l,u=[];for(a=1,s=i.length;a<s;++a)i[a]!==i[a-1]&&(l=p.default.translate(r,i[a-1],i[a],n,-this.origin[0],-this.origin[1]),u.push(l));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(o,u,n),this.drawCoordinates_(o,u,n)}}},S.prototype.finish=function(t){this.verticesBuffer=new x.default(this.vertices),this.indicesBuffer=new x.default(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&0<this.styles_.length&&(this.styles_=[]),this.vertices=null,this.indices=null},S.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,n=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(i),n()}},S.prototype.setUpProgram=function(t,e){var i,n;i=_.default.fragment,n=_.default.vertex;var r,o=e.getProgram(i,n);return this.defaultLocations_?r=this.defaultLocations_:(r=new g.default(t,o),this.defaultLocations_=r),e.useProgram(o),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,T.default.FLOAT,!1,8,0),r},S.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},S.prototype.drawReplay=function(t,e,i,n){var r,o,a,s,l=t.getParameter(t.DEPTH_FUNC),u=t.getParameter(t.DEPTH_WRITEMASK);if(n||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),f.default.isEmpty(i))for(a=this.startIndices[this.startIndices.length-1],r=this.styleIndices_.length-1;0<=r;--r)o=this.styleIndices_[r],s=this.styles_[r],this.setFillStyle_(t,s),this.drawElements(t,e,o,a),a=o;else this.drawReplaySkipping_(t,e,i);n||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(u),t.depthFunc(l))},S.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,n,r){var o,a,l,u,f,c,h;for(h=this.startIndices.length-2,l=this.startIndices[h+1],o=this.styleIndices_.length-1;0<=o;--o)for(u=this.styles_[o],this.setFillStyle_(t,u),f=this.styleIndices_[o];0<=h&&this.startIndices[h]>=f;){if(a=this.startIndices[h],c=this.startIndicesFeature[h],void 0===i[s.default.getUid(c).toString()]&&c.getGeometry()&&(void 0===r||d.default.intersects(r,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,a,l);var p=n(c);if(p)return p}h--,l=a}},S.prototype.drawReplaySkipping_=function(t,e,i){var n,r,o,a,l,u,d,f;for(d=this.startIndices.length-2,o=r=this.startIndices[d+1],n=this.styleIndices_.length-1;0<=n;--n){for(a=this.styles_[n],this.setFillStyle_(t,a),l=this.styleIndices_[n];0<=d&&this.startIndices[d]>=l;)f=this.startIndices[d],u=this.startIndicesFeature[d],i[s.default.getUid(u).toString()]&&(r!==o&&(this.drawElements(t,e,r,o),t.clear(t.DEPTH_BUFFER_BIT)),o=f),d--,r=f;r!==o&&(this.drawElements(t,e,r,o),t.clear(t.DEPTH_BUFFER_BIT)),r=o=l}},S.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},S.prototype.setFillStrokeStyle=function(t,e){var i=t?t.getColor():[0,0,0,0];if(i=i instanceof CanvasGradient||i instanceof CanvasPattern?m.default.defaultFillStyle:u.default.asArray(i).map(function(t,e){return 3==e?t:t/255})||m.default.defaultFillStyle,this.state_.fillColor&&l.default.equals(i,this.state_.fillColor)||(this.state_.fillColor=i,this.state_.changed=!0,this.styles_.push(i)),e)this.lineStringReplay.setFillStrokeStyle(null,e);else{var n=new E.default({color:[0,0,0,0],lineWidth:0});this.lineStringReplay.setFillStrokeStyle(null,n)}},e.default=S},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0));e.default=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_miterLimit=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_miterLimit":"l"),this.u_opacity=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_opacity":"m"),this.u_color=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_color":"n"),this.u_size=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_size":"o"),this.u_pixelRatio=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_pixelRatio":"p"),this.a_lastPos=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_lastPos":"d"),this.a_position=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_position":"e"),this.a_nextPos=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_nextPos":"f"),this.a_direction=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_direction":"g")}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(42)),a=n(i(41)),s={};s.fragment=new o.default(r.default.DEBUG_WEBGL?"precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),s.vertex=new a.default(r.default.DEBUG_WEBGL?"varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n":"varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}"),e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(76)),r={lineStringIsClosed:function(t,e,i,r){var o=i-r;return!!(t[e]===t[o]&&t[e+1]===t[o+1]&&3<(i-e)/r)&&!!n.default.linearRing(t,e,i,r)}};e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0));e.default=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_opacity=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_opacity":"k"),this.u_image=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_image":"l"),this.a_position=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_position":"c"),this.a_texCoord=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_texCoord":"d"),this.a_offsets=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_offsets":"e"),this.a_opacity=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_opacity":"f"),this.a_rotateWithView=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_rotateWithView":"g")}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(42)),a=n(i(41)),s={};s.fragment=new o.default(r.default.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),s.vertex=new a.default(r.default.DEBUG_WEBGL?"varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n":"varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}"),e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(111)),a=n(i(33)),s=function(t,e){o.default.call(this,t,e),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]};r.default.inherits(s,o.default),s.prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),n=t.getStride();this.drawCoordinates(i,0,i.length,n)},s.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),n=t.getStride();this.drawCoordinates(i,0,i.length,n)},s.prototype.finish=function(t){var e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new a.default(this.vertices);var i=this.indices;this.indicesBuffer=new a.default(i);var n={};this.createTextures(this.textures_,this.images_,n,e),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,n,e),this.images_=null,this.hitDetectionImages_=null,o.default.prototype.finish.call(this,t)},s.prototype.setImageStyle=function(t){var e,i=t.getAnchor(),n=t.getImage(1),o=t.getImageSize(),a=t.getHitDetectionImage(1),s=t.getOpacity(),l=t.getOrigin(),u=t.getRotateWithView(),d=t.getRotation(),f=t.getSize(),c=t.getScale();0===this.images_.length?this.images_.push(n):(e=this.images_[this.images_.length-1],r.default.getUid(e)!=r.default.getUid(n)&&(this.groupIndices.push(this.indices.length),this.images_.push(n))),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(a):(e=this.hitDetectionImages_[this.hitDetectionImages_.length-1],r.default.getUid(e)!=r.default.getUid(a)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(a))),this.anchorX=i[0],this.anchorY=i[1],this.height=f[1],this.imageHeight=o[1],this.imageWidth=o[0],this.opacity=s,this.originX=l[0],this.originY=l[1],this.rotation=d,this.rotateWithView=u,this.scale=c,this.width=f[0]},s.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},s.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_},e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0));e.default=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_pixelRatio=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_pixelRatio":"l"),this.u_opacity=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_opacity":"m"),this.u_fillColor=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_fillColor":"n"),this.u_strokeColor=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_strokeColor":"o"),this.u_size=t.getUniformLocation(e,n.default.DEBUG_WEBGL?"u_size":"p"),this.a_position=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_position":"e"),this.a_instruction=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_instruction":"f"),this.a_radius=t.getAttribLocation(e,n.default.DEBUG_WEBGL?"a_radius":"g")}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(42)),a=n(i(41)),s={};s.fragment=new o.default(r.default.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n":"precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"),s.vertex=new a.default(r.default.DEBUG_WEBGL?"varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n":"varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;//Until we get gl_VertexID in WebGL,we store an instruction.if(f==0.0){//Offsetting the edges of the triangle by lineWidth/2 is necessary,however//we should also leave some space for the antialiasing,thus we offset by lineWidth.offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}"),e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(7)),a=n(i(32)),s=n(i(1)),l=n(i(3)),u=n(i(30)),d=n(i(216)),f=n(i(215)),c=n(i(67)),h=n(i(66)),p=n(i(14)),_=n(i(33)),g=function(t,e){c.default.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}};r.default.inherits(g,c.default),g.prototype.drawCoordinates_=function(t,e,i,n){var r,o,a=this.vertices.length,s=this.indices.length,l=a/4;for(r=e,o=i;r<o;r+=n)this.vertices[a++]=t[r],this.vertices[a++]=t[r+1],this.vertices[a++]=0,this.vertices[a++]=this.radius_,this.vertices[a++]=t[r],this.vertices[a++]=t[r+1],this.vertices[a++]=1,this.vertices[a++]=this.radius_,this.vertices[a++]=t[r],this.vertices[a++]=t[r+1],this.vertices[a++]=2,this.vertices[a++]=this.radius_,this.vertices[a++]=t[r],this.vertices[a++]=t[r+1],this.vertices[a++]=3,this.vertices[a++]=this.radius_,this.indices[s++]=l,this.indices[s++]=l+1,this.indices[s++]=l+2,this.indices[s++]=l+2,this.indices[s++]=l+3,this.indices[s++]=l,l+=4},g.prototype.drawCircle=function(t,e){var i=t.getRadius(),n=t.getStride();if(i){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=i;var r=t.getFlatCoordinates();r=u.default.translate(r,0,2,n,-this.origin[0],-this.origin[1]),this.drawCoordinates_(r,0,2,n)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){var o=this.styles_[this.styles_.length-1];this.state_.fillColor=o[0],this.state_.strokeColor=o[1],this.state_.lineWidth=o[2],this.state_.changed=!1}},g.prototype.finish=function(){this.verticesBuffer=new _.default(this.vertices),this.indicesBuffer=new _.default(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&0<this.styles_.length&&(this.styles_=[]),this.vertices=null,this.indices=null},g.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},g.prototype.setUpProgram=function(t,e,i,n){var r,o;r=d.default.fragment,o=d.default.vertex;var a,s=e.getProgram(r,o);return this.defaultLocations_?a=this.defaultLocations_:(a=new f.default(t,s),this.defaultLocations_=a),e.useProgram(s),t.enableVertexAttribArray(a.a_position),t.vertexAttribPointer(a.a_position,2,p.default.FLOAT,!1,16,0),t.enableVertexAttribArray(a.a_instruction),t.vertexAttribPointer(a.a_instruction,1,p.default.FLOAT,!1,16,8),t.enableVertexAttribArray(a.a_radius),t.vertexAttribPointer(a.a_radius,1,p.default.FLOAT,!1,16,12),t.uniform2fv(a.u_size,i),t.uniform1f(a.u_pixelRatio,n),a},g.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},g.prototype.drawReplay=function(t,e,i){var n,r,o,a;if(l.default.isEmpty(i))for(o=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;0<=n;--n)r=this.styleIndices_[n],a=this.styles_[n],this.setFillStyle_(t,a[0]),this.setStrokeStyle_(t,a[1],a[2]),this.drawElements(t,e,r,o),o=r;else this.drawReplaySkipping_(t,e,i)},g.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,n,o){var a,l,u,d,f,c,h;for(h=this.startIndices.length-2,u=this.startIndices[h+1],a=this.styleIndices_.length-1;0<=a;--a)for(d=this.styles_[a],this.setFillStyle_(t,d[0]),this.setStrokeStyle_(t,d[1],d[2]),f=this.styleIndices_[a];0<=h&&this.startIndices[h]>=f;){if(l=this.startIndices[h],c=this.startIndicesFeature[h],void 0===i[r.default.getUid(c).toString()]&&c.getGeometry()&&(void 0===o||s.default.intersects(o,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,l,u);var p=n(c);if(p)return p}h--,u=l}},g.prototype.drawReplaySkipping_=function(t,e,i){var n,o,a,s,l,u,d,f;for(d=this.startIndices.length-2,a=o=this.startIndices[d+1],n=this.styleIndices_.length-1;0<=n;--n){for(s=this.styles_[n],this.setFillStyle_(t,s[0]),this.setStrokeStyle_(t,s[1],s[2]),l=this.styleIndices_[n];0<=d&&this.startIndices[d]>=l;)f=this.startIndices[d],u=this.startIndicesFeature[d],i[r.default.getUid(u).toString()]&&(o!==a&&this.drawElements(t,e,o,a),a=f),d--,o=f;o!==a&&this.drawElements(t,e,o,a),o=a=l}},g.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},g.prototype.setStrokeStyle_=function(t,e,i){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i)},g.prototype.setFillStrokeStyle=function(t,e){var i,n;if(e){var r=e.getLineDash();this.state_.lineDash=r||h.default.defaultLineDash;var s=e.getLineDashOffset();this.state_.lineDashOffset=s||h.default.defaultLineDashOffset,i=(i=e.getColor())instanceof CanvasGradient||i instanceof CanvasPattern?h.default.defaultStrokeStyle:a.default.asArray(i).map(function(t,e){return 3==e?t:t/255})||h.default.defaultStrokeStyle,n=void 0===(n=e.getWidth())?h.default.defaultLineWidth:n}else i=[0,0,0,0],n=0;var l=t?t.getColor():[0,0,0,0];l=l instanceof CanvasGradient||l instanceof CanvasPattern?h.default.defaultFillStyle:a.default.asArray(l).map(function(t,e){return 3==e?t:t/255})||h.default.defaultFillStyle,this.state_.strokeColor&&o.default.equals(this.state_.strokeColor,i)&&this.state_.fillColor&&o.default.equals(this.state_.fillColor,l)&&this.state_.lineWidth===n||(this.state_.changed=!0,this.state_.fillColor=l,this.state_.strokeColor=i,this.state_.lineWidth=n,this.styles_.push([l,i,n]))},e.default=g},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(23)),a=n(i(17)),s=n(i(8)),l=n(i(1)),u=n(i(13)),d=n(i(21)),f=n(i(90)),c=n(i(10)),h=n(i(14)),p=n(i(65)),_=function(t,e){f.default.call(this,t,e),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null};r.default.inherits(_,f.default),_.handles=function(t,e){return t===d.default.WEBGL&&e.getType()===o.default.IMAGE},_.create=function(t,e){return new _(t,e)},_.prototype.createTexture_=function(t){var e=t.getImage(),i=this.mapRenderer.getGL();return p.default.createTexture(i,e,h.default.CLAMP_TO_EDGE,h.default.CLAMP_TO_EDGE)},_.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){var o=this.getLayer(),a=o.getSource(),s=e.viewState.resolution,l=e.viewState.rotation,u=e.skippedFeatureUids;return a.forEachFeatureAtCoordinate(t,s,l,i,u,function(t){return n.call(r,t,o)})},_.prototype.prepareFrame=function(t,e){var i=this.mapRenderer.getGL(),n=t.pixelRatio,o=t.viewState,s=o.center,u=o.resolution,d=o.rotation,f=this.image_,h=this.texture,p=this.getLayer().getSource(),_=t.viewHints,g=t.extent;if(void 0!==e.extent&&(g=l.default.getIntersection(g,e.extent)),!_[a.default.ANIMATING]&&!_[a.default.INTERACTING]&&!l.default.isEmpty(g)){var y=o.projection;if(!r.default.ENABLE_RASTER_REPROJECTION){var v=p.getProjection();v&&(y=v)}var m=p.getImage(g,u,n,y);if(m)if(this.loadImage(m)&&(f=m,h=this.createTexture_(m),this.texture)){var E=function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,i,this.texture);t.postRenderFunctions.push(E)}}if(f){var b=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(b.width,b.height,n,s,u,d,f.getExtent()),this.hitTransformationMatrix_=null;var C=this.texCoordMatrix;c.default.reset(C),c.default.scale(C,1,-1),c.default.translate(C,0,-1),this.image_=f,this.texture=h,this.updateLogos(t,p)}return!!f},_.prototype.updateProjectionMatrix_=function(t,e,i,n,r,o,a){var s=this.projectionMatrix;c.default.reset(s),c.default.scale(s,2*i/(t*r),2*i/(e*r)),c.default.rotate(s,-o),c.default.translate(s,a[0]-n[0],a[1]-n[1]),c.default.scale(s,(a[2]-a[0])/2,(a[3]-a[1])/2),c.default.translate(s,1,1)},_.prototype.hasFeatureAtCoordinate=function(t,e){return void 0!==this.forEachFeatureAtCoordinate(t,e,0,u.default.TRUE,this)},_.prototype.forEachLayerAtPixel=function(t,e,i,n){if(this.image_&&this.image_.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==r.default.nullFunction){var o=c.default.apply(e.pixelToCoordinateTransform,t.slice());return this.forEachFeatureAtCoordinate(o,e,0,u.default.TRUE,this)?i.call(n,this.getLayer(),null):void 0}var a=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(e.size,a));var l=c.default.apply(this.hitTransformationMatrix_,t.slice());if(!(0>l[0]||l[0]>a[0]||0>l[1]||l[1]>a[1])){this.hitCanvasContext_||(this.hitCanvasContext_=s.default.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),l[0],l[1],1,1,0,0,1,1);var d=this.hitCanvasContext_.getImageData(0,0,1,1).data;return 0<d[3]?i.call(n,this.getLayer(),d):void 0}}},_.prototype.getHitTransformationMatrix_=function(t,e){var i=c.default.create();c.default.translate(i,-1,-1),c.default.scale(i,2/t[0],2/t[1]),c.default.translate(i,0,t[1]),c.default.scale(i,1,-1);var n=c.default.invert(this.projectionMatrix.slice()),r=c.default.create();return c.default.translate(r,0,e[1]),c.default.scale(r,1,-1),c.default.scale(r,e[0]/2,e[1]/2),c.default.translate(r,1,1),c.default.multiply(r,n),c.default.multiply(r,i),r},e.default=_},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.round;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(23)),s=n(i(20)),l=n(i(8)),u=n(i(5)),d=n(i(4)),f=n(i(96)),c=n(i(1)),h=n(i(219)),p=n(i(16)),_=n(i(31)),g=n(i(53)),y=n(i(25)),v=n(i(117)),m=n(i(43)),E=n(i(21)),b=n(i(118)),C=n(i(91)),T=n(i(10)),x=function(t){this.context=null,b.default.call(this,t),this.declutterTree_=t.getDeclutter()?(0,f.default)(9):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=T.default.create(),this.zDirection=t.getRenderMode()==h.default.VECTOR?1:0,u.default.listen(y.default.labelCache,d.default.CLEAR,this.handleFontsChanged_,this)};o.default.inherits(x,b.default),x.handles=function(t,e){return t===E.default.CANVAS&&e.getType()===a.default.VECTOR_TILE},x.create=function(t,e){return new x(e)},x.IMAGE_REPLAYS={image:[g.default.POLYGON,g.default.CIRCLE,g.default.LINE_STRING,g.default.IMAGE,g.default.TEXT],hybrid:[g.default.POLYGON,g.default.LINE_STRING]},x.VECTOR_REPLAYS={image:[g.default.DEFAULT],hybrid:[g.default.IMAGE,g.default.TEXT,g.default.DEFAULT],vector:m.default.ORDER},x.prototype.disposeInternal=function(){u.default.unlisten(y.default.labelCache,d.default.CLEAR,this.handleFontsChanged_,this),b.default.prototype.disposeInternal.call(this)},x.prototype.prepareFrame=function(){var t=this.getLayer(),e=t.getRevision();if(this.renderedLayerRevision_!=e){this.renderedTiles.length=0;var i=t.getRenderMode();this.context||i==h.default.VECTOR||(this.context=l.default.createCanvasContext2D()),this.context&&i==h.default.VECTOR&&(this.context=null)}return this.renderedLayerRevision_=e,b.default.prototype.prepareFrame.apply(this,arguments)},x.prototype.createReplayGroup_=function(t,e){var i=this.getLayer(),n=e.pixelRatio,r=e.viewState.projection,o=i.getRevision(),a=i.getRenderOrder()||null,l=t.getReplayState(i);if(l.dirty||l.renderedRevision!=o||l.renderedRenderOrder!=a){for(var u,d=i.getSource(),f=d.getTileGrid(),h=d.getTileGridForProjection(r),g=h.getResolution(t.tileCoord[0]),y=h.getTileCoordExtent(t.wrappedTileCoord),m={},E=0,b=t.tileKeys.length;E<b;++E)if((u=t.getTile(t.tileKeys[E])).getState()!=s.default.ERROR){var T=u.tileCoord,x=f.getTileCoordExtent(T),S=c.default.getIntersection(y,x),R=c.default.equals(x,S)?null:c.default.buffer(S,i.getRenderBuffer()*g),O=u.getProjection(),P=!1;p.default.equivalent(r,O)||(P=!0,u.setProjection(r)),l.dirty=!1;var I=new v.default(0,S,g,n,d.getOverlaps(),this.declutterTree_,i.getRenderBuffer()),w=C.default.getSquaredTolerance(g,n),L=function(t){var e,n=t.getStyleFunction();if(n?e=n.call(t,g):(n=i.getStyleFunction())&&(e=n(t,g)),e){var r=this.renderFeature(t,w,e,I);this.dirty_=this.dirty_||r,l.dirty=l.dirty||r}},A=u.getFeatures();a&&a!==l.renderedRenderOrder&&A.sort(a);for(var M,F=0,D=A.length;F<D;++F)M=A[F],P&&(O.getUnits()==_.default.TILE_PIXELS&&(O.setWorldExtent(x),O.setExtent(u.getExtent())),M.getGeometry().transform(O,r)),(!R||c.default.intersects(R,M.getGeometry().getExtent()))&&L.call(this,M);for(var N in I.finish(),I.getReplays())m[N]=!0;u.setReplayGroup(i,t.tileCoord.toString(),I)}l.renderedRevision=o,l.renderedRenderOrder=a}},x.prototype.drawTileImage=function(t,e,i){var n=t;this.createReplayGroup_(n,e),this.context&&(this.renderTileImage_(n,e,i),b.default.prototype.drawTileImage.apply(this,arguments))},x.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){var a=e.viewState.resolution,l=e.viewState.rotation;i=void 0==i?0:i;var u,d,f,h,p,_,g,y,v=this.getLayer(),m={},E=this.renderedTiles,b=v.getSource().getTileGridForProjection(e.viewState.projection);for(f=0,h=E.length;f<h;++f)if(g=(_=E[f]).wrappedTileCoord,y=b.getTileCoordExtent(g,this.tmpExtent),u=c.default.buffer(y,i*a,u),c.default.containsCoordinate(u,t))for(var C,T=0,x=_.tileKeys.length;T<x;++T)(C=_.getTile(_.tileKeys[T])).getState()!=s.default.ERROR&&(p=C.getReplayGroup(v,_.tileCoord.toString()),d=d||p.forEachFeatureAtCoordinate(t,a,l,i,{},function(t){var e=o.default.getUid(t).toString();if(!(e in m))return m[e]=!0,n.call(r,t,v)},null));return d},x.prototype.getReplayTransform_=function(t,e){var i=this.getLayer().getSource().getTileGrid(),n=t.tileCoord,o=i.getResolution(n[0]),a=e.viewState,s=e.pixelRatio,l=a.resolution/s,u=i.getTileCoordExtent(n,this.tmpExtent),d=a.center,f=c.default.getTopLeft(u),h=e.size,p=r(s*h[0]/2),_=r(s*h[1]/2);return T.default.compose(this.tmpTransform_,p,_,o/l,o/l,a.rotation,(f[0]-d[0])/o,(d[1]-f[1])/o)},x.prototype.handleFontsChanged_=function(){var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},x.prototype.handleStyleImageChange_=function(){this.renderIfReadyAndVisible()},x.prototype.postCompose=function(t,e,i){var n,o,a=this.getLayer(),l=a.getDeclutter()?{}:null,u=a.getSource(),d=a.getRenderMode(),f=x.VECTOR_REPLAYS[d],c=e.pixelRatio,p=e.viewState.rotation,_=e.size;p&&(n=r(c*_[0]/2),o=r(c*_[1]/2),y.default.rotateAtOffset(t,-p,n,o)),l&&this.declutterTree_.clear();for(var g,m=this.renderedTiles,E=u.getTileGridForProjection(e.viewState.projection),C=[],T=[],S=m.length-1;0<=S;--S)if((g=m[S]).getState()!=s.default.ABORT)for(var R,O=g.tileCoord,P=E.getTileCoordExtent(O)[0]-E.getTileCoordExtent(g.wrappedTileCoord)[0],I=void 0,w=0,L=g.tileKeys.length;w<L;++w)if((R=g.getTile(g.tileKeys[w])).getState()!=s.default.ERROR){var A=R.getReplayGroup(a,O.toString());if(d==h.default.VECTOR||A.hasReplays(f)){I||(I=this.getTransform(e,P));var M=R.tileCoord[0],F=A.getClipCoords(I);t.save(),t.globalAlpha=i.opacity;for(var D,N=0,k=C.length;N<k;++N)D=C[N],M<T[N]&&(t.beginPath(),t.moveTo(F[0],F[1]),t.lineTo(F[2],F[3]),t.lineTo(F[4],F[5]),t.lineTo(F[6],F[7]),t.moveTo(D[6],D[7]),t.lineTo(D[4],D[5]),t.lineTo(D[2],D[3]),t.lineTo(D[0],D[1]),t.clip());A.replay(t,I,p,{},f,l),t.restore(),C.push(F),T.push(M)}}l&&v.default.replayDeclutter(l,t,p),p&&y.default.rotateAtOffset(t,p,n,o),b.default.prototype.postCompose.apply(this,arguments)},x.prototype.renderFeature=function(t,e,i,n){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var o=0,a=i.length;o<a;++o)r=C.default.renderFeature(n,t,i[o],e,this.handleStyleImageChange_,this)||r;else r=C.default.renderFeature(n,t,i,e,this.handleStyleImageChange_,this);return r},x.prototype.renderTileImage_=function(t,e){var i=this.getLayer(),n=t.getReplayState(i),r=i.getRevision(),o=x.IMAGE_REPLAYS[i.getRenderMode()];if(o&&n.renderedTileRevision!==r){n.renderedTileRevision=r;var a=t.wrappedTileCoord,l=a[0],u=e.pixelRatio,d=i.getSource(),f=d.getTileGridForProjection(e.viewState.projection),c=f.getResolution(l),h=t.getContext(i),p=d.getTilePixelSize(l,u,e.viewState.projection);h.canvas.width=p[0],h.canvas.height=p[1];for(var _,g=f.getTileCoordExtent(a),y=0,v=t.tileKeys.length;y<v;++y)if((_=t.getTile(t.tileKeys[y])).getState()!=s.default.ERROR){var m=u/c,E=T.default.reset(this.tmpTransform_);T.default.scale(E,m,-m),T.default.translate(E,-g[0],-g[3]),_.getReplayGroup(i,t.tileCoord.toString()).replay(h,E,0,{},o)}}},e.default=x},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={POINT:"point",LINE:"line"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={lineString:function(t,e,i,n,r){var o,a,s,l,u,d,f,c,h,p=i,_=i,g=0,y=0,v=i;for(o=i;o<n;o+=r){var m=e[o],E=e[o+1];void 0!==l&&(c=m-l,h=E-u,s=Math.sqrt(c*c+h*h),void 0!=d&&(y+=a,Math.acos((d*c+f*h)/(a*s))>t&&(y>g&&(g=y,p=v,_=o),y=0,v=o-r)),a=s,d=c,f=h),l=m,u=E}return(y+=s)>g?[v,o]:[p,_]}};e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.ceil;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(63)),s=n(i(8)),l=n(i(1)),u=n(i(222)),d=n(i(12)),f=n(i(19)),c=n(i(25)),h=n(i(51)),p=n(i(52)),_=n(i(43)),g=n(i(221)),y=function(t,e,i,n,r,o){p.default.call(this,t,e,i,n,r,o),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},c.default.labelCache.prune()};o.default.inherits(y,p.default),y.measureTextWidths=function(t,e,i){var n,r,o=e.length,a=0;for(r=0;r<o;++r)n=c.default.measureTextWidth(t,e[r]),a=Math.max(a,n),i.push(n);return a},y.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||n)){var o,a,s=this.coordinates.length,f=t.getType(),c=null,h=2,p=2;if(r.placement===g.default.LINE){if(!l.default.intersects(this.getBufferedMaxExtent(),t.getExtent()))return;var _;if(c=t.getFlatCoordinates(),p=t.getStride(),f==d.default.LINE_STRING)_=[c.length];else if(f==d.default.MULTI_LINE_STRING)_=t.getEnds();else if(f==d.default.POLYGON)_=t.getEnds().slice(0,1);else if(f==d.default.MULTI_POLYGON){var y=t.getEndss();for(_=[],o=0,a=y.length;o<a;++o)_.push(y[o][0])}this.beginGeometry(t,e);for(var v,m=r.textAlign,E=0,b=0,C=_.length;b<C;++b){if(void 0==m){var T=u.default.lineString(r.maxAngle,c,E,_[b],p);E=T[0],v=T[1]}else v=_[b];for(o=E;o<v;o+=p)this.coordinates.push(c[o],c[o+1]);h=this.coordinates.length,E=_[b],this.drawChars_(s,h,this.declutterGroup_),s=h}this.endGeometry(t,e)}else{var x=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),S=x.width/this.pixelRatio;switch(f){case d.default.POINT:case d.default.MULTI_POINT:h=(c=t.getFlatCoordinates()).length;break;case d.default.LINE_STRING:c=t.getFlatMidpoint();break;case d.default.CIRCLE:c=t.getCenter();break;case d.default.MULTI_LINE_STRING:h=(c=t.getFlatMidpoints()).length;break;case d.default.POLYGON:if(c=t.getFlatInteriorPoint(),!r.overflow&&c[2]/this.resolution<S)return;p=3;break;case d.default.MULTI_POLYGON:var R=t.getFlatInteriorPoints();for(c=[],o=0,a=R.length;o<a;o+=3)(r.overflow||R[o+2]/this.resolution>=S)&&c.push(R[o],R[o+1]);if(0==(h=c.length))return}h=this.appendFlatCoordinates(c,0,h,p,!1,!1),this.beginGeometry(t,e),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),this.updateFillStyle(this.state,this.applyFill,t),this.updateStrokeStyle(this.state,this.applyStroke)),this.drawTextImage_(x,s,h),this.endGeometry(t,e)}}},y.prototype.getImage=function(t,e,i,n){var o,a=n+e+t+i+this.pixelRatio,l=c.default.labelCache;if(!l.containsKey(a)){var u=n?this.strokeStates[n]||this.textStrokeState_:null,d=i?this.fillStates[i]||this.textFillState_:null,h=this.textStates[e]||this.textState_,p=this.pixelRatio,g=h.scale*p,v=_.default.TEXT_ALIGN[h.textAlign||c.default.defaultTextAlign],m=n&&u.lineWidth?u.lineWidth:0,E=t.split("\n"),b=E.length,C=[],T=y.measureTextWidths(h.font,E,C),x=c.default.measureTextHeight(h.font),S=s.default.createCanvasContext2D(r((T+m)*g),r((x*b+m)*g));o=S.canvas,l.set(a,o),1!=g&&S.scale(g,g),S.font=h.font,n&&(S.strokeStyle=u.strokeStyle,S.lineWidth=m*(f.default.SAFARI?g:1),S.lineCap=u.lineCap,S.lineJoin=u.lineJoin,S.miterLimit=u.miterLimit,f.default.CANVAS_LINE_DASH&&u.lineDash.length&&(S.setLineDash(u.lineDash),S.lineDashOffset=u.lineDashOffset)),i&&(S.fillStyle=d.fillStyle),S.textBaseline="middle",S.textAlign="center";var R,O=.5-v,P=v*o.width/g+O*m;if(n)for(R=0;R<b;++R)S.strokeText(E[R],P+O*C[R],.5*(m+x)+R*x);if(i)for(R=0;R<b;++R)S.fillText(E[R],P+O*C[R],.5*(m+x)+R*x)}return l.get(a)},y.prototype.drawTextImage_=function(t,e,i){var n=this.textState_,r=this.textStrokeState_,o=this.pixelRatio,a=_.default.TEXT_ALIGN[n.textAlign||c.default.defaultTextAlign],s=_.default.TEXT_ALIGN[n.textBaseline],l=r&&r.lineWidth?r.lineWidth:0,u=a*t.width/o+2*(.5-a)*l,d=s*t.height/o+2*(.5-s)*l;this.instructions.push([h.default.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*o,(d-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,!0,t.width,n.padding==c.default.defaultPadding?c.default.defaultPadding:n.padding.map(function(t){return t*o}),!!n.backgroundFill,!!n.backgroundStroke]),this.hitDetectionInstructions.push([h.default.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*o,(d-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,!0,t.width,n.padding,!!n.backgroundFill,!!n.backgroundStroke])},y.prototype.drawChars_=function(t,e,i){var n=this.textStrokeState_,r=this.textState_,o=this.textFillState_,a=this.strokeKey_;n&&!(a in this.strokeStates)&&(this.strokeStates[a]={strokeStyle:n.strokeStyle,lineCap:n.lineCap,lineDashOffset:n.lineDashOffset,lineWidth:n.lineWidth,lineJoin:n.lineJoin,miterLimit:n.miterLimit,lineDash:n.lineDash});var s=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||c.default.defaultTextAlign,scale:r.scale});var l=this.fillKey_;o&&!(l in this.fillStates)&&(this.fillStates[l]={fillStyle:o.fillStyle});var u=this.pixelRatio,d=_.default.TEXT_ALIGN[r.textBaseline],f=this.textOffsetY_*u,p=this.text_,g=r.font,y=r.scale,v=n?n.lineWidth*y/2:0,m=this.widths_[g];m||(this.widths_[g]=m={}),this.instructions.push([h.default.DRAW_CHARS,t,e,d,i,r.overflow,l,r.maxAngle,function(t){var e=m[t];return e||(e=m[t]=c.default.measureTextWidth(g,t)),e*y*u},f,a,v*u,p,s,1]),this.hitDetectionInstructions.push([h.default.DRAW_CHARS,t,e,d,i,r.overflow,l,r.maxAngle,function(t){var e=m[t];return e||(e=m[t]=c.default.measureTextWidth(g,t)),e*y},f,a,v,p,s,1/u])},y.prototype.setTextStyle=function(t,e){var i,n,r;if(t){this.declutterGroup_=e;var s=t.getFill();s?(!(n=this.textFillState_)&&(n=this.textFillState_={}),n.fillStyle=a.default.asColorLike(s.getColor()||c.default.defaultFillStyle)):n=this.textFillState_=null;var l=t.getStroke();if(l){(r=this.textStrokeState_)||(r=this.textStrokeState_={});var u=l.getLineDash(),d=l.getLineDashOffset(),f=l.getWidth(),h=l.getMiterLimit();r.lineCap=l.getLineCap()||c.default.defaultLineCap,r.lineDash=u?u.slice():c.default.defaultLineDash,r.lineDashOffset=void 0===d?c.default.defaultLineDashOffset:d,r.lineJoin=l.getLineJoin()||c.default.defaultLineJoin,r.lineWidth=void 0===f?c.default.defaultLineWidth:f,r.miterLimit=void 0===h?c.default.defaultMiterLimit:h,r.strokeStyle=a.default.asColorLike(l.getColor()||c.default.defaultStrokeStyle)}else r=this.textStrokeState_=null;i=this.textState_;var p=t.getFont()||c.default.defaultFont;c.default.checkFont(p);var _=t.getScale();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||c.default.defaultTextBaseline,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||c.default.defaultPadding,i.scale=void 0===_?1:_;var g=t.getOffsetX(),y=t.getOffsetY(),v=t.getRotateWithView(),m=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===g?0:g,this.textOffsetY_=void 0===y?0:y,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===m?0:m,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:o.default.getUid(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+o.default.getUid(n.fillStyle):""}else this.text_=""},e.default=y},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(32)),a=n(i(47)),s=n(i(25)),l=n(i(51)),u=n(i(52)),d=function(t,e,i,n,r,o){u.default.call(this,t,e,i,n,r,o)};r.default.inherits(d,u.default),d.prototype.drawFlatCoordinatess_=function(t,e,i,n){var r=this.state,o=void 0!==r.fillStyle,a=void 0!=r.strokeStyle,s=i.length,u=[l.default.BEGIN_PATH];this.instructions.push(u),this.hitDetectionInstructions.push(u);for(var d=0;d<s;++d){var f=i[d],c=this.coordinates.length,h=this.appendFlatCoordinates(t,e,f,n,!0,!a),p=[l.default.MOVE_TO_LINE_TO,c,h];if(this.instructions.push(p),this.hitDetectionInstructions.push(p),a){var _=[l.default.CLOSE_PATH];this.instructions.push(_),this.hitDetectionInstructions.push(_)}e=f}var g=[l.default.FILL];if(this.hitDetectionInstructions.push(g),o&&this.instructions.push(g),a){var y=[l.default.STROKE];this.instructions.push(y),this.hitDetectionInstructions.push(y)}return e},d.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([l.default.SET_FILL_STYLE,o.default.asString(s.default.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([l.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var a=t.getFlatCoordinates(),u=t.getStride(),d=this.coordinates.length;this.appendFlatCoordinates(a,0,a.length,u,!1,!1);var f=[l.default.BEGIN_PATH],c=[l.default.CIRCLE,d];this.instructions.push(f,c),this.hitDetectionInstructions.push(f,c);var h=[l.default.FILL];if(this.hitDetectionInstructions.push(h),void 0!==i.fillStyle&&this.instructions.push(h),void 0!==i.strokeStyle){var p=[l.default.STROKE];this.instructions.push(p),this.hitDetectionInstructions.push(p)}this.endGeometry(t,e)}},d.prototype.drawPolygon=function(t,e){var i=this.state;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([l.default.SET_FILL_STYLE,o.default.asString(s.default.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([l.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var n=t.getEnds(),r=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(r,0,n,a),this.endGeometry(t,e)},d.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([l.default.SET_FILL_STYLE,o.default.asString(s.default.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([l.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var a,u,d=t.getEndss(),f=t.getOrientedFlatCoordinates(),c=t.getStride(),h=0;for(a=0,u=d.length;a<u;++a)h=this.drawFlatCoordinatess_(f,h,d[a],c);this.endGeometry(t,e)}},d.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t){var e,i,n=this.coordinates;for(e=0,i=n.length;e<i;++e)n[e]=a.default.snap(n[e],t)}},d.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.applyFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(51)),a=n(i(52)),s=function(t,e,i,n,r,o){a.default.call(this,t,e,i,n,r,o)};r.default.inherits(s,a.default),s.prototype.drawFlatCoordinates_=function(t,e,i,n){var r=this.coordinates.length,a=this.appendFlatCoordinates(t,e,i,n,!1,!1),s=[o.default.MOVE_TO_LINE_TO,r,a];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},s.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([o.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],[o.default.BEGIN_PATH]);var a=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(a,0,a.length,s),this.hitDetectionInstructions.push([o.default.STROKE]),this.endGeometry(t,e)}},s.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([o.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],[o.default.BEGIN_PATH]);var a,s,l=t.getEnds(),u=t.getFlatCoordinates(),d=t.getStride(),f=0;for(a=0,s=l.length;a<s;++a)f=this.drawFlatCoordinates_(u,f,l[a],d);this.hitDetectionInstructions.push([o.default.STROKE]),this.endGeometry(t,e)}},s.prototype.finish=function(){var t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push([o.default.STROKE]),this.reverseHitDetectionInstructions(),this.state=null},s.prototype.applyStroke=function(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push([o.default.STROKE]),t.lastStroke=this.coordinates.length),t.lastStroke=0,a.default.prototype.applyStroke.call(this,t),this.instructions.push([o.default.BEGIN_PATH])},e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(51)),a=n(i(52)),s=function(t,e,i,n,r,o){a.default.call(this,t,e,i,n,r,o),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.snapToPixel_=void 0,this.width_=void 0};r.default.inherits(s,a.default),s.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},s.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,a=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([o.default.DRAW_IMAGE,r,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([o.default.DRAW_IMAGE,r,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)}},s.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,a=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([o.default.DRAW_IMAGE,r,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([o.default.DRAW_IMAGE,r,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)}},s.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.snapToPixel_=void 0,this.width_=void 0},s.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),r=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.snapToPixel_=t.getSnapToPixel(),this.width_=n[0]},e.default=s},function(t,e,i){"use strict";var n=Math.sqrt,r=Math.PI,o=Math.pow;Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(i(6)),s={lineString:function(t,e,i,s,l,u,d,f){for(var c,h,p,_=[],g=t[e]>t[i-s],y=l.length,v=t[e],m=t[e+1],E=t[e+=s],b=t[e+1],C=0,T=n(o(E-v,2)+o(b-m,2)),x="",S=0,R=0;R<y;++R){h=g?y-R-1:R;var O=l.charAt(h),P=u(x=g?O+x:x+O)-S;S+=P;for(var I=d+P/2;e<i-s&&C+T<I;)v=E,m=b,E=t[e+=s],b=t[e+1],C+=T,T=n(o(E-v,2)+o(b-m,2));var w=I-C,L=Math.atan2(b-m,E-v);if(g&&(L+=0<L?-r:r),void 0!==p){var A=L-p;if(A+=A>r?-2*r:A<-r?2*r:0,Math.abs(A)>f)return null}var M=w/T,F=a.default.lerp(v,E,M),D=a.default.lerp(m,b,M);p==L?(g&&(c[0]=F,c[1]=D,c[2]=P/2),c[4]=x):(S=P,c=[F,D,P/2,L,x=O],g?_.unshift(c):_.push(c),p=L),d+=P}return _}};e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(23)),a=n(i(17)),s=n(i(8)),l=n(i(5)),u=n(i(4)),d=n(i(96)),f=n(i(1)),c=n(i(45)),h=n(i(25)),p=n(i(117)),_=n(i(21)),g=n(i(122)),y=n(i(91)),v=function(t){g.default.call(this,t),this.declutterTree_=t.getDeclutter()?(0,d.default)(9):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=f.default.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=s.default.createCanvasContext2D(),l.default.listen(h.default.labelCache,u.default.CLEAR,this.handleFontsChanged_,this)};r.default.inherits(v,g.default),v.handles=function(t,e){return t===_.default.CANVAS&&e.getType()===o.default.VECTOR},v.create=function(t,e){return new v(e)},v.prototype.disposeInternal=function(){l.default.unlisten(h.default.labelCache,u.default.CLEAR,this.handleFontsChanged_,this),g.default.prototype.disposeInternal.call(this)},v.prototype.composeFrame=function(t,e,i){var n=t.extent,r=t.pixelRatio,o=e.managed?t.skippedFeatureUids:{},a=t.viewState,s=a.projection,l=a.rotation,u=s.getExtent(),d=this.getLayer().getSource(),p=this.getTransform(t,0);this.preCompose(i,t,p);var _=e.extent,g=void 0!==_;g&&this.clip(i,t,_);var y=this.replayGroup_;if(y&&!y.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var v,m=this.getLayer(),E=0,b=0,C=1!==e.opacity,T=m.hasListener(c.default.RENDER);if(C||T){var x=i.canvas.width,S=i.canvas.height;if(l){var R=Math.round(Math.sqrt(x*x+S*S));E=(R-x)/2,b=(R-S)/2,x=S=R}this.context.canvas.width=x,this.context.canvas.height=S,v=this.context}else v=i;var O=v.globalAlpha;C||(v.globalAlpha=e.opacity),v!=i&&v.translate(E,b);var P=t.size[0]*r,I=t.size[1]*r;if(h.default.rotateAtOffset(v,-l,P/2,I/2),y.replay(v,p,l,o),d.getWrapX()&&s.canWrapX()&&!f.default.containsExtent(u,n)){for(var w,L=n[0],A=f.default.getWidth(u),M=0;L<u[0];)w=A*--M,p=this.getTransform(t,w),y.replay(v,p,l,o),L+=A;for(M=0,L=n[2];L>u[2];)w=A*++M,p=this.getTransform(t,w),y.replay(v,p,l,o),L-=A;p=this.getTransform(t,0)}if(h.default.rotateAtOffset(v,l,P/2,I/2),v!=i){if(T&&this.dispatchRenderEvent(v,t,p),C){var F=i.globalAlpha;i.globalAlpha=e.opacity,i.drawImage(v.canvas,-E,-b),i.globalAlpha=F}else i.drawImage(v.canvas,-E,-b);v.translate(-E,-b)}C||(v.globalAlpha=O)}g&&i.restore(),this.postCompose(i,t,e,p)},v.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){if(this.replayGroup_){var a=e.viewState.resolution,s=e.viewState.rotation,l=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s,i,{},function(t){var e=r.default.getUid(t).toString();if(!(e in u))return u[e]=!0,n.call(o,t,l)},null)}},v.prototype.handleFontsChanged_=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},v.prototype.handleStyleImageChange_=function(){this.renderIfReadyAndVisible()},v.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();this.updateLogos(t,i);var n=t.viewHints[a.default.ANIMATING],r=t.viewHints[a.default.INTERACTING],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!s&&r)return!0;var l=t.extent,u=t.viewState,d=u.projection,c=u.resolution,h=t.pixelRatio,_=e.getRevision(),g=e.getRenderBuffer(),v=e.getRenderOrder();void 0===v&&(v=y.default.defaultOrder);var m=f.default.buffer(l,g*c),E=u.projection.getExtent();if(i.getWrapX()&&u.projection.canWrapX()&&!f.default.containsExtent(E,t.extent)){var b=f.default.getWidth(E),C=Math.max(f.default.getWidth(m)/2,b);m[0]=E[0]-C,m[2]=E[2]+C}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==_&&this.renderedRenderOrder_==v&&f.default.containsExtent(this.renderedExtent_,m))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var T=new p.default(y.default.getTolerance(c,h),m,c,h,i.getOverlaps(),this.declutterTree_,e.getRenderBuffer());i.loadFeatures(m,c,d);var x=function(t){var i,n=t.getStyleFunction();if(n?i=n.call(t,c):(n=e.getStyleFunction())&&(i=n(t,c)),i){var r=this.renderFeature(t,c,h,i,T);this.dirty_=this.dirty_||r}}.bind(this);if(v){var S=[];i.forEachFeatureInExtent(m,function(t){S.push(t)},this),S.sort(v);for(var R=0,O=S.length;R<O;++R)x(S[R])}else i.forEachFeatureInExtent(m,x,this);return T.finish(),this.renderedResolution_=c,this.renderedRevision_=_,this.renderedRenderOrder_=v,this.renderedExtent_=m,this.replayGroup_=T,this.replayGroupChanged=!0,!0},v.prototype.renderFeature=function(t,e,i,n,r){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var a=0,s=n.length;a<s;++a)o=y.default.renderFeature(r,t,n[a],y.default.getSquaredTolerance(e,i),this.handleStyleImageChange_,this)||o;else o=y.default.renderFeature(r,t,n,y.default.getSquaredTolerance(e,i),this.handleStyleImageChange_,this);return o},e.default=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.round;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(10)),a=n(i(0)),s=n(i(7)),l=n(i(40)),u=n(i(8)),d=n(i(46)),f=n(i(69)),c=n(i(45)),h=n(i(25)),p=n(i(121)),_=n(i(119)),g=n(i(21)),y=n(i(34)),v=function(t,e){_.default.call(this,t,e),this.context_=u.default.createCanvasContext2D(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=l.default.CLASS_UNSELECTABLE,t.insertBefore(this.canvas_,t.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=o.default.create()};a.default.inherits(v,_.default),v.handles=function(t){return t===g.default.CANVAS},v.create=function(t,e){return new v(t,e)},v.prototype.dispatchComposeEvent_=function(t,e){var i=this.getMap(),n=this.context_;if(i.hasListener(t)){var r=e.extent,o=e.pixelRatio,a=e.viewState.rotation,s=this.getTransform(e),l=new p.default(n,o,r,s,a),u=new f.default(t,l,e,n,null);i.dispatchEvent(u)}},v.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,n=this.canvas_.height/2,r=t.pixelRatio/e.resolution,a=-e.rotation,s=-e.center[0],l=-e.center[1];return o.default.compose(this.transform_,i,n,r,-r,a,s,l)},v.prototype.getType=function(){return g.default.CANVAS},v.prototype.renderFrame=function(t){if(t){var e=this.context_,i=t.pixelRatio,n=r(t.size[0]*i),o=r(t.size[1]*i);this.canvas_.width!=n||this.canvas_.height!=o?(this.canvas_.width=n,this.canvas_.height=o):e.clearRect(0,0,n,o);var a=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchComposeEvent_(c.default.PRECOMPOSE,t);var l=t.layerStatesArray;s.default.stableSort(l,_.default.sortByZIndex),a&&(e.save(),h.default.rotateAtOffset(e,a,n/2,o/2));var u,f,p,g,v,m=t.viewState.resolution;for(u=0,f=l.length;u<f;++u)p=(v=l[u]).layer,g=this.getLayerRenderer(p),d.default.visibleAtResolution(v,m)&&v.sourceState==y.default.READY&&g.prepareFrame(t,v)&&g.composeFrame(t,v,e);a&&e.restore(),this.dispatchComposeEvent_(c.default.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},v.prototype.forEachLayerAtPixel=function(t,e,i,n,r,a){var s,l,u=e.viewState.resolution,f=e.layerStatesArray,c=f.length,h=o.default.apply(e.pixelToCoordinateTransform,t.slice());for(l=c-1;0<=l;--l){var p=f[l],_=p.layer;if(d.default.visibleAtResolution(p,u)&&r.call(a,_))if(s=this.getLayerRenderer(_).forEachLayerAtCoordinate(h,e,i,n))return s}},e.default=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(39)),a=n(i(4)),s=function(t,e,i,n){o.default.call(this),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=n};r.default.inherits(s,o.default),s.prototype.changed=function(){this.dispatchEvent(a.default.CHANGE)},s.prototype.getExtent=function(){return this.extent},s.prototype.getImage=function(){},s.prototype.getPixelRatio=function(){return this.pixelRatio_},s.prototype.getResolution=function(){return this.resolution},s.prototype.getState=function(){return this.state},s.prototype.load=function(){},e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(230)),a=n(i(50)),s=function(t,e,i,n,r){this.loader_=void 0===r?null:r;var s=void 0===r?a.default.LOADED:a.default.IDLE;o.default.call(this,t,e,i,s),this.canvas_=n,this.error_=null};r.default.inherits(s,o.default),s.prototype.getError=function(){return this.error_},s.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=a.default.ERROR):this.state=a.default.LOADED,this.changed()},s.prototype.load=function(){this.state==a.default.IDLE&&(this.state=a.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},s.prototype.getImage=function(){return this.canvas_},e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(231)),a=n(i(23)),s=n(i(17)),l=n(i(7)),u=n(i(1)),d=n(i(131)),f=n(i(3)),c=n(i(70)),h=n(i(21)),p=n(i(123)),_=n(i(10)),g=function(t){p.default.call(this,t),this.image_=null,this.imageTransform_=_.default.create(),this.skippedFeatures_=[],this.vectorRenderer_=null};r.default.inherits(g,p.default),g.handles=function(t,e){return t===h.default.CANVAS&&(e.getType()===a.default.IMAGE||e.getType()===a.default.VECTOR&&e.getRenderMode()===d.default.IMAGE)},g.create=function(t,e){var i=new g(e);if(e.getType()===a.default.VECTOR)for(var n,r=c.default.getLayerRendererPlugins(),o=0,s=r.length;o<s;++o)(n=r[o])!==g&&n.handles(h.default.CANVAS,e)&&i.setVectorRenderer(n.create(t,e));return i},g.prototype.getImage=function(){return this.image_?this.image_.getImage():null},g.prototype.getImageTransform=function(){return this.imageTransform_},g.prototype.prepareFrame=function(t,e){var i,n=t.pixelRatio,a=t.size,d=t.viewState,c=d.center,h=d.resolution,p=this.getLayer().getSource(),g=t.viewHints,y=t.extent;if(void 0!==e.extent&&(y=u.default.getIntersection(y,e.extent)),!g[s.default.ANIMATING]&&!g[s.default.INTERACTING]&&!u.default.isEmpty(y)){var v=d.projection;if(!r.default.ENABLE_RASTER_REPROJECTION){var m=p.getProjection();m&&(v=m)}var E=this.vectorRenderer_;if(E){var b=E.context,C=f.default.assign({},t,{size:[u.default.getWidth(y)/h,u.default.getHeight(y)/h],viewState:f.default.assign({},t.viewState,{rotation:0})}),T=Object.keys(C.skippedFeatureUids).sort();E.prepareFrame(C,e)&&(E.replayGroupChanged||!l.default.equals(T,this.skippedFeatures_))&&(b.canvas.width=C.size[0]*n,b.canvas.height=C.size[1]*n,E.composeFrame(C,e,b),this.image_=new o.default(y,h,n,b.canvas),this.skippedFeatures_=T)}else if(i=p.getImage(y,h,n,v)){this.loadImage(i)&&(this.image_=i)}}if(this.image_){var x=(i=this.image_).getExtent(),S=i.getResolution(),R=i.getPixelRatio(),O=n*S/(h*R),P=_.default.compose(this.imageTransform_,n*a[0]/2,n*a[1]/2,O,O,0,R*(x[0]-c[0])/S,R*(c[1]-x[3])/S);_.default.compose(this.coordinateToCanvasPixelTransform,n*a[0]/2-P[4],n*a[1]/2-P[5],n/h,-n/h,0,-c[0],-c[1]),this.updateLogos(t,p),this.renderedResolution=S*n/R}return!!this.image_},g.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,i,n,r):p.default.prototype.forEachFeatureAtCoordinate.call(this,t,e,i,n,r)},g.prototype.setVectorRenderer=function(t){this.vectorRenderer_=t},e.default=g},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(17)),a=n(i(13)),s=n(i(26)),l=n(i(54)),u=function t(e){l.default.call(this,{handleDownEvent:t.handleDownEvent_,handleDragEvent:t.handleDragEvent_,handleUpEvent:t.handleUpEvent_});var i=e||{};this.constrainResolution_=i.constrainResolution||!1,this.anchor_=null,this.duration_=void 0===i.duration?400:i.duration,this.lastDistance_=void 0,this.lastScaleDelta_=1};r.default.inherits(u,l.default),u.handleDragEvent_=function(t){var e=1,i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,o=i.clientY-n.clientY,a=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var u=t.map,d=u.getView(),f=d.getResolution(),c=d.getMaxResolution(),h=d.getMinResolution(),p=f*e;p>c?(e=c/f,p=c):p<h&&(e=h/f,p=h),1!=e&&(this.lastScaleDelta_=e);var _=u.getViewport().getBoundingClientRect(),g=l.default.centroid(this.targetPointers);g[0]-=_.left,g[1]-=_.top,this.anchor_=u.getCoordinateFromPixel(g),u.render(),s.default.zoomWithoutConstraints(d,p,this.anchor_)},u.handleUpEvent_=function(t){if(2>this.targetPointers.length){var e=t.map.getView();e.setHint(o.default.INTERACTING,-1);var i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){var n=this.lastScaleDelta_-1;s.default.zoom(e,i,this.anchor_,this.duration_,n)}return!1}return!0},u.handleDownEvent_=function(t){if(2<=this.targetPointers.length){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(o.default.INTERACTING,1),!0}return!1},u.prototype.shouldStopEvent=a.default.FALSE,e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(17)),a=n(i(13)),s=n(i(26)),l=n(i(54)),u=n(i(93)),d=function t(e){l.default.call(this,{handleDownEvent:t.handleDownEvent_,handleDragEvent:t.handleDragEvent_,handleUpEvent:t.handleUpEvent_});var i=e||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0===i.threshold?.3:i.threshold,this.duration_=void 0===i.duration?250:i.duration};r.default.inherits(d,l.default),d.handleDragEvent_=function(t){var e=0,i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var a=t.map,d=a.getView();if(d.getConstraints().rotation!==u.default.disable){var f=a.getViewport().getBoundingClientRect(),c=l.default.centroid(this.targetPointers);if(c[0]-=f.left,c[1]-=f.top,this.anchor_=a.getCoordinateFromPixel(c),this.rotating_){var h=d.getRotation();a.render(),s.default.rotateWithoutConstraints(d,h+e,this.anchor_)}}},d.handleUpEvent_=function(t){if(2>this.targetPointers.length){var e=t.map.getView();if(e.setHint(o.default.INTERACTING,-1),this.rotating_){var i=e.getRotation();s.default.rotate(e,i,this.anchor_,this.duration_)}return!1}return!0},d.handleDownEvent_=function(t){if(2<=this.targetPointers.length){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(o.default.INTERACTING,1),!0}return!1},d.prototype.shouldStopEvent=a.default.FALSE,e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.max;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(17)),s=n(i(27)),l=n(i(4)),u=n(i(19)),d=n(i(26)),f=n(i(6)),c=function t(e){d.default.call(this,{handleEvent:t.handleEvent});var i=e||{};this.delta_=0,this.duration_=void 0===i.duration?250:i.duration,this.timeout_=void 0===i.timeout?80:i.timeout,this.useAnchor_=!(void 0!==i.useAnchor)||i.useAnchor,this.constrainResolution_=i.constrainResolution||!1,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5};o.default.inherits(c,d.default),c.handleEvent=function(t){var e=t.type;if(e!==l.default.WHEEL&&e!==l.default.MOUSEWHEEL)return!0;t.preventDefault();var i,n=t.map,o=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==l.default.WHEEL?(i=o.deltaY,u.default.FIREFOX&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=u.default.DEVICE_PIXEL_RATIO),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==l.default.MOUSEWHEEL&&(i=-o.wheelDeltaY,u.default.SAFARI&&(i/=3)),0===i)return!1;var d=Date.now();if(void 0===this.startTime_&&(this.startTime_=d),(!this.mode_||d-this.startTime_>this.trackpadEventGap_)&&(this.mode_=4>Math.abs(i)?c.Mode_.TRACKPAD:c.Mode_.WHEEL),this.mode_===c.Mode_.TRACKPAD){var f=n.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):f.setHint(a.default.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var h=f.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),p=f.getMinResolution(),_=f.getMaxResolution(),g=0;if(h<p?(h=r(h,p/this.trackpadZoomBuffer_),g=1):h>_&&(h=Math.min(h,_*this.trackpadZoomBuffer_),g=-1),this.lastAnchor_){var y=f.calculateCenterZoom(h,this.lastAnchor_);f.setCenter(f.constrainCenter(y))}return f.setResolution(h),0==g&&this.constrainResolution_&&f.animate({resolution:f.constrainResolution(h,0<i?-1:1),easing:s.default.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),0<g?f.animate({resolution:p,easing:s.default.easeOut,anchor:this.lastAnchor_,duration:500}):0>g&&f.animate({resolution:_,easing:s.default.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=d,!1}this.delta_+=i;var v=r(this.timeout_-(d-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),v),!1},c.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(a.default.INTERACTING,-1)},c.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=o.default.MOUSEWHEELZOOM_MAXDELTA,n=f.default.clamp(this.delta_,-i,i);d.default.zoomByDelta(e,-n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},c.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},c.Mode_={TRACKPAD:"trackpad",WHEEL:"wheel"},e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(4)),a=n(i(44)),s=n(i(26)),l=function t(e){s.default.call(this,{handleEvent:t.handleEvent});var i=e||{};this.condition_=i.condition?i.condition:a.default.targetNotEditable,this.delta_=i.delta?i.delta:1,this.duration_=void 0===i.duration?100:i.duration};r.default.inherits(l,s.default),l.handleEvent=function(t){var e=!1;if(t.type==o.default.KEYDOWN||t.type==o.default.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(43==i||45==i)){var n=t.map,r=43==i?this.delta_:-this.delta_,a=n.getView();s.default.zoomByDelta(a,r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e},e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={LEFT:37,UP:38,RIGHT:39,DOWN:40}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(55)),a=n(i(4)),s=n(i(237)),l=n(i(44)),u=n(i(26)),d=function t(e){u.default.call(this,{handleEvent:t.handleEvent});var i=e||{};this.defaultCondition_=function(t){return l.default.noModifierKeys(t)&&l.default.targetNotEditable(t)},this.condition_=void 0===i.condition?this.defaultCondition_:i.condition,this.duration_=void 0===i.duration?100:i.duration,this.pixelDelta_=void 0===i.pixelDelta?128:i.pixelDelta};r.default.inherits(d,u.default),d.handleEvent=function(t){var e=!1;if(t.type==a.default.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==s.default.DOWN||i==s.default.LEFT||i==s.default.RIGHT||i==s.default.UP)){var n=t.map.getView(),r=n.getResolution()*this.pixelDelta_,l=0,d=0;i==s.default.DOWN?d=-r:i==s.default.LEFT?l=-r:i==s.default.RIGHT?l=r:d=r;var f=[l,d];o.default.rotate(f,n.getRotation()),u.default.pan(n,f,this.duration_),t.preventDefault(),e=!0}}return!e},e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.abs,o=Math.min;Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(0)),s=n(i(84)),l=n(i(35)),u=function(t){this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null};a.default.inherits(u,s.default),u.prototype.disposeInternal=function(){this.setMap(null)},u.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=o(t[0],e[0])+i,n.top=o(t[1],e[1])+i,n.width=r(e[0]-t[0])+i,n.height=r(e[1]-t[1])+i},u.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},u.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},u.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new l.default([i])},u.prototype.getGeometry=function(){return this.geometry_},e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(22)),o=n(i(0)),a=n(i(44)),s=n(i(54)),l=n(i(239)),u=function t(e){s.default.call(this,{handleDownEvent:t.handleDownEvent_,handleDragEvent:t.handleDragEvent_,handleUpEvent:t.handleUpEvent_});var i=e||{};this.box_=new l.default(i.className||"ol-dragbox"),this.minArea_=void 0===i.minArea?64:i.minArea,this.startPixel_=null,this.condition_=i.condition?i.condition:a.default.always,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:t.defaultBoxEndCondition};o.default.inherits(u,s.default),u.defaultBoxEndCondition=function(t,e,i){var n=i[0]-e[0],r=i[1]-e[1];return n*n+r*r>=this.minArea_},u.handleDragEvent_=function(t){a.default.mouseOnly(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new u.Event(u.EventType_.BOXDRAG,t.coordinate,t)))},u.prototype.getGeometry=function(){return this.box_.getGeometry()},u.prototype.onBoxEnd=o.default.nullFunction,u.handleUpEvent_=function(t){return!a.default.mouseOnly(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd(t),this.dispatchEvent(new u.Event(u.EventType_.BOXEND,t.coordinate,t))),!1)},u.handleDownEvent_=function(t){return!!a.default.mouseOnly(t)&&!(!a.default.mouseActionButton(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new u.Event(u.EventType_.BOXSTART,t.coordinate,t)),!0)},u.EventType_={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},u.Event=function(t,e,i){r.default.call(this,t),this.coordinate=e,this.mapBrowserEvent=i},o.default.inherits(u.Event,r.default),e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(27)),a=n(i(44)),s=n(i(1)),l=n(i(240)),u=function(t){var e=t||{},i=e.condition?e.condition:a.default.shiftKeyOnly;this.duration_=void 0===e.duration?200:e.duration,this.out_=void 0!==e.out&&e.out,l.default.call(this,{condition:i,className:e.className||"ol-dragzoom"})};r.default.inherits(u,l.default),u.prototype.onBoxEnd=function(){var t=this.getMap(),e=t.getView(),i=t.getSize(),n=this.getGeometry().getExtent();if(this.out_){var r=e.calculateExtent(i),a=s.default.createOrUpdateFromCoordinates([t.getPixelFromCoordinate(s.default.getBottomLeft(n)),t.getPixelFromCoordinate(s.default.getTopRight(n))]),l=e.getResolutionForExtent(a,i);s.default.scaleFromCenter(r,1/l),n=r}var u=e.constrainResolution(e.getResolutionForExtent(n,i)),d=s.default.getCenter(n);d=e.constrainCenter(d),e.animate({resolution:u,center:d,duration:this.duration_,easing:o.default.easeOut})},e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(93)),a=n(i(17)),s=n(i(44)),l=n(i(13)),u=n(i(26)),d=n(i(54)),f=function t(e){var i=e||{};d.default.call(this,{handleDownEvent:t.handleDownEvent_,handleDragEvent:t.handleDragEvent_,handleUpEvent:t.handleUpEvent_}),this.condition_=i.condition?i.condition:s.default.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0===i.duration?250:i.duration};r.default.inherits(f,d.default),f.handleDragEvent_=function(t){if(s.default.mouseOnly(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==o.default.disable){var n=e.getSize(),r=t.pixel,a=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);if(void 0!==this.lastAngle_){var l=a-this.lastAngle_,d=i.getRotation();u.default.rotateWithoutConstraints(i,d-l)}this.lastAngle_=a}}},f.handleUpEvent_=function(t){if(!s.default.mouseOnly(t))return!0;var e=t.map.getView();e.setHint(a.default.INTERACTING,-1);var i=e.getRotation();return u.default.rotate(e,i,void 0,this.duration_),!1},f.handleDownEvent_=function(t){return!!s.default.mouseOnly(t)&&(!(!s.default.mouseActionButton(t)||!this.condition_(t))&&(t.map.getView().setHint(a.default.INTERACTING,1),this.lastAngle_=void 0,!0))},f.prototype.shouldStopEvent=l.default.FALSE,e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(17)),a=n(i(55)),s=n(i(27)),l=n(i(44)),u=n(i(13)),d=n(i(54)),f=function t(e){d.default.call(this,{handleDownEvent:t.handleDownEvent_,handleDragEvent:t.handleDragEvent_,handleUpEvent:t.handleUpEvent_});var i=e||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.condition_=i.condition?i.condition:l.default.noModifierKeys,this.noKinetic_=!1};r.default.inherits(f,d.default),f.handleDragEvent_=function(t){var e=this.targetPointers,i=d.default.centroid(e);if(e.length!=this.lastPointersCount_)this.kinetic_&&this.kinetic_.begin();else if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var n=this.lastCentroid[0]-i[0],r=i[1]-this.lastCentroid[1],o=t.map.getView(),s=o.getState(),l=[n,r];a.default.scale(l,s.resolution),a.default.rotate(l,s.rotation),a.default.add(l,s.center),l=o.constrainCenter(l),o.setCenter(l)}this.lastCentroid=i,this.lastPointersCount_=e.length},f.handleUpEvent_=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),a=i.getCenter(),l=e.getPixelFromCoordinate(a),u=e.getCoordinateFromPixel([l[0]-n*Math.cos(r),l[1]-n*Math.sin(r)]);i.animate({center:i.constrainCenter(u),duration:500,easing:s.default.easeOut})}return i.setHint(o.default.INTERACTING,-1),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},f.handleDownEvent_=function(t){if(0<this.targetPointers.length&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,this.handlingDownUpSequence||e.setHint(o.default.INTERACTING,1),e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=1<this.targetPointers.length,!0}return!1},f.prototype.shouldStopEvent=u.default.FALSE,e.default=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={ACTIVE:"active"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(56)),a=n(i(26)),s=function t(e){var i=e||{};this.delta_=i.delta?i.delta:1,a.default.call(this,{handleEvent:t.handleEvent}),this.duration_=void 0===i.duration?250:i.duration};r.default.inherits(s,a.default),s.handleEvent=function(t){var e=!1,i=t.originalEvent;if(t.type==o.default.DBLCLICK){var n=t.map,r=t.coordinate,s=i.shiftKey?-this.delta_:this.delta_,l=n.getView();a.default.zoomByDelta(l,s,r,this.duration_),t.preventDefault(),e=!0}return!e},e.default=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};i.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},i.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},i.prototype.end=function(){if(6>this.points_.length)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;0<i&&this.points_[i+2]>t;)i-=3;var n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;var r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/n,this.initialVelocity_>this.minVelocity_},i.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},i.prototype.getAngle=function(){return this.angle_},e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(57)),o=n(i(246)),a=n(i(245)),s=n(i(243)),l=n(i(242)),u=n(i(241)),d=n(i(238)),f=n(i(236)),c=n(i(235)),h=n(i(234)),p=n(i(233)),_={defaults:function(t){var e=t||{},i=new r.default,n=new o.default(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new l.default),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new a.default({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new s.default({kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new h.default),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new p.default({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new d.default),i.push(new f.default({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new c.default({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new u.default({duration:e.zoomDuration})),i}};e.default=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(5)),a=n(i(4)),s=n(i(92)),l=n(i(40)),u=n(i(27)),d=function t(e){var i=e||{},n=void 0===i.className?"ol-zoom":i.className,r=void 0===i.delta?1:i.delta,u=void 0===i.zoomInLabel?"+":i.zoomInLabel,d=void 0===i.zoomOutLabel?"":i.zoomOutLabel,f=void 0===i.zoomInTipLabel?"Zoom in":i.zoomInTipLabel,c=void 0===i.zoomOutTipLabel?"Zoom out":i.zoomOutTipLabel,h=document.createElement("button");h.className=n+"-in",h.setAttribute("type","button"),h.title=f,h.appendChild("string"==typeof u?document.createTextNode(u):u),o.default.listen(h,a.default.CLICK,t.prototype.handleClick_.bind(this,r));var p=document.createElement("button");p.className=n+"-out",p.setAttribute("type","button"),p.title=c,p.appendChild("string"==typeof d?document.createTextNode(d):d),o.default.listen(p,a.default.CLICK,t.prototype.handleClick_.bind(this,-r));var _=n+" "+l.default.CLASS_UNSELECTABLE+" "+l.default.CLASS_CONTROL,g=document.createElement("div");g.className=_,g.appendChild(h),g.appendChild(p),s.default.call(this,{element:g,target:i.target}),this.duration_=void 0===i.duration?250:i.duration};r.default.inherits(d,s.default),d.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},d.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getResolution();if(i){var n=e.constrainResolution(i,t);0<this.duration_?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:n,duration:this.duration_,easing:u.default.easeOut})):e.setResolution(n)}}},e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(5)),o=n(i(4)),a=n(i(0)),s=n(i(92)),l=n(i(40)),u=n(i(27)),d=function t(e){var i=e||{},n=void 0===i.className?"ol-rotate":i.className,a=void 0===i.label?"":i.label;this.label_=null,"string"==typeof a?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=a):(this.label_=a,this.label_.classList.add("ol-compass"));var u=i.tipLabel?i.tipLabel:"Reset rotation",d=document.createElement("button");d.className=n+"-reset",d.setAttribute("type","button"),d.title=u,d.appendChild(this.label_),r.default.listen(d,o.default.CLICK,t.prototype.handleClick_,this);var f=n+" "+l.default.CLASS_UNSELECTABLE+" "+l.default.CLASS_CONTROL,c=document.createElement("div");c.className=f,c.appendChild(d);var h=i.render?i.render:t.render;this.callResetNorth_=i.resetNorth?i.resetNorth:void 0,s.default.call(this,{element:c,render:h,target:i.target}),this.duration_=void 0===i.duration?250:i.duration,this.autoHide_=!(void 0!==i.autoHide)||i.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(l.default.CLASS_HIDDEN)};a.default.inherits(d,s.default),d.prototype.handleClick_=function(t){t.preventDefault(),void 0===this.callResetNorth_?this.resetNorth_():this.callResetNorth_()},d.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&(void 0===t.getRotation()||(0<this.duration_?t.animate({rotation:0,duration:this.duration_,easing:u.default.easeOut}):t.setRotation(0)))},d.render=function(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var n="rotate("+i+"rad)";if(this.autoHide_){var r=this.element.classList.contains(l.default.CLASS_HIDDEN);r||0!==i?r&&0!==i&&this.element.classList.remove(l.default.CLASS_HIDDEN):this.element.classList.add(l.default.CLASS_HIDDEN)}this.label_.style.msTransform=n,this.label_.style.webkitTransform=n,this.label_.style.transform=n}this.rotation_=i}},e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(7)),a=n(i(92)),s=n(i(40)),l=n(i(8)),u=n(i(5)),d=n(i(4)),f=n(i(46)),c=n(i(3)),h=function t(e){var i=e||{};this.ulElement_=document.createElement("UL"),this.logoLi_=document.createElement("LI"),this.ulElement_.appendChild(this.logoLi_),this.logoLi_.style.display="none",this.collapsed_=!(void 0!==i.collapsed)||i.collapsed,this.collapsible_=!(void 0!==i.collapsible)||i.collapsible,this.collapsible_||(this.collapsed_=!1);var n=void 0===i.className?"ol-attribution":i.className,r=void 0===i.tipLabel?"Attributions":i.tipLabel,o=void 0===i.collapseLabel?"":i.collapseLabel;"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;var l=void 0===i.label?"i":i.label;"string"==typeof l?(this.label_=document.createElement("span"),this.label_.textContent=l):this.label_=l;var f=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,c=document.createElement("button");c.setAttribute("type","button"),c.title=r,c.appendChild(f),u.default.listen(c,d.default.CLICK,this.handleClick_,this);var h=n+" "+s.default.CLASS_UNSELECTABLE+" "+s.default.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),p=document.createElement("div");p.className=h,p.appendChild(this.ulElement_),p.appendChild(c);var _=i.render?i.render:t.render;a.default.call(this,{element:p,render:_,target:i.target}),this.renderedAttributions_=[],this.renderedVisible_=!0,this.logoElements_={}};r.default.inherits(h,a.default),h.prototype.getSourceAttributions_=function(t){for(var e,i={},n=[],r=t.layerStatesArray,o=t.viewState.resolution,a=0,s=r.length;a<s;++a)if(e=r[a],f.default.visibleAtResolution(e,o)){var l=e.layer.getSource();if(l){var u=l.getAttributions2();if(u){var d=u(t);if(d)if(Array.isArray(d))for(var c=0,h=d.length;c<h;++c)d[c]in i||(n.push(d[c]),i[d[c]]=!0);else d in i||(n.push(d),i[d]=!0)}}}return n},h.render=function(t){this.updateElement_(t.frameState)},h.prototype.updateElement_=function(t){if(t){var e=this.getSourceAttributions_(t);if(!o.default.equals(e,this.renderedAttributions_)){for(;this.ulElement_.lastChild!==this.logoLi_;)this.ulElement_.removeChild(this.ulElement_.lastChild);for(var i,n=0,r=e.length;n<r;++n)(i=document.createElement("LI")).innerHTML=e[n],this.ulElement_.appendChild(i);0===e.length&&0<this.renderedAttributions_.length?this.element.classList.add("ol-logo-only"):0===this.renderedAttributions_.length&&0<e.length&&this.element.classList.remove("ol-logo-only");var a=0<e.length||!c.default.isEmpty(t.logos);this.renderedVisible_!=a&&(this.element.style.display=a?"":"none",this.renderedVisible_=a),this.renderedAttributions_=e,this.insertLogos_(t)}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},h.prototype.insertLogos_=function(t){var e,i,n,r,o=t.logos,a=this.logoElements_;for(e in a)e in o||(l.default.removeNode(a[e]),delete a[e]);for(r in o){var s=o[r];s instanceof HTMLElement&&(this.logoLi_.appendChild(s),a[r]=s),r in a||((i=new Image).src=r,""===s?n=i:((n=document.createElement("a")).href=s,n.appendChild(i)),this.logoLi_.appendChild(n),a[r]=n)}this.logoLi_.style.display=c.default.isEmpty(o)?"none":""},h.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},h.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?l.default.replaceNode(this.collapseLabel_,this.label_):l.default.replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},h.prototype.getCollapsible=function(){return this.collapsible_},h.prototype.setCollapsible=function(t){this.collapsible_===t||(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},h.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},h.prototype.getCollapsed=function(){return this.collapsed_},e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(57)),o=n(i(250)),a=n(i(249)),s=n(i(248)),l={defaults:function(t){var e=t||{},i=new r.default;return(void 0===e.zoom||e.zoom)&&i.push(new s.default(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new a.default(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new o.default(e.attributionOptions)),i}};e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(57)),a=n(i(73)),s=n(i(15)),l=n(i(80)),u=n(i(11)),d=n(i(5)),f=n(i(4)),c=n(i(1)),h=n(i(133)),p=n(i(3)),_=n(i(34)),g=function t(e){var i=e||{},n=p.default.assign({},i);delete n.layers;var r=i.layers;h.default.call(this,n),this.layersListenerKeys_=[],this.listenerKeys_={},d.default.listen(this,s.default.getChangeEventType(t.Property_.LAYERS),this.handleLayersChanged_,this),r?Array.isArray(r)?r=new o.default(r.slice(),{unique:!0}):(u.default.assert(r instanceof o.default,43),r=r):r=new o.default(void 0,{unique:!0}),this.setLayers(r)};r.default.inherits(g,h.default),g.prototype.handleLayerChange_=function(){this.changed()},g.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(d.default.unlistenByKey),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(d.default.listen(t,a.default.ADD,this.handleLayersAdd_,this),d.default.listen(t,a.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(d.default.unlistenByKey);p.default.clear(this.listenerKeys_);var i,n,o,s=t.getArray();for(i=0,n=s.length;i<n;i++)o=s[i],this.listenerKeys_[r.default.getUid(o).toString()]=[d.default.listen(o,l.default.PROPERTYCHANGE,this.handleLayerChange_,this),d.default.listen(o,f.default.CHANGE,this.handleLayerChange_,this)];this.changed()},g.prototype.handleLayersAdd_=function(t){var e=t.element,i=r.default.getUid(e).toString();this.listenerKeys_[i]=[d.default.listen(e,l.default.PROPERTYCHANGE,this.handleLayerChange_,this),d.default.listen(e,f.default.CHANGE,this.handleLayerChange_,this)],this.changed()},g.prototype.handleLayersRemove_=function(t){var e=t.element,i=r.default.getUid(e).toString();this.listenerKeys_[i].forEach(d.default.unlistenByKey),delete this.listenerKeys_[i],this.changed()},g.prototype.getLayers=function(){return this.get(g.Property_.LAYERS)},g.prototype.setLayers=function(t){this.set(g.Property_.LAYERS,t)},g.prototype.getLayersArray=function(t){var e=void 0===t?[]:t;return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},g.prototype.getLayerStatesArray=function(t){var e=void 0===t?[]:t,i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});var n,r,o,a=this.getLayerState();for(n=i,r=e.length;n<r;n++)(o=e[n]).opacity*=a.opacity,o.visible=o.visible&&a.visible,o.maxResolution=Math.min(o.maxResolution,a.maxResolution),o.minResolution=Math.max(o.minResolution,a.minResolution),void 0!==a.extent&&(void 0===o.extent?o.extent=a.extent:o.extent=c.default.getIntersection(o.extent,a.extent));return e},g.prototype.getSourceState=function(){return _.default.READY},g.Property_={LAYERS:"layers"},e.default=g},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={padNumber:function(t,e,i){var n=void 0===i?""+t:t.toFixed(i),r=n.indexOf(".");return(r=-1===r?n.length:r)>e?n:Array(1+e-r).join("0")+n},compareVersions:function(t,e){for(var i=(""+t).split("."),n=(""+e).split("."),r=0;r<Math.max(i.length,n.length);r++){var o=parseInt(i[r]||"0",10),a=parseInt(n[r]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}};e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.floor,o=Math.pow,a=Math.log;Object.defineProperty(e,"__esModule",{value:!0});var s=n(i(7)),l=n(i(6)),u={createSnapToResolutions:function(t){return function(e,i,n){if(void 0!==e){var a=s.default.linearFindNearest(t,e,n);a=l.default.clamp(a+i,0,t.length-1);var u=r(a);if(a!=u&&u<t.length-1){var d=t[u]/t[u+1];return t[u]/o(d,a-u)}return t[u]}}},createSnapToPower:function(t,e,i){return function(n,s,l){if(void 0!==n){var u=r(a(e/n)/a(t)+(-l/2+.5)),d=Math.max(u+s,0);return void 0!==i&&(d=Math.min(d,i)),e/o(t,d)}}}};e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(6)),r={createExtent:function(t){return function(e){return e?[n.default.clamp(e[0],t[0],t[2]),n.default.clamp(e[1],t[1],t[3])]:void 0}},none:function(t){return t}};e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(20)),a=n(i(5)),s=n(i(4)),l=n(i(94)),u=function(t,e){l.default.call(this,function(e){return t.apply(null,e)},function(t){return t[0].getKey()}),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}};r.default.inherits(u,l.default),u.prototype.enqueue=function(t){var e=l.default.prototype.enqueue.call(this,t);if(e){var i=t[0];a.default.listen(i,s.default.CHANGE,this.handleTileChange,this)}return e},u.prototype.getTilesLoading=function(){return this.tilesLoading_},u.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===o.default.LOADED||i===o.default.ERROR||i===o.default.EMPTY||i===o.default.ABORT){a.default.unlisten(e,s.default.CHANGE,this.handleTileChange,this);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},u.prototype.loadMoreTiles=function(t,e){for(var i,n,r,a=0,s=!1;this.tilesLoading_<t&&a<e&&0<this.getCount();)r=(n=this.dequeue()[0]).getKey(),(i=n.getState())===o.default.ABORT?s=!0:i===o.default.IDLE&&!(r in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++a,n.load());0==a&&s&&this.tileChangeCallback_()},e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(7)),a=n(i(71)),s=n(i(126)),l=function(t,e){var i={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};a.default.call(this,t,i),this.pointerMap=t.pointerMap,this.mouseSource=e,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0};r.default.inherits(l,a.default),l.DEDUP_TIMEOUT=2500,l.CLICK_COUNT_TIMEOUT=200,l.POINTER_TYPE="touch",l.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},l.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&s.default.POINTER_ID.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},l.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},l.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),l.CLICK_COUNT_TIMEOUT)},l.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},l.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},l.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.webkitRadiusX||e.radiusX||0,i.height=e.webkitRadiusY||e.radiusY||0,i.pressure=e.webkitForce||e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType=l.POINTER_TYPE,i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},l.prototype.processTouches_=function(t,e){function i(){t.preventDefault()}var n,r,o=Array.prototype.slice.call(t.changedTouches),a=o.length;for(n=0;n<a;++n)(r=this.touchToPointer_(t,o[n])).preventDefault=i,e.call(this,t,r)},l.prototype.findTouch_=function(t,e){for(var i=t.length,n=0;n<i;n++)if(t[n].identifier===e)return!0;return!1},l.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),n=i.length;if(n>=e.length){var r,o,a,l=[];for(r=0;r<n;++r)o=i[r],a=this.pointerMap[o],o==s.default.POINTER_ID||this.findTouch_(e,o-2)||l.push(a.out);for(r=0;r<l.length;++r)this.cancelOut_(t,l[r])}},l.prototype.touchstart=function(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)},l.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},l.prototype.touchmove=function(t){t.preventDefault(),this.processTouches_(t,this.moveOverOut_)},l.prototype.moveOverOut_=function(t,e){var i=e,n=this.pointerMap[i.pointerId];if(n){var r=n.out,o=n.outTarget;this.dispatcher.move(i,t),r&&o!==i.target&&(r.relatedTarget=i.target,i.relatedTarget=o,r.target=o,i.target?(this.dispatcher.leaveOut(r,t),this.dispatcher.enterOver(i,t)):(i.target=o,i.relatedTarget=null,this.cancelOut_(t,i))),n.out=i,n.outTarget=i.target}},l.prototype.touchend=function(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)},l.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},l.prototype.touchcancel=function(t){this.processTouches_(t,this.cancelOut_)},l.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},l.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},l.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var n=[i.clientX,i.clientY];e.push(n),setTimeout(function(){o.default.remove(e,n)},l.DEDUP_TIMEOUT)}},e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(22)),a=function(t,e,i){o.default.call(this,t),this.originalEvent=e;var n=i||{};this.buttons=this.getButtons_(n),this.pressure=this.getPressure_(n,this.buttons),this.bubbles=!!("bubbles"in n)&&n.bubbles,this.cancelable=!!("cancelable"in n)&&n.cancelable,this.view="view"in n?n.view:null,this.detail="detail"in n?n.detail:null,this.screenX="screenX"in n?n.screenX:0,this.screenY="screenY"in n?n.screenY:0,this.clientX="clientX"in n?n.clientX:0,this.clientY="clientY"in n?n.clientY:0,this.ctrlKey=!!("ctrlKey"in n)&&n.ctrlKey,this.altKey=!!("altKey"in n)&&n.altKey,this.shiftKey=!!("shiftKey"in n)&&n.shiftKey,this.metaKey=!!("metaKey"in n)&&n.metaKey,this.button="button"in n?n.button:0,this.relatedTarget="relatedTarget"in n?n.relatedTarget:null,this.pointerId="pointerId"in n?n.pointerId:0,this.width="width"in n?n.width:0,this.height="height"in n?n.height:0,this.tiltX="tiltX"in n?n.tiltX:0,this.tiltY="tiltY"in n?n.tiltY:0,this.pointerType="pointerType"in n?n.pointerType:"",this.hwTimestamp="hwTimestamp"in n?n.hwTimestamp:0,this.isPrimary=!!("isPrimary"in n)&&n.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})};r.default.inherits(a,o.default),a.prototype.getButtons_=function(t){var e;if(t.buttons||a.HAS_BUTTONS)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e},a.prototype.getPressure_=function(t,e){return t.pressure?t.pressure:e?.5:0},a.HAS_BUTTONS=!1,function(){try{var t=new MouseEvent("click",{buttons:1});a.HAS_BUTTONS=1===t.buttons}catch(t){}}(),e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(71)),a=function(t){var e={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};o.default.call(this,t,e)};r.default.inherits(a,o.default),a.prototype.pointerDown=function(t){this.dispatcher.fireNativeEvent(t)},a.prototype.pointerMove=function(t){this.dispatcher.fireNativeEvent(t)},a.prototype.pointerUp=function(t){this.dispatcher.fireNativeEvent(t)},a.prototype.pointerOut=function(t){this.dispatcher.fireNativeEvent(t)},a.prototype.pointerOver=function(t){this.dispatcher.fireNativeEvent(t)},a.prototype.pointerCancel=function(t){this.dispatcher.fireNativeEvent(t)},a.prototype.lostPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)},a.prototype.gotPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)},e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(71)),a=function(t){var e={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};o.default.call(this,t,e),this.pointerMap=t.pointerMap,this.POINTER_TYPES=["","unavailable","touch","pen","mouse"]};r.default.inherits(a,o.default),a.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},a.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},a.prototype.msPointerDown=function(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)},a.prototype.msPointerMove=function(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)},a.prototype.msPointerUp=function(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)},a.prototype.msPointerOut=function(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)},a.prototype.msPointerOver=function(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)},a.prototype.msPointerCancel=function(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)},a.prototype.msLostPointerCapture=function(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)},a.prototype.msGotPointerCapture=function(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)},e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(5)),a=n(i(39)),s=n(i(19)),l=n(i(127)),u=n(i(126)),d=n(i(262)),f=n(i(261)),c=n(i(260)),h=n(i(259)),p=function(t){a.default.call(this),this.element_=t,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()};r.default.inherits(p,a.default),p.prototype.registerSources=function(){if(s.default.POINTER)this.registerSource("native",new f.default(this));else if(s.default.MSPOINTER)this.registerSource("ms",new d.default(this));else{var t=new u.default(this);this.registerSource("mouse",t),s.default.TOUCH&&this.registerSource("touch",new h.default(this,t))}this.register_()},p.prototype.registerSource=function(t,e){var i=e,n=i.getEvents();n&&(n.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))},this),this.eventSourceList_.push(i))},p.prototype.register_=function(){for(var t,e=this.eventSourceList_.length,i=0;i<e;i++)t=this.eventSourceList_[i],this.addEvents_(t.getEvents())},p.prototype.unregister_=function(){for(var t,e=this.eventSourceList_.length,i=0;i<e;i++)t=this.eventSourceList_[i],this.removeEvents_(t.getEvents())},p.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},p.prototype.addEvents_=function(t){t.forEach(function(t){o.default.listen(this.element_,t,this.eventHandler_,this)},this)},p.prototype.removeEvents_=function(t){t.forEach(function(t){o.default.unlisten(this.element_,t,this.eventHandler_,this)},this)},p.prototype.cloneEvent=function(t,e){for(var i,n={},r=0,o=p.CLONE_PROPS.length;r<o;r++)n[i=p.CLONE_PROPS[r][0]]=t[i]||e[i]||p.CLONE_PROPS[r][1];return n},p.prototype.down=function(t,e){this.fireEvent(l.default.POINTERDOWN,t,e)},p.prototype.move=function(t,e){this.fireEvent(l.default.POINTERMOVE,t,e)},p.prototype.up=function(t,e){this.fireEvent(l.default.POINTERUP,t,e)},p.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(l.default.POINTERENTER,t,e)},p.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(l.default.POINTERLEAVE,t,e)},p.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(l.default.POINTEROVER,t,e)},p.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(l.default.POINTEROUT,t,e)},p.prototype.cancel=function(t,e){this.fireEvent(l.default.POINTERCANCEL,t,e)},p.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},p.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},p.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},p.prototype.makeEvent=function(t,e,i){return new c.default(t,i,e)},p.prototype.fireEvent=function(t,e,i){var n=this.makeEvent(t,e,i);this.dispatchEvent(n)},p.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},p.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,u.default.prepareEvent(e,this),e)},p.prototype.disposeInternal=function(){this.unregister_(),a.default.prototype.disposeInternal.call(this)},p.CLONE_PROPS=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.abs;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(19)),s=n(i(56)),l=n(i(128)),u=n(i(5)),d=n(i(39)),f=n(i(127)),c=n(i(263)),h=function(t,e){d.default.call(this),this.map_=t,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e?e*a.default.DEVICE_PIXEL_RATIO:a.default.DEVICE_PIXEL_RATIO,this.down_=null;var i=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new c.default(i),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=u.default.listen(this.pointerEventHandler_,f.default.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=u.default.listen(this.pointerEventHandler_,f.default.POINTERMOVE,this.relayEvent_,this)};o.default.inherits(h,d.default),h.prototype.emulateClick_=function(t){var e=new l.default(s.default.CLICK,this.map_,t);this.dispatchEvent(e),0===this.clickTimeoutId_?this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var e=new l.default(s.default.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250):(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,e=new l.default(s.default.DBLCLICK,this.map_,t),this.dispatchEvent(e))},h.prototype.updateActivePointers_=function(t){var e=t;e.type==s.default.POINTERUP||e.type==s.default.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==s.default.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},h.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new l.default(s.default.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(u.default.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},h.prototype.isMouseActionButton_=function(t){return 0===t.button},h.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new l.default(s.default.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new c.default(document),this.dragListenerKeys_.push(u.default.listen(this.documentPointerEventHandler_,s.default.POINTERMOVE,this.handlePointerMove_,this),u.default.listen(this.documentPointerEventHandler_,s.default.POINTERUP,this.handlePointerUp_,this),u.default.listen(this.pointerEventHandler_,s.default.POINTERCANCEL,this.handlePointerUp_,this)))},h.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new l.default(s.default.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},h.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new l.default(t.type,this.map_,t,e))},h.prototype.isMoving_=function(t){return r(t.clientX-this.down_.clientX)>this.moveTolerance_||r(t.clientY-this.down_.clientY)>this.moveTolerance_},h.prototype.disposeInternal=function(){this.relayedListenerKey_&&(u.default.unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(u.default.unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(u.default.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),d.default.prototype.disposeInternal.call(this)},e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.round;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(57)),s=n(i(73)),l=n(i(130)),u=n(i(264)),d=n(i(56)),f=n(i(129)),c=n(i(95)),h=n(i(258)),p=n(i(15)),_=n(i(80)),g=n(i(257)),y=n(i(125)),v=n(i(17)),m=n(i(11)),E=n(i(8)),b=n(i(5)),C=n(i(22)),T=n(i(4)),x=n(i(1)),S=n(i(13)),R=n(i(19)),O=n(i(252)),P=n(i(3)),I=n(i(70)),w=n(i(21)),L=n(i(61)),A=n(i(94)),M=n(i(10)),F=function t(e){p.default.call(this);var i=t.createOptionsInternal(e);this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0===e.pixelRatio?R.default.DEVICE_PIXEL_RATIO:e.pixelRatio,this.logos_=i.logos,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=M.default.create(),this.pixelToCoordinateTransform_=M.default.create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("DIV"),this.viewport_.className="ol-viewport"+(R.default.TOUCH?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var n=[T.default.CLICK,T.default.DBLCLICK,T.default.MOUSEDOWN,T.default.TOUCHSTART,T.default.MSPOINTERDOWN,d.default.POINTERDOWN,T.default.MOUSEWHEEL,T.default.WHEEL],r=0,o=n.length;r<o;++r)b.default.listen(this.overlayContainerStopEvent_,n[r],C.default.stopPropagation);for(var l in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new u.default(this,e.moveTolerance),d.default)b.default.listen(this.mapBrowserEventHandler_,d.default[l],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=i.keyboardEventTarget,this.keyHandlerKeys_=null,b.default.listen(this.viewport_,T.default.WHEEL,this.handleBrowserEvent,this),b.default.listen(this.viewport_,T.default.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=i.controls||new a.default,this.interactions=i.interactions||new a.default,this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=i.mapRendererPlugin.create(this.viewport_,this),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new g.default(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},b.default.listen(this,p.default.getChangeEventType(h.default.LAYERGROUP),this.handleLayerGroupChanged_,this),b.default.listen(this,p.default.getChangeEventType(h.default.VIEW),this.handleViewChanged_,this),b.default.listen(this,p.default.getChangeEventType(h.default.SIZE),this.handleSizeChanged_,this),b.default.listen(this,p.default.getChangeEventType(h.default.TARGET),this.handleTargetChanged_,this),this.setProperties(i.values),this.controls.forEach(function(t){t.setMap(this)},this),b.default.listen(this.controls,s.default.ADD,function(t){t.element.setMap(this)},this),b.default.listen(this.controls,s.default.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)},this),b.default.listen(this.interactions,s.default.ADD,function(t){t.element.setMap(this)},this),b.default.listen(this.interactions,s.default.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_,this),b.default.listen(this.overlays_,s.default.ADD,function(t){this.addOverlayInternal_(t.element)},this),b.default.listen(this.overlays_,s.default.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)};o.default.inherits(F,p.default),F.prototype.addControl=function(t){this.getControls().push(t)},F.prototype.addInteraction=function(t){this.getInteractions().push(t)},F.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},F.prototype.addOverlay=function(t){this.getOverlays().push(t)},F.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},F.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),b.default.unlisten(this.viewport_,T.default.WHEEL,this.handleBrowserEvent,this),b.default.unlisten(this.viewport_,T.default.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(window.removeEventListener(T.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),p.default.prototype.disposeInternal.call(this)},F.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var n=this.getCoordinateFromPixel(t),r=void 0===(i=void 0===i?{}:i).hitTolerance?0:i.hitTolerance*this.frameState_.pixelRatio,o=void 0===i.layerFilter?S.default.TRUE:i.layerFilter;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,e,null,o,null)}},F.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,function(t){i||(i=[]),i.push(t)},e),i},F.prototype.forEachLayerAtPixel=function(t,e,i,n,r){if(this.frameState_){var o=void 0===i?null:i,a=void 0===n?S.default.TRUE:n,s=void 0===r?null:r;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,e,o,a,s)}},F.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t),n=void 0===(e=void 0===e?{}:e).layerFilter?S.default.TRUE:e.layerFilter,r=void 0===e.hitTolerance?0:e.hitTolerance*this.frameState_.pixelRatio;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,n,null)},F.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},F.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i=t.changedTouches?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},F.prototype.getTarget=function(){return this.get(h.default.TARGET)},F.prototype.getTargetElement=function(){var t=this.getTarget();return void 0===t?null:"string"==typeof t?document.getElementById(t):t},F.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?M.default.apply(e.pixelToCoordinateTransform,t.slice()):null},F.prototype.getControls=function(){return this.controls},F.prototype.getOverlays=function(){return this.overlays_},F.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0===e?null:e},F.prototype.getInteractions=function(){return this.interactions},F.prototype.getLayerGroup=function(){return this.get(h.default.LAYERGROUP)},F.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},F.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?M.default.apply(e.coordinateToPixelTransform,t.slice(0,2)):null},F.prototype.getRenderer=function(){return this.renderer_},F.prototype.getSize=function(){return this.get(h.default.SIZE)},F.prototype.getView=function(){return this.get(h.default.VIEW)},F.prototype.getViewport=function(){return this.viewport_},F.prototype.getOverlayContainer=function(){return this.overlayContainer_},F.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},F.prototype.getTilePriority=function(t,e,i,n){var r=this.frameState_;if(!(r&&e in r.wantedTiles))return A.default.DROP;if(!r.wantedTiles[e][t.getKey()])return A.default.DROP;var o=i[0]-r.focus[0],a=i[1]-r.focus[1];return 65536*Math.log(n)+Math.sqrt(o*o+a*a)/n},F.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,n=new l.default(i,this,t);this.handleMapBrowserEvent(n)},F.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e,i=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(e=i.length-1;0<=e;e--){var n=i[e];if(n.getActive())if(!n.handleEvent(t))break}}},F.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=16,n=i;if(t){var r=t.viewHints;r[v.default.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,n=2),r[v.default.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,n=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}var o,a,s=this.postRenderFunctions_;for(o=0,a=s.length;o<a;++o)s[o](this,t);s.length=0},F.prototype.handleSizeChanged_=function(){this.render()},F.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)b.default.unlistenByKey(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[b.default.listen(n,T.default.KEYDOWN,this.handleBrowserEvent,this),b.default.listen(n,T.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(T.default.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),E.default.removeNode(this.viewport_),void 0!==this.handleResize_&&(window.removeEventListener(T.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},F.prototype.handleTileChange_=function(){this.render()},F.prototype.handleViewPropertyChanged_=function(){this.render()},F.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(b.default.unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(b.default.unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",o.default.getUid(t)),this.viewPropertyListenerKey_=b.default.listen(t,_.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=b.default.listen(t,T.default.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},F.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(b.default.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[b.default.listen(t,_.default.PROPERTYCHANGE,this.render,this),b.default.listen(t,T.default.CHANGE,this.render,this)]),this.render()},F.prototype.isRendered=function(){return!!this.frameState_},F.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},F.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},F.prototype.removeControl=function(t){return this.getControls().remove(t)},F.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},F.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},F.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},F.prototype.renderFrame_=function(t){var e,i,n,a=this.getSize(),s=this.getView(),l=x.default.createEmpty(),u=this.frameState_,d=null;if(void 0!==a&&L.default.hasArea(a)&&s&&s.isDef()){var h=s.getHints(this.frameState_?this.frameState_.viewHints:void 0),p=this.getLayerGroup().getLayerStatesArray(),_={};for(e=0,i=p.length;e<i;++e)_[o.default.getUid(p[e].layer)]=p[e];var g=(n=s.getState()).center,y=n.resolution/this.pixelRatio_;g[0]=r(g[0]/y)*y,g[1]=r(g[1]/y)*y,d={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:l,focus:this.focus_?this.focus_:g,index:this.frameIndex_++,layerStates:_,layerStatesArray:p,logos:P.default.assign({},this.logos_),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:a,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:n,viewHints:h,wantedTiles:{}}}if(d&&(d.extent=x.default.getForViewAndSize(n.center,n.resolution,n.rotation,d.size,l)),this.frameState_=d,this.renderer_.renderFrame(d),d){if(d.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,d.postRenderFunctions),u)(!this.previousExtent_||!x.default.isEmpty(this.previousExtent_)&&!x.default.equals(d.extent,this.previousExtent_))&&(this.dispatchEvent(new f.default(c.default.MOVESTART,this,u)),this.previousExtent_=x.default.createOrUpdateEmpty(this.previousExtent_));this.previousExtent_&&!d.viewHints[v.default.ANIMATING]&&!d.viewHints[v.default.INTERACTING]&&!x.default.equals(d.extent,this.previousExtent_)&&(this.dispatchEvent(new f.default(c.default.MOVEEND,this,d)),x.default.clone(d.extent,this.previousExtent_))}this.dispatchEvent(new f.default(c.default.POSTRENDER,this,d)),setTimeout(this.handlePostRender.bind(this),0)},F.prototype.setLayerGroup=function(t){this.set(h.default.LAYERGROUP,t)},F.prototype.setSize=function(t){this.set(h.default.SIZE,t)},F.prototype.setTarget=function(t){this.set(h.default.TARGET,t)},F.prototype.setView=function(t){this.set(h.default.VIEW,t)},F.prototype.skipFeature=function(t){var e=o.default.getUid(t).toString();this.skippedFeatureUids_[e]=!0,this.render()},F.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},F.prototype.unskipFeature=function(t){var e=o.default.getUid(t).toString();delete this.skippedFeatureUids_[e],this.render()},F.DEFAULT_RENDERER_TYPES=[w.default.CANVAS,w.default.WEBGL],F.LOGO_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC",F.createOptionsInternal=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i={},n={};if(void 0===t.logo||"boolean"==typeof t.logo&&t.logo)n[F.LOGO_URL]="https://openlayers.org/";else{var r=t.logo;"string"==typeof r?n[r]="":r instanceof HTMLElement?n[o.default.getUid(r).toString()]=r:r&&(m.default.assert("string"==typeof r.href,44),m.default.assert("string"==typeof r.src,45),n[r.src]=r.href)}var s,l=t.layers instanceof O.default?t.layers:new O.default({layers:t.layers});i[h.default.LAYERGROUP]=l,i[h.default.TARGET]=t.target,i[h.default.VIEW]=void 0===t.view?new y.default:t.view,void 0===t.renderer?s=F.DEFAULT_RENDERER_TYPES:(Array.isArray(t.renderer)?s=t.renderer:"string"==typeof t.renderer?s=[t.renderer]:m.default.assert(!1,46),0<=s.indexOf("dom")&&(s=s.concat(F.DEFAULT_RENDERER_TYPES)));var u,d,f,c,p=I.default.getMapRendererPlugins();t:for(var _,g=0,v=s.length;g<v;++g){_=s[g];for(var E,b=0,C=p.length;b<C;++b)if((E=p[b]).handles(_)){u=E;break t}}if(!u)throw new Error("Unable to create a map renderer for types: "+s.join(", "));return void 0!==t.controls&&(Array.isArray(t.controls)?d=new a.default(t.controls.slice()):(m.default.assert(t.controls instanceof a.default,47),d=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?f=new a.default(t.interactions.slice()):(m.default.assert(t.interactions instanceof a.default,48),f=t.interactions)),void 0===t.overlays?c=new a.default:Array.isArray(t.overlays)?c=new a.default(t.overlays.slice()):(m.default.assert(t.overlays instanceof a.default,49),c=t.overlays),{controls:d,interactions:f,keyboardEventTarget:e,logos:n,overlays:c,mapRendererPlugin:u,values:i}},e.default=F},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(265)),a=n(i(124)),s=n(i(251)),l=n(i(247)),u=n(i(3)),d=n(i(70)),f=n(i(232)),c=n(i(229)),h=n(i(118)),p=n(i(228)),_=n(i(220)),g=n(i(218)),y=n(i(199)),v=n(i(198)),m=n(i(195));r.default.ENABLE_CANVAS&&(d.default.register(a.default.MAP_RENDERER,c.default),d.default.registerMultiple(a.default.LAYER_RENDERER,[f.default,h.default,p.default,_.default])),r.default.ENABLE_WEBGL&&(d.default.register(a.default.MAP_RENDERER,y.default),d.default.registerMultiple(a.default.LAYER_RENDERER,[g.default,v.default,m.default]));var E=function(t){(t=u.default.assign({},t)).controls||(t.controls=s.default.defaults()),t.interactions||(t.interactions=l.default.defaults()),o.default.call(this,t)};r.default.inherits(E,o.default),e.default=E},function(t){t.exports=window.shapefile||{}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=n(i(2)),a=n(i(9)),s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"canDownload",value:function(){return"download"in(0,o.default)("<a></a>").get(0)}},{key:"saveGeoJson",value:function(t,e){var i="data:application/jsoncharset=utf-8,"+encodeURIComponent(e),n=(0,o.default)('<a class="file-dwn"><img></a>');(0,o.default)("body").append(n),n.attr("href",i).attr("download",t).find("img").trigger("click"),n.remove()}},{key:"setItem",value:function(t,e){"localStorage"in window&&localStorage.setItem(t,e)}},{key:"getItem",value:function(t){if("localStorage"in window)return localStorage.getItem(t)}},{key:"removeItem",value:function(t){if("localStorage"in window)return localStorage.removeItem(t)}},{key:"readTextFile",value:function(t,e){var i=new FileReader;if(i.onload=function(){t(i.result)},e)i.readAsText(e);else{var n=(0,o.default)('<input class="file-in" type="file">');(0,o.default)("body").append(n),n.change(function(t){n.remove(),i.readAsText(t.target.files[0])}),n.trigger("click")}}},{key:"loadGeoJsonFile",value:function(t,e,i){var n=this;this.readTextFile(function(i){var r=n.addToMap(t,i);e&&e(r)},i)}},{key:"loadShapeFile",value:function(t,e,i){if(i)this.getShpDbfPrj(t,i,e);else{var n=this,r=(0,o.default)('<input class="file-in" type="file" multiple>');(0,o.default)("body").append(r),r.change(function(i){n.getShpDbfPrj(t,i.target.files,e),r.remove()}),r.trigger("click")}}},{key:"getShpDbfPrj",value:function(t,e,i){var n=this,r=void 0,o=void 0,a=void 0;Object.values(e).forEach(function(t){var e=t.name,i=e.substr(e.length-4).toLowerCase();".shp"===i?r=t:".dbf"===i?o=t:".prj"===i&&(a=t)}),r?this.readPrj(a,function(e){n.readShpDbf(t,r,o,e,i)}):i&&i()}},{key:"readPrj",value:function(t,e){t?this.readTextFile(e,t):e()}},{key:"readShpDbf",value:function(t,e,i,n,r){var o=this,a=void 0,s=void 0,l=new FileReader;l.onload=function(e){a=e.target.result,(s||!i)&&o.readShp(t,a,s,n,r)};var u=new FileReader;u.onload=function(e){s=e.target.result,a&&o.readShp(t,a,s,n,r)},l.readAsArrayBuffer(e),i&&u.readAsArrayBuffer(i)}},{key:"readShp",value:function(e,i,n,r,o){var a=this,s=[];t.shapefile.open(i,n).then(function(t){t.read().then(function i(n){if(!n.done)return s.push(n.value),t.read().then(i);var l=a.addToMap(e,s,r);o&&o(l)})}).catch(function(t){console.error(t)})}},{key:"addToMap",value:function(){throw"Not implemented"}},{key:"customProj",value:function(t){if(t){var e=a.default.nextId("shp:prj");return proj4.defs(e,t),e}}}]),t}();s.shapefile=i(267),e.default=s},function(t,e,i){"use strict";var n,r,o,a=Math.floor,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};o=function(){function t(i,n,r,o,s){for(;o>r;){if(600<o-r){var l=o-r+1,u=n-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),c=.5*Math.sqrt(d*f*(l-f)/l)*(0>u-l/2?-1:1);t(i,n,Math.max(r,a(n-u*f/l+c)),Math.min(o,a(n+(l-u)*f/l+c)),s)}var h=i[n],p=r,_=o;for(e(i,r,n),0<s(i[o],h)&&e(i,r,o);p<_;){for(e(i,p,_),p++,_--;0>s(i[p],h);)p++;for(;0<s(i[_],h);)_--}0===s(i[r],h)?e(i,r,_):e(i,++_,o),_<=n&&(r=_+1),n<=_&&(o=_-1)}}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}return function(e,n,r,o,a){t(e,n,r||0,o||e.length-1,a||i)}},"object"===s(e)&&void 0!==t?t.exports=o():void 0===(r="function"==typeof(n=o)?n.call(e,i,e,t):n)||(t.exports=r)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(82)),o=n(i(6)),a=n(i(62)),s=function(t){this.html_=t.html,this.tileRanges_=t.tileRanges?t.tileRanges:null};s.prototype.getHTML=function(){return this.html_},s.prototype.intersectsAnyTileRange=function(t,e,i){if(!this.tileRanges_)return!0;var n,s,l,u;for(u in t)if(u in this.tileRanges_){var d;for(l=t[u],n=0,s=this.tileRanges_[u].length;n<s;++n){if((d=this.tileRanges_[u][n]).intersects(l))return!0;var f=e.getTileRangeForExtentAndZ(a.default.extentFromProjection(i),parseInt(u,10)),c=f.getWidth();if(l.minX<f.minX||l.maxX>f.maxX){if(d.intersects(new r.default(o.default.modulo(l.minX,c),o.default.modulo(l.maxX,c),l.minY,l.maxY)))return!0;if(l.getWidth()>c&&d.intersects(f))return!0}}}return!1},e.default=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={all:function(){return[[-1/0,-1/0,1/0,1/0]]},bbox:function(t){return[t]},tile:function(t){return function(e,i){var n=t.getZForResolution(i),r=t.getTileRangeForExtentAndZ(e,n),o=[],a=[n,0,0];for(a[1]=r.minX;a[1]<=r.maxX;++a[1])for(a[2]=r.minY;a[2]<=r.maxY;++a[2])o.push(t.getTileCoordExtent(a));return o}}};e.default=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(7)),r={};r.DOCUMENT=document.implementation.createDocument("","",null),r.createElementNS=function(t,e){return r.DOCUMENT.createElementNS(t,e)},r.getAllTextContent=function(t,e){return r.getAllTextContent_(t,e,[]).join("")},r.getAllTextContent_=function(t,e,i){var n;if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?i.push((t.nodeValue+"").replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else for(n=t.firstChild;n;n=n.nextSibling)r.getAllTextContent_(n,e,i);return i},r.isDocument=function(t){return t instanceof Document},r.isNode=function(t){return t instanceof Node},r.getAttributeNS=function(t,e,i){return t.getAttributeNS(e,i)||""},r.setAttributeNS=function(t,e,i,n){t.setAttributeNS(e,i,n)},r.parse=function(t){return(new DOMParser).parseFromString(t,"application/xml")},r.makeArrayExtender=function(t,e){return function(i,r){var o=t.call(e,i,r);if(void 0!==o){var a=r[r.length-1];n.default.extend(a,o)}}},r.makeArrayPusher=function(t,e){return function(i,n){var r=t.call(void 0===e?this:e,i,n);void 0!==r&&n[n.length-1].push(r)}},r.makeReplacer=function(t,e){return function(i,n){var r=t.call(void 0===e?this:e,i,n);void 0!==r&&(n[n.length-1]=r)}},r.makeObjectPropertyPusher=function(t,e,i){return function(n,r){var o=t.call(void 0===i?this:i,n,r);if(void 0!==o){var a=r[r.length-1],s=void 0===e?n.localName:e;(s in a?a[s]:a[s]=[]).push(o)}}},r.makeObjectPropertySetter=function(t,e,i){return function(n,r){var o=t.call(void 0===i?this:i,n,r);void 0!==o&&(r[r.length-1][void 0===e?n.localName:e]=o)}},r.makeChildAppender=function(t,e){return function(i,n,r){t.call(void 0===e?this:e,i,n,r),r[r.length-1].node.appendChild(i)}},r.makeArraySerializer=function(t){var e,i;return function(n,o,a){if(void 0===e){e={};var s={};s[n.localName]=t,e[n.namespaceURI]=s,i=r.makeSimpleNodeFactory(n.localName)}r.serialize(e,i,o,a)}},r.makeSimpleNodeFactory=function(t,e){var i=t;return function(t,n,o){var a=n[n.length-1].node,s=i;void 0===s&&(s=o);var l=e;return void 0===e&&(l=a.namespaceURI),r.createElementNS(l,s)}},r.OBJECT_PROPERTY_NODE_FACTORY=r.makeSimpleNodeFactory(),r.makeSequence=function(t,e){for(var i=e.length,n=Array(i),r=0;r<i;++r)n[r]=t[e[r]];return n},r.makeStructureNS=function(t,e,i){var n,r,o=void 0===i?{}:i;for(n=0,r=t.length;n<r;++n)o[t[n]]=e;return o},r.parseNode=function(t,e,i,n){var r;for(r=e.firstElementChild;r;r=r.nextElementSibling){var o=t[r.namespaceURI];if(void 0!==o){var a=o[r.localName];void 0!==a&&a.call(n,r,i)}}},r.pushParseAndPop=function(t,e,i,n,o){return n.push(t),r.parseNode(e,i,n,o),n.pop()},r.serialize=function(t,e,i,n,r,o){for(var a,s,l=(void 0===r?i:r).length,u=0;u<l;++u)void 0!==(a=i[u])&&(void 0!==(s=e.call(o,a,n,void 0===r?void 0:r[u]))&&t[s.namespaceURI][s.localName].call(o,s,a,n))},r.pushSerializeAndPop=function(t,e,i,n,o,a,s){return o.push(t),r.serialize(e,i,n,o,a,s),o.pop()},e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(98)),a=n(i(273)),s={loadFeaturesXhr:function(t,e,i,n){return function(r,s,l){var u=new XMLHttpRequest;u.open("GET","function"==typeof t?t(r,s,l):t,!0),e.getType()==o.default.ARRAY_BUFFER&&(u.responseType="arraybuffer"),u.onload=function(){if(!u.status||200<=u.status&&300>u.status){var t,r=e.getType();r==o.default.JSON||r==o.default.TEXT?t=u.responseText:r==o.default.XML?!(t=u.responseXML)&&(t=a.default.parse(u.responseText)):r==o.default.ARRAY_BUFFER&&(t=u.response),t?i.call(this,e.readFeatures(t,{featureProjection:l}),e.readProjection(t),e.getLastExtent()):n.call(this)}else n.call(this)}.bind(this),u.onerror=function(){n.call(this)}.bind(this),u.send()}},xhr:function(t,e){return s.loadFeaturesXhr(t,e,function(t){this.addFeatures(t)},r.default.nullFunction)}};e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(1)),r={linearRingss:function(t,e,i,r){var o,a,s=[],l=n.default.createEmpty();for(o=0,a=i.length;o<a;++o){var u=i[o];l=n.default.createOrUpdateFromFlatCoordinates(t,e,u[0],r),s.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=u[u.length-1]}return s}};e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={coordinates:function(t,e,i,n){for(;e<i-n;){var r;for(r=0;r<n;++r){var o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}};e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(1)),a=n(i(29)),s=n(i(12)),l=n(i(24)),u=n(i(76)),d=n(i(59)),f=n(i(37)),c=n(i(36)),h=n(i(47)),p=function(t,e){l.default.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};r.default.inherits(p,l.default),p.prototype.clone=function(){var t=new p(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},p.prototype.closestPointXY=function(t,e,i,n){return n<o.default.closestSquaredDistanceXY(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(d.default.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),d.default.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},p.prototype.getArea=function(){return u.default.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},p.prototype.getCoordinates=function(){return c.default.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},p.prototype.getSimplifiedGeometryInternal=function(t){var e=[];e.length=h.default.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);var i=new p(null);return i.setFlatCoordinates(a.default.XY,e),i},p.prototype.getType=function(){return s.default.LINEAR_RING},p.prototype.intersectsExtent=function(){},p.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),!this.flatCoordinates&&(this.flatCoordinates=[]),this.flatCoordinates.length=f.default.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(a.default.XY,null)},p.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(5)),a=n(i(4)),s=n(i(1)),l=n(i(79)),u=n(i(12)),d=n(i(3)),f=function(t){l.default.call(this),this.geometries_=t||null,this.listenGeometriesChange_()};r.default.inherits(f,l.default),f.cloneGeometries_=function(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(t[e].clone());return n},f.prototype.unlistenGeometriesChange_=function(){var t,e;if(this.geometries_)for(t=0,e=this.geometries_.length;t<e;++t)o.default.unlisten(this.geometries_[t],a.default.CHANGE,this.changed,this)},f.prototype.listenGeometriesChange_=function(){var t,e;if(this.geometries_)for(t=0,e=this.geometries_.length;t<e;++t)o.default.listen(this.geometries_[t],a.default.CHANGE,this.changed,this)},f.prototype.clone=function(){var t=new f(null);return t.setGeometries(this.geometries_),t},f.prototype.closestPointXY=function(t,e,i,n){if(n<s.default.closestSquaredDistanceXY(this.getExtent(),t,e))return n;var r,o,a=this.geometries_;for(r=0,o=a.length;r<o;++r)n=a[r].closestPointXY(t,e,i,n);return n},f.prototype.containsXY=function(t,e){var i,n,r=this.geometries_;for(i=0,n=r.length;i<n;++i)if(r[i].containsXY(t,e))return!0;return!1},f.prototype.computeExtent=function(t){s.default.createOrUpdateEmpty(t);for(var e=this.geometries_,i=0,n=e.length;i<n;++i)s.default.extend(t,e[i].getExtent());return t},f.prototype.getGeometries=function(){return f.cloneGeometries_(this.geometries_)},f.prototype.getGeometriesArray=function(){return this.geometries_},f.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(d.default.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),0>t||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i,n,r=[],o=this.geometries_,a=!1;for(i=0,n=o.length;i<n;++i){var s=o[i],l=s.getSimplifiedGeometry(t);r.push(l),l!==s&&(a=!0)}if(a){var u=new f(null);return u.setGeometriesArray(r),this.simplifiedGeometryCache[e]=u,u}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},f.prototype.getType=function(){return u.default.GEOMETRY_COLLECTION},f.prototype.intersectsExtent=function(t){var e,i,n=this.geometries_;for(e=0,i=n.length;e<i;++e)if(n[e].intersectsExtent(t))return!0;return!1},f.prototype.isEmpty=function(){return 0===this.geometries_.length},f.prototype.rotate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.changed()},f.prototype.scale=function(t,e,i){var n=i;n||(n=s.default.getCenter(this.getExtent()));for(var r=this.geometries_,o=0,a=r.length;o<a;++o)r[o].scale(t,e,n);this.changed()},f.prototype.setGeometries=function(t){this.setGeometriesArray(f.cloneGeometries_(t))},f.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},f.prototype.applyTransform=function(t){var e,i,n=this.geometries_;for(e=0,i=n.length;e<i;++e)n[e].applyTransform(t);this.changed()},f.prototype.translate=function(t,e){var i,n,r=this.geometries_;for(i=0,n=r.length;i<n;++i)r[i].translate(t,e);this.changed()},f.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),l.default.prototype.disposeInternal.call(this)},e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return void 0===t?"undefined":r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":r(t)},a=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=n(i(99)),l=n(i(74)),u=n(i(72)),d=n(i(268)),f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,d.default),a(e,[{key:"addToMap",value:function(t,e,i){var n={featureProjection:t.getView().getProjection(),dataProjection:this.customProj(i)};"object"===(void 0===e?"undefined":o(e))&&(e={type:"FeatureCollection",features:e}),e=(new s.default).readFeatures(e,n);var r=new l.default,a=new u.default({source:r});return r.addFeatures(e),t.addLayer(a),a}}]),e}();e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(2)),r={hookupEvents:function(t){(0,n.default)(t).on("drop",n.default.proxy(this.loadLayer,this)),(0,n.default)(t).on("dragover",function(t){t.preventDefault()})},loadLayer:function(t){var e=t.originalEvent.dataTransfer;if(t.preventDefault(),t.stopPropagation(),e&&e.files.length){var i=e.files;"json"===i[0].name.split(".").pop().toLowerCase()?this.storage.loadGeoJsonFile(this,null,i[0]):this.storage.loadShapeFile(this,null,i)}},sortedPhotos:function(){var t=this,e=[];return Object.keys(this.photos).forEach(function(i){e.push(t.photos[i])}),e.sort(function(t,e){var i=t.name||t.get("name");return(e.name||e.get("name")).substr(0,4)-i.substr(0,4)})},LabelType:{BASE:"base",PHOTO:"photo"}};e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=n(i(2)),l=n(i(9)),u=n(i(280)),d=n(i(279)),f=n(i(266)),c=n(i(125)),h=n(i(194)),p=n(i(184)),_=(n(i(35)),function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.view instanceof c.default;e.setupView(t);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.default.mixin(o,[u.default]),o.latestPhoto=0,o.base=null,o.labels={},o.photos={},o.storage=new d.default,o.setupLayers(t,i),o.defaultExtent(n),o.hookupEvents(o.getTargetElement()),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,f.default),a(e,[{key:"showPhoto",value:function(t){this.hidePhoto(),this.photos[(t||this.latestPhoto)+""].setVisible(!0),this.showLabels("photo")}},{key:"hidePhoto",value:function(){this.base.setVisible(!0),this.showLabels(u.default.LabelType.BASE),Object.entries(this.photos).forEach(function(t){var e=o(t,2);e[0];e[1].setVisible(!1)})}},{key:"showLabels",value:function(t){this.labels.base.setVisible(t===u.default.LabelType.BASE),this.labels.photo.setVisible(t===u.default.LabelType.PHOTO)}},{key:"getBaseLayers",value:function(){return{base:this.base,labels:this.labels,photos:this.photos}}},{key:"getStorage",value:function(){return this.storage}},{key:"defaultExtent",value:function(t){t||this.getView().fit(e.EXTENT,this.getSize())}},{key:"setupLayers",value:function(t,i){var n=this;this.base=new p.default({extent:this.layerExtent(e.UNIVERSE_EXTENT,t.view),source:new h.default({url:e.BASE_URL,projection:"EPSG:3857"}),preload:i||0}),this.addLayer(this.base),Object.entries(e.LABEL_URLS).forEach(function(i){var r=o(i,2),a=r[0],s=r[1];n.labels[a]=new p.default({extent:n.layerExtent(e.LABEL_EXTENT,t.view),source:new h.default({url:s,projection:"EPSG:3857"}),zIndex:1e3,visible:"base"==a}),n.addLayer(n.labels[a])}),Object.entries(e.PHOTO_URLS).forEach(function(i){var r=o(i,2),a=r[0],l=r[1],u=new p.default({extent:n.layerExtent(e.PHOTO_EXTENT,t.view),source:new h.default({url:l,projection:"EPSG:3857"}),visible:!1});1*a.split("-")[0]>n.latestPhoto&&(n.latestPhoto=a),u.set("name",a),n.addLayer(u),u.on("change:visible",s.default.proxy(n.photoChange,n)),n.photos[a]=u})}},{key:"layerExtent",value:function(t,e){if(e&&"EPSG:3857"!==e.getProjection().getCode()){var i="EPSG:3857",n="EPSG:2263",r=proj4(i,n,[t[0],t[1]]),o=proj4(i,n,[t[2],t[3]]);return[r[0],r[1],o[0],o[1]]}return t}},{key:"photoChange",value:function(){var t=this,e=!1;Object.entries(this.photos).some(function(i){var n=o(i,2),r=(n[0],n[1]);if(e=r.getVisible())return t.showLabels(u.default.LabelType.PHOTO),!0}),e||this.showLabels(u.default.LabelType.BASE)}}]),e}());_.setupView=function(t){t.view instanceof c.default||(t.view=new c.default({center:_.CENTER,minZoom:8,maxZoom:21,zoom:8,constrainRotation:1}))},_.BASE_URL="https://maps{1-4}.nyc.gov/tms/1.0.0/carto/basemap/{z}/{x}/{-y}.jpg",_.PHOTO_URLS={1924:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/1924/{z}/{x}/{-y}.png8",1951:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/1951/{z}/{x}/{-y}.png8",1996:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/1996/{z}/{x}/{-y}.png8","2001-2":"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2001-2/{z}/{x}/{-y}.png8",2004:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2004/{z}/{x}/{-y}.png8",2006:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2006/{z}/{x}/{-y}.png8",2008:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2008/{z}/{x}/{-y}.png8",2010:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2010/{z}/{x}/{-y}.png8",2012:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2012/{z}/{x}/{-y}.png8",2014:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2014/{z}/{x}/{-y}.png8",2016:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2016/{z}/{x}/{-y}.png8"},_.LABEL_URLS={base:"https://maps{1-4}.nyc.gov/tms/1.0.0/carto/label/{z}/{x}/{-y}.png8",photo:"https://maps{1-4}.nyc.gov/tms/1.0.0/carto/label-lt/{z}/{x}/{-y}.png8"},_.UNIVERSE_EXTENT=[-8453323,4774561,-7983695,5165920],_.EXTENT=[-8266522,4937867,-8203781,5000276],_.CENTER=[-8235252,4969073],_.LABEL_EXTENT=[-8268e3,4870900,-8005e3,5055500],_.PHOTO_EXTENT=[-8268357,4937238,-8203099,5001716],e.default=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(144)),l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.default.getScript("https://translate.google.com/translate_a/element.js?cb=nycTranslateInstance.init"),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"init",value:function(){nycTranslateInstance.goog=new google.translate.TranslateElement({pageLanguage:"en",includedLanguages:nycTranslateInstance.codes,layout:google.translate.TranslateElement.InlineLayout.SIMPLE,autoDisplay:!1},"lng-goog"),nycTranslateInstance.hack(),nycTranslateInstance.trigger("ready",nycTranslateInstance)}},{key:"translate",value:function(t){var e=(0,a.default)("iframe.goog-te-menu-frame:first").contents().find(".goog-te-menu2-item span.text");if(clearTimeout(nycTranslateInstance.timeout),t&&e.length){var i=this.languages[(0,a.default)(t.target).val()].name;"English"===i?this.showOriginalText():(0,a.default)(e).each(function(t,e){if((0,a.default)(e).text()===i)return(0,a.default)(e).trigger("click"),!1}),this.code=this.namedCodes[i]||"en",this.css("goog-tranlated"),this.trigger("change",this)}else nycTranslateInstance.timeout=setTimeout(function(){nycTranslateInstance.translate(t)},200)}},{key:"getCookieValue",value:function(){var t=this.getCookie();return t?t=(t=t.split("/"))[2]:""}},{key:"getCookie",value:function(){for(var t,e=document.cookie.split(";"),i=0;i<e.length;i++){for(t=e[i];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf("googtrans="))return t.substring(10,t.length)}}},{key:"hack",value:function(){(0,a.default)("input[placeholder]").each(function(t,e){var i=(0,a.default)(e).next();if(i.hasClass("lng-placeholder")){i.find("font");var n=i.html();a.default.each(i.find("font"),function(t,e){n=(0,a.default)(e).html()}),(0,a.default)(e).attr("placeholder",n)}else(0,a.default)(e).after('<span class="lng-placeholder">'+(0,a.default)(e).attr("placeholder")+"</span>")}),(0,a.default)("body").css("top","auto"),(0,a.default)("#goog-gt-tt").remove(),setTimeout(a.default.proxy(this.hack,this),200)}},{key:"showOriginalText",value:function(){var t=this,e=(0,a.default)("iframe.goog-te-banner-frame:first");(0,a.default)(e.contents().find(".goog-te-button button")).each(function(e,i){if("Show original"===(0,a.default)(i).text()){var n=t.find("select").val();return(0,a.default)(i).trigger("click"),"English"!==t.languages[n].name&&t.find("select").val("en"),!1}})}}]),e}();e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"directions",value:function(e){var i={jsonpacket:this.jsonpacket(e),rand:this.randomParamCopiedFromMtaCode()},n=$.param(i);window.open().document.write(t.JUMP_PAGE.replace(/%QSTR%/,n))}},{key:"jsonpacket",value:function(t){return JSON.stringify(this.insanifyRequest(t))}},{key:"randomParamCopiedFromMtaCode",value:function(){return Math.floor(11*Math.random())}},{key:"now",value:function(){var t=new Date,e=t.getHours();return{date:t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear(),hour:13>e?e:e-12,minute:t.getMinutes(),ampm:12>e?"am":"pm"}}},{key:"insanifyLocation",value:function(t){var e=proj4(t.projection||"EPSG:3857","EPSG:4326",t.coordinate);return e[1]+"$"+e[0]+"$"+t.name+"$0"}},{key:"insanifyRequest",value:function(t){var e=t.origin,i=t.destination,n=(t.projection,this.now());return{RequestDevicename:"DESKTOP",OriginInput:e.name,DestinationInput:i.name,Arrdep:"D",Hour:n.hour,Minute:n.minute,Ampm:n.ampm,InputDate:n.date,Minimize:"X",Walkdist:"0.50",Mode:"FRBC12",LineStart:"",LineEnd:"",Accessible:t.accessible?"Y":"N",OriginCoordinates:this.insanifyLocation(e),DestinationCoordinates:this.insanifyLocation(i),LocationType:"",StartServiceType:"train",StartTrainType:"subway",StartBorough:"",EndBorough:"",Walkincrease:"",Maxinitialwait:"",Maxtriptime:"",Maxtransfers:""}}}]),t}();n.Location,n.SaneRequest,n.InsaneRequest,n.JUMP_PAGE='<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><title>Redirecting to MTA TripPlanner...</title><style>body, html {padding: 0;margin: 0;}#container {position: fixed;left: 0;top: 0;bottom: 0;right: 0;padding: 0 20px;background-size: 100px;background-position: center 10px;background-repeat: no-repeat;background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22512%22%20height%3D%22512%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E.st0%7Bfill%3A%230039A6%3B%7D.st1%7Bfill%3A%23fff%3B%7D.st2%7Bfill%3Anone%3Bstroke%3A%23fff%3Bstroke-width%3A5%3Bstroke-linecap%3Around%3B%7D%3C%2Fstyle%3E%3Cg%20transform%3D%22translate(28.11026%2C6)%22%3E%3Cpath%20class%3D%22st0%22%20d%3D%22M%200.4%2C106.9%20C%2045.6%2C42.3%20120.6%2C0%20205.4%2C0%20c%20138.1%2C0%20250%2C111.9%20250%2C250%200%2C138.1%20-111.9%2C250%20-250%2C250%20C%20124%2C500%2051.6%2C461%206%2C400.8%22%2F%3E%3Cpath%20class%3D%22st1%22%20d%3D%22m%2034%2C395.8%20c%200%2C0%200%2C-87.4%20-0.8%2C-97.3%200%2C-9.5%20-4.7%2C-64.2%20-3.7%2C-73.4%20l%202.6%2C0.1%2032.8%2C165.3%2045.9%2C-8.1%2026.7%2C-153.1%20c%200.8%2C0%202.2%2C0%203%2C0%201.4%2C9.4%20-2.4%2C53.8%20-2.4%2C63.3%20-0.8%2C9.9%20-0.8%2C85%20-0.8%2C85%20l%2046.5%2C-8.1%200%2C-230.5%20-72.6%2C-12.6%20-20.4%2C141.2%20C%2090.1%2C267.6%2070.2%2C119.2%2070.2%2C119.2%20L%200%2C107%205.7%2C400.8%22%2F%3E%3Cpolygon%20class%3D%22st1%22%20points%3D%22329.4%2C321.1%20351.8%2C318.2%20354.7%2C339.6%20380.9%2C335.1%20355.8%2C169.2%20324.6%2C163.8%20293%2C350.5%20326.3%2C344.6%22%2F%3E%3Cpolygon%20class%3D%22st1%22%20points%3D%22195.9%2C200.5%20231.1%2C203.6%20231.2%2C361.2%20274.2%2C353.7%20274.2%2C207.4%20302%2C209.7%20302%2C159.5%20195.9%2C141.1%22%2F%3E%3Cpolygon%20class%3D%22st0%22%20points%3D%22339.4%2C225.6%20334.4%2C281.2%20347.3%2C280.4%20342.5%2C225.6%22%2F%3E%3Cpath%20class%3D%22st2%22%20d%3D%22M%200.4%2C106.9%20C%2045.6%2C42.3%20120.6%2C0%20205.4%2C0%20c%20138.1%2C0%20250%2C111.9%20250%2C250%200%2C138.1%20-111.9%2C250%20-250%2C250%20C%20124%2C500%2051.6%2C461%206%2C400.8%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}body * {font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;font-size: 24px;font-weight: bold;color: #0039A6;}h1 {margin: 120px 0 -6px 0;overflow: hidden;}button {background-color: rgba(181,181,181,.1);border: 1px solid rgb(221,221,221);border-radius: 3px;margin: 120px auto 0 auto;padding: 10px;height: auto;width: auto;display: block;}button:hover {background-color: rgba(181,181,181,.3);}#msg, h2 {text-align: center;}#msg {display: none;}iframe {visibility: hidden;}</style><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.js"><\/script><head><body><div id="container"><button onclick="redirect();">Click to be redirected to the MTA TripPlanner</button><h1 id="msg" onclick="redirect();">Redirecting to the MTA TripPlanner<br>&bull;</h1><h2>Depending on your browser settings you may be required to reenter your trip information</h2></div><script>var REQUEST_URL = "http://tripplanner.mta.info/MyTrip/handler/customplannerHandler.ashx?";var RESPONSE_URL = "http://tripplanner.mta.info/MyTrip/ui_web/customplanner/results.aspx";function redirect(){$("button").hide();var msg = $("#msg").show();var iframe = $("<iframe></iframe>");setInterval(function(){msg.html(msg.html() + "&bull;");}, 300);$("#container").append(iframe);iframe.load(function(){document.location = RESPONSE_URL;});iframe.attr("src", REQUEST_URL + "%QSTR%");};<\/script></body></html>',e.default=n},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=n(i(2)),l=n(i(18)),u=n(i(100)),d=n(i(283)),f=function(e){function i(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var o=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,"body"));t.directions=o,o.append(i.HTML),o.map=null,o.tabs=new u.default({target:"#dir-tabs",tabs:[{tab:"#map-tab",title:"Map"},{tab:"#route-tab",title:"Directions"}]}),(0,s.default)(),(0,s.default)(window).resize(s.default.proxy(o.adjustTabs,o)),o.service=null,o.renderer=null,o.args=null,o.modeBtn="#transit",o.url=(e||i.GOOGLE_URL)+"&callback=directions.init",o.routeTarget=o.find("#route-tab div.route"),o.lastDir="",o.styles=n||i.DEFAULT_STYLES,(0,s.default)("#mta").click(s.default.proxy(o.tripPlanHack,o)),(0,s.default)("#mode button").click(s.default.proxy(o.mode,o));var a=(0,s.default)("#fld-from input");return a.keypress(s.default.proxy(o.key,o)).focus(function(){return a.select()}),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,l.default),a(i,[{key:"directions",value:function(t){var e=t.mode||"TRANSIT",i=this.url;return this.args=t,this.adjustTabs(),this.map?(t.from=t.from||(0,s.default)("#fld-from input").val(),(0,s.default)("#fld-from input").val(t.from),(0,s.default)("#fld-to").html(t.to),(0,s.default)("#fld-facility").html(t.facility),(0,s.default)("#directions").slideDown(),void(t.from&&this.lastDir!==t.from+"|"+t.to+"|"+e&&(this.lastDir=t.from+"|"+t.to+"|"+e,this.service.route({origin:t.from,destination:t.to,travelMode:google.maps.TravelMode[e]},s.default.proxy(this.handleResp,this))))):void setTimeout(function(){s.default.getScript(i)},200)}},{key:"handleResp",value:function(t,e){if(e===google.maps.DirectionsStatus.OK){var i=t.routes[0].legs[0],n=i.start_address.replace(/\, USA/,""),r=i.end_address.replace(/\, USA/,"");if(!this.args.origin.coordinate){var o=i.start_location;this.args.origin={name:n,coordinate:[o.lng(),o.lat()],projection:"EPSG:4326"}}this.renderer.setOptions({map:this.map,panel:(0,s.default)(this.routeTarget).get(0),directions:t}),(0,s.default)("#fld-from input").val(n),(0,s.default)("#fld-to").html(r)}else(0,s.default)(this.routeTarget).empty();this.trigger("change",{response:t,status:e})}},{key:"init",value:function(){this.map=new google.maps.Map((0,s.default)("#map-tab div.map").get(0),{mapTypeId:google.maps.MapTypeId.ROADMAP,backgroundColor:"#D3D3D3",panControl:!1,streetViewControl:!1,mapTypeControl:!1,zoomControl:!1,maxZoom:18,styles:this.styles}),this.service=new google.maps.DirectionsService,this.renderer=new google.maps.DirectionsRenderer,this.find(".btn-z-in, .btn-z-out").click(s.default.proxy(this.zoom,this)),this.directions(this.args)}},{key:"adjustTabs",value:function(){var t=1>Math.abs(this.tabs.getContainer().width()-(0,s.default)(window).width());this.args.origin.coordinate&&t?this.tabs.open("#map-tab"):this.tabs.open("#route-tab")}},{key:"zoom",value:function(t){var e=this.map.getZoom()||0;this.map.setZoom(e+1*(0,s.default)(t.target).data("zoom-incr"))}},{key:"mode",value:function(t){this.args=this.args||{},this.modeBtn=t.target,"mta"!==this.modeBtn.id&&((0,s.default)("#mode button").removeClass("active"),(0,s.default)(this.modeBtn).addClass("active"),this.args.mode=(0,s.default)(this.modeBtn).data("mode"),this.directions(this.args))}},{key:"key",value:function(t){13===t.keyCode&&(this.args.from=(0,s.default)("#fld-from input").val(),this.directions(this.args))}},{key:"tripPlanHack",value:function(){this.args.accessible=!0,(new d.default).directions(this.args)}}]),i}();f.DEFAULT_GOOGLE_URL="https://maps.googleapis.com/maps/api/js?&sensor=false&libraries=visualization",f.Request,f.Response,f.HTML='<div id="directions"><button id="back-to-map" class="btn rad-all" onclick="$(\'#directions\').slideUp()">Back to finder</button><div id="dir-tabs"><div id="route-tab"><div class="fld-lbl">From my location:</div><div id="fld-from"><input class="rad-all" placeholder="Enter an address..."></div><div class="fld-lbl">To <span id="fld-facility"></span>:</div><div id="fld-to"></div><table id="mode"><tbody><tr><td><button id="transit" class="btn-sq rad-all active" data-mode="TRANSIT" title="Get transit directions"><span class="screen-reader-only">get transit directions</span></button></td><td><button id="bike" class="btn-sq rad-all" data-mode="BICYCLING" title="Get bicycling directions"><span class="screen-reader-only">get bicycling directions</span></button></td><td><button id="walk" class="btn-sq rad-all" data-mode="WALKING" title="Get walking directions"><span class="screen-reader-only">get walking directions</span></button></td><td><button id="car" class="btn-sq rad-all" data-mode="DRIVING" title="Get driving directions"><span class="screen-reader-only">get driving directions</span></button></td><td><span class="screen-reader-only">Get accessible transit directions from the MTA </span><button id="mta" class="btn-sq rad-all">TripPlanner<svg xmlns="http://www.w3.org/2000/svg" width="656" height="656" viewBox="0 0 656 656"><g transform="translate(-263.86732,-69.7075)"><path d="M 833.556,367.574 C 825.803,359.619 814.97,355.419 803.9,356.025 l -133.981,7.458 73.733,-83.975 c 10.504,-11.962 13.505,-27.908 9.444,-42.157 -2.143,-9.764 -8.056,-18.648 -17.14,-24.324 -0.279,-0.199 -176.247,-102.423 -176.247,-102.423 -14.369,-8.347 -32.475,-6.508 -44.875,4.552 l -85.958,76.676 c -15.837,14.126 -17.224,38.416 -3.097,54.254 14.128,15.836 38.419,17.227 54.255,3.096 l 65.168,-58.131 53.874,31.285 -95.096,108.305 c -39.433,6.431 -74.913,24.602 -102.765,50.801 l 49.66,49.66 c 22.449,-20.412 52.256,-32.871 84.918,-32.871 69.667,0 126.346,56.68 126.346,126.348 0,32.662 -12.459,62.467 -32.869,84.916 l 49.657,49.66 c 33.08,-35.166 53.382,-82.484 53.382,-134.576 0,-31.035 -7.205,-60.384 -20.016,-86.482 l 51.861,-2.889 -12.616,154.75 c -1.725,21.152 14.027,39.695 35.18,41.422 1.059,0.086 2.116,0.127 3.163,0.127 19.806,0 36.621,-15.219 38.257,-35.306 l 16.193,-198.685 c 0.904,-11.071 -3.026,-21.989 -10.775,-29.942 z"/><path  d="m 762.384,202.965 c 35.523,0 64.317,-28.797 64.317,-64.322 0,-35.523 -28.794,-64.323 -64.317,-64.323 -35.527,0 -64.323,28.8 -64.323,64.323 0,35.525 28.795,64.322 64.323,64.322 z"/><path d="m 535.794,650.926 c -69.668,0 -126.348,-56.68 -126.348,-126.348 0,-26.256 8.056,-50.66 21.817,-70.887 l -50.196,-50.195 c -26.155,33.377 -41.791,75.393 -41.791,121.082 0,108.535 87.983,196.517 196.518,196.517 45.691,0 87.703,-15.636 121.079,-41.792 L 606.678,629.11 c -20.226,13.757 -44.63,21.816 -70.884,21.816 z"/></g></svg></td></tr></tbody></table><div class="route"></div></div><div id="map-tab"><div class="map"></div><button class="btn-z-in btn-sq rad-all" data-zoom-incr="1" title="Zoom in"><span class="screen-reader-only">Zoom in</span></button><button class="btn-z-out btn-sq rad-all" data-zoom-incr="-1" title="Zoom out"><span class="screen-reader-only">Zoom out</span></button></div></div></div>',f.DEFAULT_STYLES=[{elementType:"geometry.fill",stylers:[{color:"#ececec"}]},{elementType:"geometry.stroke",stylers:[{color:"#dcdcdc"}]},{elementType:"labels.text.fill",stylers:[{color:"#585858"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#e8e8e8"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#d8d8d8"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape.man_made",stylers:[{visibility:"off"}]},{featureType:"transit.line",stylers:[{visibility:"off"}]},{featureType:"administrative",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi.government",stylers:[{visibility:"on"}]},{featureType:"poi.park",stylers:[{visibility:"on"}]}],e.default=f}).call(this,i(64))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(18)),l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target));return i.getContainer().addClass("lst-pg").append((0,a.default)(e.HTML)),i.items=t.items||[],i.list=i.find(".list"),i.index=0,i.pageSize=t.pageSize||10,i.moreBtn=i.find("button").click(a.default.proxy(i.more,i)),i.reset(i.items),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"reset",value:function(t){this.list.empty(),this.items=t,this.index=0,this.moreBtn.fadeIn(),this.next()}},{key:"next",value:function(t){t=t||this.pageSize;var e=this.items.slice(this.index,this.index+t);return this.index+=t,this.index>=this.items.length-1&&this.moreBtn.fadeOut(),this.render(e),e}},{key:"render",value:function(t){var e=this;t.forEach(function(t){e.list.append((0,a.default)('<div class="lst-it" role="listitem"></div>').append(t.html()))})}},{key:"more",value:function(){this.next()}}]),e}();l.Options,l.Item,l.HTML='<div class="list" role="list"></div><button class="btn rad-all btn-more">More...</button>',e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(2)),s=n(i(18)),l=n(i(159));i(87).polyfill(),i(86);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target)),n=i;return fetch(t.url||"./manifest.webmanifest").then(function(t){return t.json()}).then(function(t){t.url=document.location.href,n.append((new l.default).replace(e.HTML,t)),n.hookupEvents()}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"hookupEvents",value:function(){var t=this.find(".btns");this.find(".btn-shr").click(function(e){e.stopPropagation(),t.fadeToggle(function(){(0,a.default)("*").one("click",function(e){e.stopPropagation(),1==1*t.css("opacity")&&t.fadeOut()})})})}}]),e}();u.Options,u.HTML='<div class="shr"><a class="btn-shr btn-sq rad-all" role="button" title="Share..."><span class="screen-reader-only">Share...</span></a><div class="btns"><a class="btn-sq rad-all facebook" role="button" href="https://www.facebook.com/sharer/sharer.php?u=${url}" target="_blank" rel="noopener noreferrer" title="Facebook"><span class="screen-reader-only">Facebook</span></a><a class="btn-sq rad-all twitter" role="button" href="https://twitter.com/intent/tweet?text=${url} @nycgov&source=webclient" target="_blank" rel="noopener noreferrer" title="Twitter"><span class="screen-reader-only">Twitter</span></a><a class="btn-sq rad-all google" role="button" href="https://plus.google.com/share?url=${url}" target="_blank" rel="noopener noreferrer" title="Google+"><span class="screen-reader-only">Google+</span></a><a class="btn-sq rad-all linkedin" role="button" href="http://www.linkedin.com/shareArticle?mini=true&url=${url}" target="_blank" rel="noopener noreferrer" title="LinkedIn"><span class="screen-reader-only">LinkedIn</span></a><a class="btn-sq rad-all tumblr" role="button" href="http://www.tumblr.com/share/link?url=${url}&name=${name}&description=via%20NYC.gov" target="_blank" rel="noopener noreferrer" title="Tumblr"><span class="screen-reader-only">Tumblr</span></a><a class="btn-sq rad-all email" role="button" href="mailto:?subject=${name}&body=${description}%0A%0A${url}" title="email"><span class="screen-reader-only">Email</span></a></div></div>',e.default=u},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=n(i(2)),a=n(i(9)),s=n(i(147)),l=n(i(146)),u=n(i(286)),d=n(i(100)),f=n(i(285)),c=n(i(145)),h=n(i(284)),p=n(i(144)),_=n(i(282)),g=n(i(281)),y=n(i(106)),v=n(i(181)),m=n(i(170)),E=n(i(89)),b=n(i(103)),C=n(i(166)),T=n(i(72)),x=function(){function e(i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),t.finderApp=this,(0,o.default)("body").append(e.HTML).addClass("fnd"),(0,o.default)("#banner").html(i.title),(0,o.default)("#home").attr("title",i.title),this.pager=new f.default({target:"#facilities"}),this.map=new g.default({target:"map"}),this.source=new C.default({url:i.facilityUrl,format:new b.default({parentFormat:this.parentFomat(i.facilityFormat),decorations:this.decorations(i,i.facilityFormat)})}),this.source.autoLoad().then(o.default.proxy(this.ready,this)),this.layer=new T.default({source:this.source,style:i.facilityStyle}),this.map.addLayer(this.layer),this.popup=new m.default({map:this.map,layers:[this.layer]}),this.view=this.map.getView(),this.locationMgr=new v.default({map:this.map,url:i.geoclientUrl}),this.locationMgr.on("geocoded",this.located,this),this.locationMgr.on("geolocated",this.located,this),this.filters=this.createFilters(i.filterChoiceOptions),this.tabs=this.createTabs(i),this.adjustTabs(),this.view.fit(g.default.EXTENT,{size:this.map.getSize(),duration:500}),this.location={},new E.default({map:this.map,tips:[{layer:this.layer,label:function(t){return{html:t.getName()}}}]}),this.showSplash(i.splashOptions),new u.default({target:"#map"}),new _.default({target:"#map",languages:i.languages||p.default.DEFAULT_LANGUAGES,button:!0}),this.directions=null,this.directionsUrl=i.directionsUrl}return r(e,[{key:"resetList",value:function(t){t instanceof y.default&&(0,o.default)("#tabs .btns h3.btn-2").addClass("filtered");var e=this.location.coordinate;this.popup.hide(),this.pager.reset(e?this.source.sort(e):this.source.getFeatures())}},{key:"zoomTo",value:function(t){var e=this.popup;e.hide(),"none"!==(0,o.default)("h3.btn-0").css("display")&&this.tabs.open("#map"),this.map.once("moveend",function(){e.showFeature(t)}),this.view.animate({center:t.getGeometry().getCoordinates(),zoom:c.default.ZOOM_LEVEL})}},{key:"directionsTo",value:function(t){this.directions=this.directions||new h.default(this.directionsUrl);var e=t.getFullAddress(),i=t.getName(),n=this.origin();this.directions.directions({from:n,to:e,facility:i,origin:this.location,destination:{name:t.getName(),coordinate:t.getGeometry().getCoordinates(),data:{}}})}},{key:"located",value:function(t){this.location=t,this.resetList(),this.focusFacilities()}},{key:"createFilters",value:function(t){if(t){var e=(0,o.default)('<button class="screen-reader-only">Apply</button>'),i=new y.default({target:"#filters",source:this.source,choiceOptions:t});return i.on("change",this.resetList,this),(0,o.default)("#filters").append(e),e.click(o.default.proxy(this.focusFacilities,this)),i}}},{key:"createTabs",value:function(t){var e=[{tab:"#map",title:"Map"},{tab:"#facilities",title:t.facilityTabTitle||"Facilities"}];this.filters&&e.push({tab:"#filters",title:t.filterTabTitle||"Filters"});var i=new d.default({target:"#tabs",tabs:e});return i.on("change",this.tabChange,this),(0,o.default)(window).resize(o.default.proxy(this.adjustTabs,this)),i}},{key:"expandDetail",value:function(){this.popup.pan()}},{key:"origin",value:function(){var t=this.location;if("geolocated"===t.type){var e=proj4(this.view.getProjection().getCode(),"EPSG:4326",t.coordinate);return e[1]+","+e[0]}return t.name||""}},{key:"focusFacilities",value:function(){this.tabs.find(".tab-1").attr("tabindex",0).focus()}},{key:"showSplash",value:function(t){var e=this.locationMgr.zoomSearch.input;t?(t.buttonText=t.buttonText||["Continue..."],new l.default("splash").ok(t).then(function(){e.focus()}),(0,o.default)(".splash .dia-msg").attr("tabindex",0).focus()):e.focus()}},{key:"tabsFillScreen",value:function(){return 1>Math.abs(this.tabs.getContainer().width()-(0,o.default)(window).width())}},{key:"adjustTabs",value:function(){this.tabs.open(this.tabsFillScreen()?"#map":"#facilities")}},{key:"tabChange",value:function(){this.tabsFillScreen()||(console.warn("NOT FULL SCREEN"),(0,o.default)("#map").attr("aria-hidden",!1)),this.map.setSize([(0,o.default)("#map").width(),(0,o.default)("#map").height()])}},{key:"parentFomat",value:function(t){return t.parentFomat||t}},{key:"decorations",value:function(t,i){var n=[e.FEATURE_DECORATIONS,{finderApp:this}];return i.parentFomat&&i.parentFomat.decorations&&(n=n.concat(i.parentFomat.decorations)),i.decorations&&(n=n.concat(i.decorations)),t.decorations&&(n=n.concat(t.decorations)),n}},{key:"ready",value:function(t){var e=this.facilitySearchOptions||{};e.features=t,this.pager.reset(t),this.locationMgr.zoomSearch.setFeatures(e),a.default.ready((0,o.default)("body"))}}]),e}();x.handleButton=function(e){var i=(0,o.default)(e.currentTarget),n=i.data("feature");i.hasClass("map")?t.finderApp.zoomTo(n):t.finderApp.directionsTo(n)},x.FEATURE_DECORATIONS={html:function(){return(0,o.default)('<div class="facility"></div>').addClass(this.cssClass()).append(this.distanceHtml()).append(this.nameHtml()).append(this.distanceHtml(!0)).append(this.addressHtml()).append(this.phoneButton()).append(this.emailButton()).append(this.websiteButton()).append(this.mapButton()).append(this.directionsButton()).append(this.detailsCollapsible())},getName:function(){throw"A getName decoration must be provided"},cssClass:function(){},getAddress1:function(){throw"A getAddress1 decoration must be provided to use default html method and directions"},getAddress2:function(){return""},getCityStateZip:function(){throw"A getCityStateZip decoration must be provided to use default html method and directions"},getFullAddress:function(){return this.getAddress1()+"\n"+this.getAddress2()+",\n"+this.getCityStateZip()},getPhone:function(){},getEmail:function(){},getWebsite:function(){},detailsHtml:function(){},nameHtml:function(){return(0,o.default)('<h2 class="name notranslate"></h2>').html(this.getName())},addressHtml:function(){var t=(0,o.default)('<div class="addr"></div>').append('<div class="ln1">'+this.getAddress1()+"</div>");return this.getAddress2()&&t.append('<div class="ln2">'+this.getAddress2()+"</div>"),t.append('<div class="ln3">'+this.getCityStateZip()+"</div>")},mapButton:function(){return(0,o.default)('<a class="btn rad-all map" role="button">Map</a>').data("feature",this).click(x.handleButton)},directionsButton:function(){return(0,o.default)('<a class="btn rad-all dir" role="button">Directions</a>').data("feature",this).click(x.handleButton)},phoneButton:function(){var t=this.getPhone();if(t)return(0,o.default)('<a class="btn rad-all phone" role="button">'+t+"</a>").attr("href","tel:"+t)},emailButton:function(){var t=this.getEmail();if(t)return(0,o.default)('<a class="btn rad-all email" role="button">Email</a>').attr("href","mailto:"+t)},websiteButton:function(){var t=this.getWebsite();if(t)return(0,o.default)('<a class="btn rad-all web" target="blank" role="button">Website</a>').attr("href",t)},distanceHtml:function(t){if(this.getDistance){var e=(0,o.default)('<div class="dist"></div>'),i=this.getDistance();return t?(e.addClass("screen-reader-only"),"ft"===i.units?e.html((i.distance/5280).toFixed(2)+" miles"):e.html((i.distance/1e3).toFixed(2)+" kilometers")):(e.attr("aria-hidden",!0),"ft"===i.units?e.html("&bull; "+(i.distance/5280).toFixed(2)+" mi &bull;"):e.html("&bull; "+(i.distance/1e3).toFixed(2)+" km &bull;"))}},detailsCollapsible:function(){var t=this.detailsHtml();if(t){var e=new s.default({target:(0,o.default)('<div class="dtl"></div>'),title:this.detailButtonText||"Details...",content:t,collapsed:!0});return e.on("change",this.finderApp.expandDetail,this.finderApp),e.getContainer()}}},x.Options,x.HTML='<h1 id="banner"></h1><div id="home" onclick="document.location.reload()"></div><div id="map"></div><div id="tabs"></div><div id="facilities"></div><div id="filters"></div>',e.default=x}).call(this,i(64))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.floor,o=Math.ceil,a=Math.max,s=Math.min;Object.defineProperty(e,"__esModule",{value:!0});var l=n(i(0)),u=n(i(11)),d=n(i(82)),f=n(i(7)),c=n(i(1)),h=n(i(6)),p=n(i(61)),_=n(i(49)),g=function(t){var e;if(this.minZoom=void 0===t.minZoom?0:t.minZoom,this.resolutions_=t.resolutions,u.default.assert(f.default.isSorted(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(var i=0,n=this.resolutions_.length-1;i<n;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0===t.origin?null:t.origin,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,u.default.assert(this.origins_.length==this.resolutions_.length,20));var r=t.extent;void 0===r||this.origin_||this.origins_||(this.origin_=c.default.getTopLeft(r)),u.default.assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,u.default.assert(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0===t.tileSize?this.tileSizes_?null:l.default.DEFAULT_TILE_SIZE:t.tileSize,u.default.assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0===r?null:r,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0===t.sizes?r&&this.calculateTileRanges_(r):this.fullTileRanges_=t.sizes.map(function(t){return new d.default(s(0,t[0]),a(t[0]-1,-1),s(0,t[1]),a(t[1]-1,-1))},this)};g.tmpTileCoord_=[0,0,0],g.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),r=n.minX,o=n.maxX;r<=o;++r)for(var a=n.minY,s=n.maxY;a<=s;++a)i([e,r,a])},g.prototype.forEachTileCoordParentTileRange=function(t,e,i,n,o){var a,s,l,u=null,f=t[0]-1;for(2===this.zoomFactor_?(s=t[1],l=t[2]):u=this.getTileCoordExtent(t,o);f>=this.minZoom;){if(2===this.zoomFactor_?(s=r(s/2),l=r(l/2),a=d.default.createOrUpdate(s,s,l,l,n)):a=this.getTileRangeForExtentAndZ(u,f,n),e.call(i,f,a))return!0;--f}return!1},g.prototype.getExtent=function(){return this.extent_},g.prototype.getMaxZoom=function(){return this.maxZoom},g.prototype.getMinZoom=function(){return this.minZoom},g.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},g.prototype.getResolution=function(t){return this.resolutions_[t]},g.prototype.getResolutions=function(){return this.resolutions_},g.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],r=2*t[2];return d.default.createOrUpdate(n,n+1,r,r+1,e)}var o=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},g.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),r=this.getResolution(t),o=p.default.toSize(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*o[0]*r,s=n[0]+(e.maxX+1)*o[0]*r,l=n[1]+e.minY*o[1]*r,u=n[1]+(e.maxY+1)*o[1]*r;return c.default.createOrUpdate(a,l,s,u,i)},g.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=g.tmpTileCoord_;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n);var r=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,n),d.default.createOrUpdate(r,n[1],o,n[2],i)},g.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=p.default.toSize(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]+(t[2]+.5)*n[1]*i]},g.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=p.default.toSize(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*n,a=i[1]+t[2]*r[1]*n,s=o+r[0]*n,l=a+r[1]*n;return c.default.createOrUpdate(o,a,s,l,e)},g.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},g.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,a){var s=this.getZForResolution(i),l=i/this.getResolution(s),u=this.getOrigin(s),d=p.default.toSize(this.getTileSize(s),this.tmpSize_),f=n?.5:0,c=n?0:.5,h=r((t-u[0])/i+f),g=r((e-u[1])/i+c),y=l*h/d[0],v=l*g/d[1];return n?(y=o(y)-1,v=o(v)-1):(y=r(y),v=r(v)),_.default.createOrUpdate(s,y,v,a)},g.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,a){var s=this.getOrigin(i),l=this.getResolution(i),u=p.default.toSize(this.getTileSize(i),this.tmpSize_),d=n?.5:0,f=n?0:.5,c=r((t-s[0])/l+d),h=r((e-s[1])/l+f),g=c/u[0],y=h/u[1];return n?(g=o(g)-1,y=o(y)-1):(g=r(g),y=r(y)),_.default.createOrUpdate(i,g,y,a)},g.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},g.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},g.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},g.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},g.prototype.getZForResolution=function(t,e){var i=f.default.linearFindNearest(this.resolutions_,t,e||0);return h.default.clamp(i,this.minZoom,this.maxZoom)},g.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i},e.default=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(3)),r={cache_:{},clear:function(){r.cache_={}},add:function(t,e,i){var n=t.getCode(),o=e.getCode(),a=r.cache_;n in a||(a[n]={}),a[n][o]=i},remove:function(t,e){var i=t.getCode(),o=e.getCode(),a=r.cache_,s=a[i][o];return delete a[i][o],n.default.isEmpty(a[i])&&delete a[i],s},get:function(t,e){var i,n=r.cache_;return t in n&&e in n[t]&&(i=n[t][e]),i}};e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={cache_:{},clear:function(){i.cache_={}},get:function(t){return i.cache_[t]||null},add:function(t,e){i.cache_[t]=e}};e.default=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.PI;Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),a=n(i(6)),s=n(i(83)),l=n(i(31)),u={Projection_:function(t){s.default.call(this,{code:t,units:l.default.METERS,extent:u.EXTENT,global:!0,worldExtent:u.WORLD_EXTENT,getPointResolution:function(t,e){return t/a.default.cosh(e[1]/u.RADIUS)}})}};o.default.inherits(u.Projection_,s.default),u.RADIUS=6378137,u.HALF_SIZE=r*u.RADIUS,u.EXTENT=[-u.HALF_SIZE,-u.HALF_SIZE,u.HALF_SIZE,u.HALF_SIZE],u.WORLD_EXTENT=[-180,-85,180,85],u.PROJECTIONS=[new u.Projection_("EPSG:3857"),new u.Projection_("EPSG:102100"),new u.Projection_("EPSG:102113"),new u.Projection_("EPSG:900913"),new u.Projection_("urn:ogc:def:crs:EPSG:6.18:3:3857"),new u.Projection_("urn:ogc:def:crs:EPSG::3857"),new u.Projection_("http://www.opengis.net/gml/srs/epsg.xml#3857")],u.fromEPSG4326=function(t,e,i){var n=t.length,o=1<i?i:2,a=e;void 0===a&&(a=2<o?t.slice():Array(n));for(var s=u.HALF_SIZE,l=0;l<n;l+=o){a[l]=s*t[l]/180;var d=u.RADIUS*Math.log(Math.tan(r*(t[l+1]+90)/360));d>s?d=s:d<-s&&(d=-s),a[l+1]=d}return a},u.toEPSG4326=function(t,e,i){var n=t.length,o=1<i?i:2,a=e;void 0===a&&(a=2<o?t.slice():Array(n));for(var s=0;s<n;s+=o)a[s]=180*t[s]/u.HALF_SIZE,a[s+1]=360*Math.atan(Math.exp(t[s+1]/u.RADIUS))/r-90;return a},e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(62)),r={};r.TILE_GRID=n.default.createXYZ({minZoom:8,maxZoom:21}),e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(32)),r=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};r.getKey=function(t,e,i){return e+":"+t+":"+(i?n.default.asString(i):"null")},r.prototype.clear=function(){this.cache_={},this.cacheSize_=0},r.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t,e,i=0;for(t in this.cache_)e=this.cache_[t],0!=(3&i++)||e.hasListener()||(delete this.cache_[t],--this.cacheSize_)}},r.prototype.get=function(t,e,i){var n=r.getKey(t,e,i);return n in this.cache_?this.cache_[n]:null},r.prototype.set=function(t,e,i,n){var o=r.getKey(t,e,i);this.cache_[o]=n,++this.cacheSize_},r.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(8)),a=n(i(5)),s=n(i(39)),l=n(i(4)),u=n(i(50)),d=n(i(153)),f=function(t,e,i,n,r,o){s.default.call(this),this.hitDetectionImage_=null,this.image_=t||new Image,null!==n&&(this.image_.crossOrigin=n),this.canvas_=o?document.createElement("CANVAS"):null,this.color_=o,this.imageListenerKeys_=null,this.imageState_=r,this.size_=i,this.src_=e,this.tainting_=!1,this.imageState_==u.default.LOADED&&this.determineTainting_()};r.default.inherits(f,s.default),f.get=function(t,e,i,n,r,o){var a=d.default.iconImageCache,s=a.get(e,n,o);return s||(s=new f(t,e,i,n,r,o),a.set(e,n,o,s)),s},f.prototype.determineTainting_=function(){var t=o.default.createCanvasContext2D(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainting_=!0}},f.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(l.default.CHANGE)},f.prototype.handleImageError_=function(){this.imageState_=u.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},f.prototype.handleImageLoad_=function(){this.imageState_=u.default.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},f.prototype.getImage=function(){return this.canvas_?this.canvas_:this.image_},f.prototype.getImageState=function(){return this.imageState_},f.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.tainting_){var t=this.size_[0],e=this.size_[1],i=o.default.createCanvasContext2D(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},f.prototype.getSize=function(){return this.size_},f.prototype.getSrc=function(){return this.src_},f.prototype.load=function(){if(this.imageState_==u.default.IDLE){this.imageState_=u.default.LOADING,this.imageListenerKeys_=[a.default.listenOnce(this.image_,l.default.ERROR,this.handleImageError_,this),a.default.listenOnce(this.image_,l.default.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},f.prototype.replaceColor_=function(){if(!this.tainting_&&null!==this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,n=this.color_[0]/255,r=this.color_[1]/255,o=this.color_[2]/255,a=0,s=i.length;a<s;a+=4)i[a]*=n,i[a+1]*=r,i[a+2]*=o;t.putImageData(e,0,0)}},f.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.default.unlistenByKey),this.imageListenerKeys_=null},e.default=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={FRACTION:"fraction",PIXELS:"pixels"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Math.PI,o=Math.sin,a=Math.cos;Object.defineProperty(e,"__esModule",{value:!0});var s=n(i(0)),l=n(i(63)),u=n(i(8)),d=n(i(19)),f=n(i(50)),c=n(i(25)),h=n(i(156)),p=function(t){this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0===t.fill?null:t.fill,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0===t.radius?t.radius1:t.radius,this.radius2_=t.radius2,this.angle_=void 0===t.angle?0:t.angle,this.stroke_=void 0===t.stroke?null:t.stroke,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=t.atlasManager,this.render_(this.atlasManager_);var e=!(void 0!==t.snapToPixel)||t.snapToPixel,i=void 0!==t.rotateWithView&&t.rotateWithView;h.default.call(this,{opacity:1,rotateWithView:i,rotation:void 0===t.rotation?0:t.rotation,scale:1,snapToPixel:e})};s.default.inherits(p,h.default),p.prototype.clone=function(){var t=new p({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},p.prototype.getAnchor=function(){return this.anchor_},p.prototype.getAngle=function(){return this.angle_},p.prototype.getFill=function(){return this.fill_},p.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_},p.prototype.getImage=function(){return this.canvas_},p.prototype.getImageSize=function(){return this.imageSize_},p.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},p.prototype.getImageState=function(){return f.default.LOADED},p.prototype.getOrigin=function(){return this.origin_},p.prototype.getPoints=function(){return this.points_},p.prototype.getRadius=function(){return this.radius_},p.prototype.getRadius2=function(){return this.radius2_},p.prototype.getSize=function(){return this.size_},p.prototype.getStroke=function(){return this.stroke_},p.prototype.listenImageChange=function(){},p.prototype.load=function(){},p.prototype.unlistenImageChange=function(){},p.prototype.render_=function(t){var e,i,n="",r="",o=0,a=null,s=0,f=0;this.stroke_&&(null===(i=this.stroke_.getColor())&&(i=c.default.defaultStrokeStyle),i=l.default.asColorLike(i),void 0===(f=this.stroke_.getWidth())&&(f=c.default.defaultLineWidth),a=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),!d.default.CANVAS_LINE_DASH&&(a=null,s=0),void 0===(r=this.stroke_.getLineJoin())&&(r=c.default.defaultLineJoin),void 0===(n=this.stroke_.getLineCap())&&(n=c.default.defaultLineCap),void 0===(o=this.stroke_.getMiterLimit())&&(o=c.default.defaultMiterLimit));var h=2*(this.radius_+f)+1,p={strokeStyle:i,strokeWidth:f,size:h,lineCap:n,lineDash:a,lineDashOffset:s,lineJoin:r,miterLimit:o};if(void 0===t){var _=u.default.createCanvasContext2D(h,h);this.canvas_=_.canvas,e=h=this.canvas_.width,this.draw_(p,_,0,0),this.createHitDetectionCanvas_(p)}else{h=Math.round(h);var g,y=!this.fill_;y&&(g=this.drawHitDetectionCanvas_.bind(this,p));var v=this.getChecksum(),m=t.add(v,h,h,this.draw_.bind(this,p),g);this.canvas_=m.image,this.origin_=[m.offsetX,m.offsetY],e=m.image.width,y?(this.hitDetectionCanvas_=m.hitImage,this.hitDetectionImageSize_=[m.hitImage.width,m.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[h/2,h/2],this.size_=[h,h],this.imageSize_=[e,e]},p.prototype.draw_=function(t,e,i,n){var s,u,d;e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var f=this.points_;if(f===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*r,!0);else{var h=void 0===this.radius2_?this.radius_:this.radius2_;for(h!==this.radius_&&(f*=2),s=0;s<=f;s++)u=2*s*r/f-r/2+this.angle_,d=0==s%2?this.radius_:h,e.lineTo(t.size/2+d*a(u),t.size/2+d*o(u))}if(this.fill_){var p=this.fill_.getColor();null===p&&(p=c.default.defaultFillStyle),e.fillStyle=l.default.asColorLike(p),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},p.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=u.default.createCanvasContext2D(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},p.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var s=this.points_;if(s===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*r,!0);else{var l,u,d,f=void 0===this.radius2_?this.radius_:this.radius2_;for(f!==this.radius_&&(s*=2),l=0;l<=s;l++)d=2*l*r/s-r/2+this.angle_,u=0==l%2?this.radius_:f,e.lineTo(t.size/2+u*a(d),t.size/2+u*o(d))}e.fillStyle=c.default.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},p.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var i="r"+t+e+(void 0===this.radius_?"-":this.radius_.toString())+(void 0===this.radius2_?"-":this.radius2_.toString())+(void 0===this.angle_?"-":this.angle_.toString())+(void 0===this.points_?"-":this.points_.toString());this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(85)),o=n(i(155)),a=n(i(101)),s=n(i(157)),l=n(i(154)),u=n(i(292)),d=n(i(88)),f={zoneColors:{1:[231,86,36],2:[242,133,35],3:[251,237,48],4:[185,212,49],5:[126,195,74],6:[18,147,122]},center:function(t,e){var i=u.default.TILE_GRID.getZForResolution(e),n=[new r.default({image:new s.default({fill:new o.default({color:"#085095"}),stroke:new a.default({color:"#fff",width:2}),radius:.9*i})})];return"Y"===t.get("ACCESSIBLE")&&n.push(new r.default({image:new l.default({src:"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22656%22%20height%3D%22656%22%3E%3Cg%20transform%3D%22translate(-263.86732%2C-69.7075)%22%20style%3D%22fill%3A%23fff%22%3E%3Cpath%20%20d%3D%22M%20833.556%2C367.574%20C%20825.803%2C359.619%20814.97%2C355.419%20803.9%2C356.025%20l%20-133.981%2C7.458%2073.733%2C-83.975%20c%2010.504%2C-11.962%2013.505%2C-27.908%209.444%2C-42.157%20-2.143%2C-9.764%20-8.056%2C-18.648%20-17.14%2C-24.324%20-0.279%2C-0.199%20-176.247%2C-102.423%20-176.247%2C-102.423%20-14.369%2C-8.347%20-32.475%2C-6.508%20-44.875%2C4.552%20l%20-85.958%2C76.676%20c%20-15.837%2C14.126%20-17.224%2C38.416%20-3.097%2C54.254%2014.128%2C15.836%2038.419%2C17.227%2054.255%2C3.096%20l%2065.168%2C-58.131%2053.874%2C31.285%20-95.096%2C108.305%20c%20-39.433%2C6.431%20-74.913%2C24.602%20-102.765%2C50.801%20l%2049.66%2C49.66%20c%2022.449%2C-20.412%2052.256%2C-32.871%2084.918%2C-32.871%2069.667%2C0%20126.346%2C56.68%20126.346%2C126.348%200%2C32.662%20-12.459%2C62.467%20-32.869%2C84.916%20l%2049.657%2C49.66%20c%2033.08%2C-35.166%2053.382%2C-82.484%2053.382%2C-134.576%200%2C-31.035%20-7.205%2C-60.384%20-20.016%2C-86.482%20l%2051.861%2C-2.889%20-12.616%2C154.75%20c%20-1.725%2C21.152%2014.027%2C39.695%2035.18%2C41.422%201.059%2C0.086%202.116%2C0.127%203.163%2C0.127%2019.806%2C0%2036.621%2C-15.219%2038.257%2C-35.306%20l%2016.193%2C-198.685%20c%200.904%2C-11.071%20-3.026%2C-21.989%20-10.775%2C-29.942%20z%22%2F%3E%3Cpath%20%20d%3D%22m%20762.384%2C202.965%20c%2035.523%2C0%2064.317%2C-28.797%2064.317%2C-64.322%200%2C-35.523%20-28.794%2C-64.323%20-64.317%2C-64.323%20-35.527%2C0%20-64.323%2C28.8%20-64.323%2C64.323%200%2C35.525%2028.795%2C64.322%2064.323%2C64.322%20z%22%2F%3E%3Cpath%20d%3D%22m%20535.794%2C650.926%20c%20-69.668%2C0%20-126.348%2C-56.68%20-126.348%2C-126.348%200%2C-26.256%208.056%2C-50.66%2021.817%2C-70.887%20l%20-50.196%2C-50.195%20c%20-26.155%2C33.377%20-41.791%2C75.393%20-41.791%2C121.082%200%2C108.535%2087.983%2C196.517%20196.518%2C196.517%2045.691%2C0%2087.703%2C-15.636%20121.079%2C-41.792%20L%20606.678%2C629.11%20c%20-20.226%2C13.757%20-44.63%2C21.816%20-70.884%2C21.816%20z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E",scale:1.2*i/656})})),n},zone:function(t){var e=t.get("zone");if(e!==d.default.SURFACE_WATER_ZONE)return new r.default({fill:new o.default({color:"rgb("+f.zoneColors[e]+")"})})}};e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(88));e.default={center:{getName:function(){return this.get("OEM_LABEL")+'<span class="screen-reader-only"> - this is an accessible facility</span>'},getAddress1:function(){return this.get("BLDG_ADD")},getAddress2:function(){return"Between "+this.get("CROSS1")+" and "+this.get("CROSS2")},getCityStateZip:function(){return this.get("CITY")+" , NY "+this.get("ZIP_CODE")},isAccessible:function(){return"Y"===this.get("ACCESSIBLE")},cssClass:function(){return this.isAccessible()?"acc":""},detailsHtml:function(){if(this.isAccessible())return this.content.message("acc_feat",this.getProperties())},detailsCollapsible:function(){var t=this.detailsHtml();if(t)return $('<a class="btn rad-all dtl"></a>').html('<span class="screen-reader-only">Click for accessibility </span>').append("Details...").click($.proxy(this.finderApp.expandDetail,this.finderApp)).add(t)}},zone:{cssClass:function(){return"zone"},getZone:function(){return this.get("zone")},isSurfaceWater:function(){return this.getZone()===n.default.SURFACE_WATER_ZONE},html:function(){if(!this.isSurfaceWater()){var t=this.content,e=this.getZone();return t.message("zone_info",{zone:e,order:t.zoneMsg(e)})}}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=n(i(2)),a=n(i(88)),s=n(i(299)),l=n(i(298)),u=n(i(287)),d=n(i(164)),f=n(i(103)),c=n(i(106)),h=n(i(89)),p=n(i(100)),_=n(i(162)),g=n(i(48)),y=n(i(28)),v=n(i(161)),m=n(i(74)),E=n(i(72)),b=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.message("filter_centers"),n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{title:"<span><span><span>"+t.message("banner_text")+"</span></span></span>",splashOptions:{message:'<div class="orders">'+t.message("splash_msg")+"</div>",buttonText:[t.message("btn_text")]},facilityUrl:a.default.CENTER_URL,facilityFormat:new d.default({x:"X",y:"Y",defaultDataProjection:"EPSG:2263"}),facilityStyle:l.default.center,facilityTabTitle:t.message("centers_tab"),decorations:[{content:t},s.default.center],filterChoiceOptions:[{radio:!0,choices:[{name:"ACCESSIBLE",values:["N","Y"],label:"All "+i,checked:!0},{name:"ACCESSIBLE",values:["Y"],label:"<div></div>Only accessible "+i}]}],geoclientUrl:a.default.GEOCLIENT_URL,directionsUrl:a.default.DIRECTIONS_URL}));return n.layer.setZIndex(1),n.content=t,n.addZoneLayer(t),n.createSlider(),n.renderEvacOrder(t),n.renderPrePostStorm(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),r(e,[{key:"createFilters",value:function(t){var e=new c.default({target:(0,o.default)('<div id="acc-filter"></div>'),source:this.source,choiceOptions:t});return(0,o.default)("#facilities").prepend(e.getContainer()).prepend('<div class="note"></div>'),e.on("change",this.resetList,this),e}},{key:"createTabs",value:function(t){var e=new p.default({target:"#tabs",tabs:[{tab:"#map",title:"Map"},{tab:"#facilities",title:t.facilityTabTitle},{tab:"#legend",title:"Legend"}]});return e.on("change",this.tabChange,this),(0,o.default)(window).resize(o.default.proxy(this.adjustTabs,this)),e}},{key:"located",value:function(t){var i=this;(function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in r)return r.value;var a=r.get;return void 0===a?void 0:a.call(n)})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"located",this).call(this,t);var n=this.popup,r=new g.default({geometry:new y.default(t.coordinate)});r.html=function(){return i.content.locationMsg(t)},n.hide(),setTimeout(function(){n.showFeatures([r]),(0,o.default)(".pop").attr("tabindex",0).focus()},500)}},{key:"expandDetail",value:function(t){var e=this.popup;(0,o.default)(t.target).next().slideToggle(function(){e.pan()})}},{key:"addZoneLayer",value:function(t){this.zoneSource=new m.default({format:new f.default({parentFormat:new v.default,decorations:[{content:t},s.default.zone]}),url:a.default.ZONE_URL}),this.zoneLayer=new E.default({source:this.zoneSource,style:l.default.zone,opacity:.55}),this.map.addLayer(this.zoneLayer),this.popup.addLayer(this.zoneLayer),new h.default({map:this.map,tips:[{layer:this.zoneLayer,label:function(t){return{css:"zone",html:t.content.message("zone_tip",{zone:t.getZone(),order:t.content.zoneMsg()})}}}]})}},{key:"createSlider",value:function(){new _.default({target:"#transparency",min:0,max:100,value:45,units:"%",label:"Zone Transparency:"}).on("change",this.zoneOpacity,this)}},{key:"zoneOpacity",value:function(t){var e=(100-t.val())/100;this.zoneLayer.setOpacity(e),(0,o.default)(".leg-sw.zone").css("opacity",e)}},{key:"renderEvacOrder",value:function(t){var e="Zone ",i=t.evacuations;if(i.length&&"NO"===t.messages.post_storm){var n=t.message("splash_yes_order");(0,o.default)("body").addClass("active-order"),(0,o.default)(".dia-container.splash").append('<div id="patch"></div>'),(0,o.default)(".orders").html(n),1<i.length&&(e="Zones "),i.forEach(function(t,n){e+=t,e+=n===i.length-2?" and ":", "}),e=e.substr(0,e.length-2),(0,o.default)(".orders").append(t.message("splash_zone_order",{zones:e})),(0,o.default)('<h2 class="alert"><div><div>'+n+"</div></div></h2>").insertAfter("#banner"),(0,o.default)(".alert div>div>div").append(" "+e)}}},{key:"renderPrePostStorm",value:function(t){var e="NYC "+t.message("banner_text");document.title=e,(0,o.default)("#home").attr("title",e),(0,o.default)("#legend .center").html(t.message("legend_center")),(0,o.default)("#facilities .note").html(t.message("centers_msg")),(0,o.default)("#legend .note.top").html(t.message("legend_msg"))}}]),e}();e.default=b},function(){"use strict";!function(t){function e(t){if("string"!=typeof t&&(t+=""),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t+=""),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return p.iterable&&(e[Symbol.iterator]=function(){return e}),e}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function s(t){var e=new FileReader,i=a(e);return e.readAsArrayBuffer(t),i}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(p.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(p.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(p.arrayBuffer&&p.blob&&g(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!y(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,i=a(e);return e.readAsText(t),i}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=Array(e.length),n=0;n<e.length;n++)i[n]=String.fromCharCode(e[n]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(t,e){var i=(e=e||{}).body;if(t instanceof d){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new r(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t+"";if(this.credentials=e.credentials||this.credentials||"omit",(e.headers||!this.headers)&&(this.headers=new r(e.headers)),this.method=function(t){var e=t.toUpperCase();return-1<v.indexOf(e)?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),n=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}}),e}function c(t){var e=new r;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var i=t.split(":"),n=i.shift().trim();if(n){var r=i.join(":").trim();e.append(n,r)}}),e}function h(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&300>this.status,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new r(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var p={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(p.arrayBuffer)var _=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(t){return t&&DataView.prototype.isPrototypeOf(t)},y=ArrayBuffer.isView||function(t){return t&&-1<_.indexOf(Object.prototype.toString.call(t))};r.prototype.append=function(t,n){t=e(t),n=i(n);var r=this.map[t];this.map[t]=r?r+","+n:n},r.prototype.delete=function(t){delete this.map[e(t)]},r.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},r.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},r.prototype.set=function(t,n){this.map[e(t)]=i(n)},r.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},r.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),n(t)},r.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},r.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),n(t)},p.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},u.call(d.prototype),u.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},h.error=function(){var t=new h(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];h.redirect=function(t,e){if(-1===m.indexOf(e))throw new RangeError("Invalid status code");return new h(null,{status:e,headers:{location:t}})},t.Headers=r,t.Request=d,t.Response=h,t.fetch=function(t,e){return new Promise(function(i,n){var r=new d(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:c(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;i(new h(e,t))},o.onerror=function(){n(new TypeError("Network request failed"))},o.ontimeout=function(){n(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials?o.withCredentials=!0:"omit"===r.credentials&&(o.withCredentials=!1),"responseType"in o&&p.blob&&(o.responseType="blob"),r.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===r._bodyInit?null:r._bodyInit)})},t.fetch.polyfill=!0}}("undefined"==typeof self?void 0:self)},function(t){"use strict";function e(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function n(t){if(l===setTimeout)return setTimeout(t,0);if((l===e||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function r(){h&&f&&(h=!1,f.length?c=f.concat(c):p=-1,c.length&&o())}function o(){if(!h){var t=n(r);h=!0;for(var e=c.length;e;){for(f=c,c=[];++p<e;)f&&f[p].run();p=-1,e=c.length}f=null,h=!1,function(t){if(u===clearTimeout)return clearTimeout(t);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function s(){}var l,u,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:e}catch(t){l=e}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(t){u=i}}();var f,c=[],h=!1,p=-1;d.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new a(t,e)),1!==c.length||h||n(o)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(){return[]},d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(160)),s=n(i(159));i(87).polyfill(),i(86);var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.messages={},t.forEach(function(t){Object.keys(t).forEach(function(e){i.messages[e]&&console.warn("Overwriting message with key '"+e+"'"),i.messages[e]=t[e]})}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"message",value:function(t,e){return this.messages[t]?this.replace(this.messages[t],e||{}):""}}]),e}();l.loadCsv=function(t){var e=t.messages||[{}],i=t.key||"key",n=t.value||"value";return new Promise(function(r){fetch(t.url).then(function(t){return t.text()}).then(function(t){a.default.parse(t,{header:!0}).data.forEach(function(t){e[0][t[i]]&&console.warn("Overwriting message with key '"+[t[i]]+"'"),e[0][t[i]]=t[n]}),r(new l(e))})})},l.LoadOptions,e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={yes_order:'<div class="order active">${oem_supplied}</div>',no_order:'<div class="order">${oem_supplied}</div>',splash_yes_order:"<div>an evacuation order is in effect for</div>",splash_zone_order:'<div class="zone">${zones}</div>',location_no_zone:'<h2 class="notranslate">${oem_supplied}</h2><div>${name}</div>',location_zone_order:'<h2 class="notranslate">${oem_supplied}<br>${order}</h2><div>${name}</div>',location_zone_unkown:'<h2 class="notranslate">${oem_supplied}</h2><div>${name}</div>',location_zone_unkown_311:"<div><div>${oem_supplied}</div><div>${name}</div></div>",zone_info:"<h2>Zone ${zone}</h2><div>${order}</div>",zone_tip:"<div>evacuation zone ${zone}</div><div>${order}</div>",acc_feat:'<ul class="rad-all dtl"><li>${ACC_FEAT}</li><li>Access to the main shelter areas will be unobstructed and without steps.</li><li>Accessible restrooms are available.</li><li>Accessible dormitory and eating/cafeteria areas are available.</li><li>Additional amenities will be available such as accessible cots, storage space for refrigerated medication, power strips for charging mobility and other accessibility devices, and mobility aids (canes, crutches, manual wheelchairs, etc.).</li><li>Auxiliary aids and services will be available, including sign language interpreters, sound amplifiers, and documents in alternative formats.</li></ul>'}},function(t){t.exports=window.proj4||{defs:function(){}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=(n(i(2)),n(i(88))),a=n(i(304)),s=n(i(303));i(87).polyfill(),i(86);var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return i.zoneOrders={},i.evacuations=[],s.default.loadCsv({url:o.default.CONTENT_URL,messages:[a.default]}).then(function(e){i.messages=e.messages,fetch(o.default.ORDER_URL).then(function(e){e.text().then(function(e){Papa.parse(e,{header:!0}).data.forEach(function(t){"YES"===t.EVACUATE&&(i.zoneOrders[t.ZONE]=!0,i.evacuations.push(t.ZONE))}),t(i)})})}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"locationMsg",value:function(t){var e=t.data?t.data.hurricaneEvacuationZone:null,i=t.name.replace(/,/,"<br>");return e?e===o.default.NO_ZONE?this.message("location_no_zone",{name:i,oem_supplied:this.message("user_in_x_zone")}):this.message("location_zone_order",{order:this.zoneMsg(e),name:i,oem_supplied:this.message("user_zone",{zone:e})}):this.message("location_zone_unkown",{name:i,oem_supplied:this.message("user_zone_unkown")})}},{key:"zoneMsg",value:function(t){return this.zoneOrders[t]?this.message("yes_order",{oem_supplied:this.message("evac_order")}):this.message("no_order",{oem_supplied:this.message("no_evac_order")})}}]),e}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=n(i(306)),o=n(i(300));new r.default(function(t){new o.default(t)})}]);